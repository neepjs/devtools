{"version":3,"file":"neep.devtools.esm.js","sources":["../src/tree.ts","../src/app/index.tsx","../src/devtools/index.ts","../src/install.ts"],"sourcesContent":["import {\n\tTemplate, ScopeSlot, SlotRender, Value,\n\tnameSymbol, typeSymbol, Deliver,\n} from '@neep/core';\nimport { MountedNode } from '../../core/src/render/draw';\nimport Container from '../../core/src/render/Container';\nimport Entity from '../../core/src/render/Entity';\nexport enum Type {\n\ttag = 'tag',\n\tplaceholder = 'placeholder',\n\tstandard = 'standard',\n\tsimple = 'simple',\n\tnative = 'native',\n\tcontainer = 'container',\n\tspecial = 'special',\n}\nexport interface VTreeNode {\n\tid: number;\n\ttype: Type;\n\ttag: string;\n\t/** 子节点 */\n\tchildren: VTreeNode[];\n\tprops?: { [key: string]: any; };\n\t/** 列表对比 key */\n\tkey?: any;\n\t/** 标注 */\n\tlabel?: [string, string];\n\tparent: number;\n\tvalue?: string;\n\tvalueType?: 'string' | 'value' | 'function'\n\t| 'native' | 'object' | 'date' | 'regex';\n}\n\nexport function *getTree(\n\ttree: MountedNode | (MountedNode | MountedNode[])[],\n\tparent: number = 0,\n): Iterable<VTreeNode> {\n\tif (Array.isArray(tree)) {\n\t\tfor (const it of tree) {\n\t\t\tyield* getTree(it);\n\t\t}\n\t\treturn;\n\t}\n\tconst {\n\t\tid,\n\t\ttag,\n\t\tprops,\n\t\tchildren,\n\t\tkey,\n\t\tcomponent,\n\t\tlabel = component?.exposed?.$label,\n\t} = tree;\n\tif (!tag) {\n\t\treturn yield {\n\t\t\tid, parent,\n\t\t\ttype: Type.placeholder,\n\t\t\ttag: 'placeholder',\n\t\t\tchildren: [],\n\t\t};\n\t}\n\tif (typeof tag !== 'string') {\n\t\tconst name = tag[nameSymbol] || tag.name;\n\t\tif (!component) {\n\t\t\treturn yield {\n\t\t\t\tid, parent,\n\t\t\t\ttype: Type.simple,\n\t\t\t\ttag: name,\n\t\t\t\tchildren: [...getTree(children)],\n\t\t\t\tprops,\n\t\t\t\tkey,\n\t\t\t\tlabel,\n\t\t\t};\n\t\t}\n\t\tconst isNative = tag[typeSymbol] === 'native';\n\t\treturn yield {\n\t\t\tid, parent,\n\t\t\ttype: isNative ? Type.native : Type.standard,\n\t\t\ttag: name,\n\t\t\tchildren: [...getTree(\n\t\t\t\t'content' in component ? (component as Container).content\n\t\t\t\t\t: isNative ? (component as Entity).nativeTree : component.tree\n\t\t\t)],\n\t\t\tprops,\n\t\t\tkey,\n\t\t\tlabel,\n\t\t};\n\t}\n\tif (\n\t\ttag === Template || tag === Deliver\n\t\t|| tag === ScopeSlot || tag === SlotRender\n\t) {\n\t\treturn yield {\n\t\t\tid, parent,\n\t\t\ttype: Type.special,\n\t\t\ttag,\n\t\t\tchildren: [...getTree(children)],\n\t\t\tprops,\n\t\t\tkey,\n\t\t\tlabel,\n\t\t};\n\t}\n\tif (tag === Value) {\n\t\tconst treeValue = tree.value;\n\t\tconst type = typeof treeValue;\n\t\tlet valueType: VTreeNode['valueType'] = 'string';\n\t\tlet value = '';\n\t\tif (type === 'string') {\n\t\t\tvalue = treeValue;\n\t\t} else if (treeValue === tree.node) {\n\t\t\tvalueType = 'native';\n\t\t} else if (type === 'function') {\n\t\t\tvalueType ='function';\n\t\t} else if (\n\t\t\ttype === 'bigint'\n\t\t\t|| type === 'boolean'\n\t\t\t|| type === 'number'\n\t\t\t|| type === 'symbol'\n\t\t\t|| type === 'undefined'\n\t\t\t|| treeValue === null\n\t\t) {\n\t\t\tvalueType ='value';\n\t\t\tvalue = String(treeValue);\n\t\t} else if (treeValue instanceof RegExp) {\n\t\t\tvalueType ='regex';\n\t\t\tvalue = String(treeValue);\n\t\t} else if (treeValue instanceof Date) {\n\t\t\tvalueType ='date';\n\t\t\tvalue = treeValue.toISOString();\n\t\t} else if (type === 'object') {\n\t\t\tvalueType = 'object';\n\t\t\tvalue = String(treeValue);\n\t\t}\n\t\treturn yield {\n\t\t\tid, parent,\n\t\t\ttype: Type.special,\n\t\t\ttag,\n\t\t\tchildren: [],\n\t\t\tvalueType,\n\t\t\tvalue,\n\t\t\tprops,\n\t\t\tkey,\n\t\t\tlabel,\n\t\t};\n\t}\n\tyield {\n\t\tid, parent,\n\t\ttype: Type.tag,\n\t\ttag,\n\t\tchildren: [...getTree(children)],\n\t\tprops,\n\t\tkey,\n\t\tlabel,\n\t};\n\n}\n","import {\n\tcreate,\n\tcreateElement,\n\tNeepNode,\n\tTemplate,\n\tScopeSlot,\n\tSlotRender,\n\tValue,\n\tDeliver,\n} from '@neep/core';\nimport { VTreeNode, Type } from '../tree';\n\ninterface Options {\n\tvalue?: boolean;\n\ttag?: boolean;\n\tplaceholder?: boolean;\n\tsimple?: boolean;\n\tcontainer?: boolean;\n\ttemplate?: boolean;\n\tscopeSlot?: boolean;\n\tslotRender?: boolean;\n\tdeliver?: boolean;\n}\nfunction getOptions({\n\tvalue = false,\n\ttag = false,\n\tplaceholder = false,\n\tsimple = false,\n\tcontainer = false,\n\ttemplate = false,\n\tscopeSlot = false,\n\tslotRender = false,\n\tdeliver = false,\n}: Options): Options {\n\treturn {\n\t\tvalue,\n\t\ttag,\n\t\tplaceholder,\n\t\tsimple,\n\t\tcontainer,\n\t\ttemplate,\n\t\tscopeSlot,\n\t\tslotRender,\n\t\tdeliver,\n\t};\n}\nfunction createText(\n\tvalueType: VTreeNode['valueType'] = 'string',\n\tvalue: string = '',\n): NeepNode {\n\tswitch(valueType) {\n\t\tcase 'string':\n\t\t\treturn <span>{value}</span>;\n\t\tcase 'native':\n\t\t\treturn <span style=\"font-weight: bold;\">[Native]</span>;\n\t\tcase 'function':\n\t\t\treturn <span style=\"font-weight: bold;\">[Function]</span>;\n\t\tcase 'date':\n\t\t\treturn <span style=\"font-weight: bold;\">{value}</span>;\n\t\tcase 'regex':\n\t\t\treturn <span style=\"font-weight: bold;\">{value}</span>;\n\t\tcase 'value':\n\t\t\treturn <span style=\"font-style: italic;\">{value}</span>;\n\t\tcase 'object':\n\t\t\treturn <span style=\"font-style: italic;\">{value}</span>;\n\t}\n}\nfunction createTag(\n\tname: any,\n\tkeys: {[key: number]: boolean},\n\tid: number,\n\tkey: any,\n\tlabels: ([string, string] | undefined)[],\n\t...children: any[]\n): NeepNode {\n\tconst opened = keys[id];\n\tconst hasChildren = Boolean(children.length);\n\treturn <div key={id} style=\"\n\t\tposition: relative;\n\t\tmin-height: 20px;\n\t\tfont-size: 14px;\n\t\tline-height: 20px;\n\t\">\n\t\t{children.length && <div\n\t\t\tstyle=\"\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: -20px;\n\t\t\t\ttop: 0;\n\t\t\t\twidth: 20px;\n\t\t\t\theight: 20px;\n\t\t\t\ttext-align: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tbackground: #DDD;;\n\t\t\t\"\n\t\t\tonClick={() => keys[id] = !opened}\n\t\t>{opened ? '-' : '+'}</div> || undefined}\n\t\t<div>\n\t\t\t{'<'}{name}\n\t\t\t{ typeof key === 'string' ? ` key=\"${key}\"`\n\t\t\t: typeof key === 'number' ? ` key=${key}`\n\t\t\t: typeof key === 'boolean' ? ` key=${key}`\n\t\t\t: typeof key === 'bigint' ? ` key=${key}`\n\t\t\t: typeof key === 'symbol' ? ` key=${String(key)}`\n\t\t\t: key === null ? ` key=${key}`\n\t\t\t: key !== undefined && ` key={${String(key)}}`\n\t\t}\n\t\t\t{hasChildren ? '>' : ' />'}\n\t\t\t{hasChildren && !opened && <span>\n\t\t\t\t<span\n\t\t\t\t\tonClick={() => keys[id] = true}\n\t\t\t\t\tstyle=\"cursor: pointer;\"\n\t\t\t\t>...</span>\n\t\t\t\t{'</'}{name}{'>'}\n\t\t\t</span>}\n\t\t\t{hasChildren && (labels as [string, string][])\n\t\t\t\t.filter(Boolean).map(([v, color]) => <span\n\t\t\t\t\tstyle={`color: ${color || '#000'}`}\n\t\t\t\t>\n\t\t\t\t\t{v}\n\t\t\t\t</span>)}\n\t\t</div>\n\t\t{hasChildren && opened && <div style=\"padding-left: 20px\">\n\t\t\t{children}\n\t\t</div>}\n\t\t{opened && hasChildren && <div>{'</'}{name}{'>'}</div>}\n\t</div>;\n}\nfunction *getList(\n\tlist: VTreeNode | VTreeNode[],\n\tkeys: {[key: number]: boolean},\n\toptions: Options,\n\tlabels: ([string, string] | undefined)[] = [],\n): Iterable<NeepNode> {\n\tif (Array.isArray(list)) {\n\t\tfor (const it of list) {\n\t\t\tyield* getList(it, keys, options, labels);\n\t\t}\n\t\treturn;\n\t}\n\tconst {\n\t\tid,\n\t\ttype,\n\t\ttag,\n\t\tchildren,\n\t\tprops,\n\t\tkey,\n\t\tlabel,\n\t\tvalue,\n\t\tvalueType,\n\t} = list;\n\tif (type === Type.standard || type === Type.native) {\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-weight: bold;\">{tag}</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (type === Type.tag) {\n\t\tif (!options.tag) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\ttag,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (type === Type.simple) {\n\t\tif (!options.simple) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"\n\t\t\t\tfont-style: italic;\n\t\t\t\tfont-weight: bold;\n\t\t\t\">{tag}</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (type === Type.placeholder) {\n\t\tif (!options.placeholder) { return; }\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">placeholder</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (type === Type.container) {\n\t\tif (!options.container) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">container</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (tag === Deliver) {\n\t\tif (!options.deliver) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">Deliver</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (tag === Template) {\n\t\tif (!options.template) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">Template</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (tag === ScopeSlot) {\n\t\tif (!options.scopeSlot) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">ScopeSlot</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (tag === SlotRender) {\n\t\tif (options.slotRender) {\n\n\t\t}\n\t\treturn;\n\t}\n\tif (tag === Value) {\n\t\tif (!options.tag) { return; }\n\t\tif (!options.value) { return; }\n\t\treturn yield createText(valueType, value);\n\t}\n}\nexport default create((props: any, {}, { encase }) => {\n\tconst keys = encase<{[key: number]: boolean}>({});\n\treturn () => <div style=\"padding-left: 20px;\">\n\t\t{[...getList(props.tree, keys, getOptions(props))]}\n\t</div>;\n});\n","import { Neep } from '../install';\nimport { getTree } from '../tree';\nimport App from '../app';\nimport { Devtools } from '../type';\nimport { RootExposed } from '@neep/core';\n\nlet creating = false;\nfunction create() {\n\tcreating = true;\n\ttry {\n\t\treturn Neep.render();\n\t} finally {\n\t\tcreating = false;\n\t}\n}\n\nconst devtools: Devtools = {\n\trenderHook(container) {\n\t\tif (creating) { return; }\n\t\tlet app: RootExposed | undefined;\n\t\tconst getData = () => {\n\t\t\tif (!app) { app = create(); }\n\t\t\tconst tree = [...getTree(container.content)];\n\t\t\tapp.$update(Neep.createElement(App, {\n\t\t\t\ttree,\n\t\t\t\tvalue: true,\n\t\t\t\ttag: true,\n\t\t\t\t// simple: true,\n\t\t\t\t// container: true,\n\t\t\t\t// template: true,\n\t\t\t\t// scopeSlot: true,\n\t\t\t\t// slotRender: true,\n\t\t\t\t// deliver: true,\n\t\t\t}));\n\t\t};\n\t\tNeep.setHook('drawnAll', getData, container.entity);\n\t\tNeep.setHook('mounted', () => {\n\t\t\tif (!app) { app = create(); }\n\t\t\tgetData();\n\t\t\tapp.$mount();\n\t\t}, container.entity);\n\t},\n};\n\nexport default devtools;\n","import devtools from './devtools';\n\nexport let Neep: typeof import('@neep/core');\nexport default function install(neep: typeof import('@neep/core')) {\n\tneep.install({ devtools });\n\tNeep = neep;\n}\n"],"names":["Type","getTree","tree","parent","Array","isArray","it","id","tag","props","children","key","component","label","exposed","$label","type","placeholder","name","nameSymbol","simple","isNative","typeSymbol","native","standard","content","nativeTree","Template","Deliver","ScopeSlot","SlotRender","special","Value","treeValue","value","valueType","node","String","RegExp","Date","toISOString","getOptions","container","template","scopeSlot","slotRender","deliver","createText","createTag","keys","labels","opened","hasChildren","Boolean","length","undefined","filter","map","v","color","getList","list","options","create","encase","creating","Neep","render","devtools","renderHook","app","getData","$update","createElement","App","setHook","entity","$mount","install","neep"],"mappings":"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"}