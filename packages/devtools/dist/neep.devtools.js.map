{"version":3,"file":"neep.devtools.js","sources":["../src/tree.ts","../src/app/Text.tsx","../src/app/index.tsx","../src/devtools/index.ts","../src/install.ts","../src/browser.ts"],"sourcesContent":["import {\n\tTemplate, ScopeSlot, SlotRender, Value,\n\tnameSymbol, typeSymbol, Deliver,\n} from '@neep/core';\nimport { MountedNode } from '../../core/src/render/draw';\nimport Container from '../../core/src/render/Container';\nimport Entity from '../../core/src/render/Entity';\nimport { Neep } from './install';\nexport enum Type {\n\ttag = 'tag',\n\tplaceholder = 'placeholder',\n\tstandard = 'standard',\n\tsimple = 'simple',\n\tnative = 'native',\n\tcontainer = 'container',\n\tspecial = 'special',\n}\nexport interface VTreeNode {\n\tid: number;\n\ttype: Type;\n\ttag: string;\n\t/** 子节点 */\n\tchildren: VTreeNode[];\n\tprops?: { [key: string]: any; };\n\t/** 列表对比 key */\n\tkey?: any;\n\t/** 标注 */\n\tlabel?: [string, string];\n\tparent: number;\n\tvalue?: string;\n\tisNative?: boolean;\n}\n\nexport function *getTree(\n\ttree: MountedNode | (MountedNode | MountedNode[])[],\n\tparent: number = 0,\n): Iterable<VTreeNode> {\n\tif (Array.isArray(tree)) {\n\t\tfor (const it of tree) {\n\t\t\tyield* getTree(it);\n\t\t}\n\t\treturn;\n\t}\n\tconst {\n\t\tid,\n\t\ttag,\n\t\tprops,\n\t\tchildren,\n\t\tkey,\n\t\tcomponent,\n\t\tlabel = component?.exposed?.$label,\n\t} = tree;\n\tif (!tag) {\n\t\treturn yield {\n\t\t\tid, parent,\n\t\t\ttype: Type.placeholder,\n\t\t\ttag: 'placeholder',\n\t\t\tchildren: [],\n\t\t};\n\t}\n\tif (typeof tag !== 'string') {\n\t\tconst name = tag[nameSymbol] || tag.name;\n\t\tif (!component) {\n\t\t\treturn yield {\n\t\t\t\tid, parent,\n\t\t\t\ttype: Type.simple,\n\t\t\t\ttag: name,\n\t\t\t\tchildren: [...getTree(children)],\n\t\t\t\tprops,\n\t\t\t\tkey,\n\t\t\t\tlabel,\n\t\t\t};\n\t\t}\n\t\tconst isNative = tag[typeSymbol] === 'native';\n\t\treturn yield {\n\t\t\tid, parent,\n\t\t\ttype: isNative ? Type.native : Type.standard,\n\t\t\ttag: name,\n\t\t\tchildren: [...getTree(\n\t\t\t\t'content' in component ? (component as Container).content\n\t\t\t\t\t: isNative ? (component as Entity).nativeTree : component.tree\n\t\t\t)],\n\t\t\tprops,\n\t\t\tkey,\n\t\t\tlabel,\n\t\t};\n\t}\n\tif (\n\t\ttag === Template || tag === Deliver\n\t\t|| tag === ScopeSlot || tag === SlotRender\n\t) {\n\t\treturn yield {\n\t\t\tid, parent,\n\t\t\ttype: Type.special,\n\t\t\ttag,\n\t\t\tchildren: [...getTree(children)],\n\t\t\tprops,\n\t\t\tkey,\n\t\t\tlabel,\n\t\t};\n\t}\n\tif (tag === Value) {\n\t\tconst treeValue = tree.value;\n\t\treturn yield {\n\t\t\tid, parent,\n\t\t\ttype: Type.special,\n\t\t\ttag,\n\t\t\tchildren: [],\n\t\t\tisNative: treeValue === tree.node,\n\t\t\tvalue: treeValue,\n\t\t\tprops,\n\t\t\tkey,\n\t\t\tlabel,\n\t\t};\n\t}\n\tyield {\n\t\tid, parent,\n\t\ttype: Type.tag,\n\t\ttag,\n\t\tchildren: [...getTree(children)],\n\t\tprops,\n\t\tkey,\n\t\tlabel,\n\t};\n\n}\n","import { createElement, NeepNode } from '@neep/core';\nimport { Neep } from '../install';\nimport { Template } from 'packages/core/core';\n\nexport function getValue(\n\tvalue: any,\n): NeepNode {\n\tconst type = typeof value;\n\tif (type === 'function') {\n\t\treturn <span style=\"font-weight: bold;\">[Function]</span>;\n\t}\n\tif (type === 'string') {\n\t\treturn <span>{value}</span>;\n\t}\n\tif (\n\t\ttype === 'bigint'\n\t\t|| type === 'boolean'\n\t\t|| type === 'number'\n\t\t|| type === 'symbol'\n\t\t|| type === 'undefined'\n\t\t|| value === null\n\t) {\n\t\treturn <span style=\"font-style: italic;\">{String(value)}</span>;\n\t} else if (value instanceof RegExp) {\n\t\treturn <span style=\"font-weight: bold;\">{String(value)}</span>;\n\t} else if (value instanceof Date) {\n\t\treturn <span style=\"font-weight: bold;\">{value.toISOString()}</span>;\n\t} else if (type === 'object') {\n\t\treturn <span style=\"font-style: italic;\">{String(value)}</span>;\n\t}\n\treturn null;\n}\n\nexport function TextNode(\n\t{ isNative, value }: { isNative?: boolean; value?: any },\n): NeepNode {\n\tif (isNative) {\n\t\treturn <span style=\"font-weight: bold;\">[Native]</span>;\n\t}\n\tconst isValue = Neep.isValue(value);\n\tconst data = isValue ? value() : value;\n\tif (!Neep.isValue(value)) {\n\t\treturn getValue(data);\n\t}\n\treturn <template>\n\t\t<span style=\"font-weight: bold;\">[Value:&nbsp;</span>\n\t\t{getValue(data)}\n\t\t<span style=\"font-weight: bold;\">&nbsp;]</span>\n\t</template>;\n}\n","import {\n\tcreate,\n\tcreateElement,\n\tNeepNode,\n\tTemplate,\n\tScopeSlot,\n\tSlotRender,\n\tValue,\n\tDeliver,\n} from '@neep/core';\nimport { VTreeNode, Type } from '../tree';\nimport { TextNode } from './Text';\n\ninterface Options {\n\tvalue?: boolean;\n\ttag?: boolean;\n\tplaceholder?: boolean;\n\tsimple?: boolean;\n\tcontainer?: boolean;\n\ttemplate?: boolean;\n\tscopeSlot?: boolean;\n\tslotRender?: boolean;\n\tdeliver?: boolean;\n}\nfunction getOptions({\n\tvalue = false,\n\ttag = false,\n\tplaceholder = false,\n\tsimple = false,\n\tcontainer = false,\n\ttemplate = false,\n\tscopeSlot = false,\n\tslotRender = false,\n\tdeliver = false,\n}: Options): Options {\n\treturn {\n\t\tvalue,\n\t\ttag,\n\t\tplaceholder,\n\t\tsimple,\n\t\tcontainer,\n\t\ttemplate,\n\t\tscopeSlot,\n\t\tslotRender,\n\t\tdeliver,\n\t};\n}\nfunction createTag(\n\tname: any,\n\tkeys: {[key: number]: boolean},\n\tid: number,\n\tkey: any,\n\tlabels: ([string, string] | undefined)[],\n\t...children: any[]\n): NeepNode {\n\tconst opened = keys[id];\n\tconst hasChildren = Boolean(children.length);\n\treturn <div key={id} style=\"\n\t\tposition: relative;\n\t\tmin-height: 20px;\n\t\tfont-size: 14px;\n\t\tline-height: 20px;\n\t\">\n\t\t{children.length && <div\n\t\t\tstyle=\"\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: -20px;\n\t\t\t\ttop: 0;\n\t\t\t\twidth: 20px;\n\t\t\t\theight: 20px;\n\t\t\t\ttext-align: center;\n\t\t\t\tcursor: pointer;\n\t\t\t\tbackground: #DDD;;\n\t\t\t\"\n\t\t\tonclick={() => keys[id] = !opened}\n\t\t>{opened ? '-' : '+'}</div> || undefined}\n\t\t<div>\n\t\t\t{'<'}{name}\n\t\t\t{ typeof key === 'string' ? ` key=\"${key}\"`\n\t\t\t: typeof key === 'number' ? ` key=${key}`\n\t\t\t: typeof key === 'boolean' ? ` key=${key}`\n\t\t\t: typeof key === 'bigint' ? ` key=${key}`\n\t\t\t: typeof key === 'symbol' ? ` key=${String(key)}`\n\t\t\t: key === null ? ` key=${key}`\n\t\t\t: key !== undefined && ` key={${String(key)}}`\n\t\t}\n\t\t\t{hasChildren ? '>' : ' />'}\n\t\t\t{hasChildren && !opened && <span>\n\t\t\t\t<span\n\t\t\t\t\tonclick={() => keys[id] = true}\n\t\t\t\t\tstyle=\"cursor: pointer;\"\n\t\t\t\t>...</span>\n\t\t\t\t{'</'}{name}{'>'}\n\t\t\t</span>}\n\t\t\t{hasChildren && (labels as [string, string][])\n\t\t\t\t.filter(Boolean).map(([v, color]) => <span\n\t\t\t\t\tstyle={`color: ${color || '#000'}`}\n\t\t\t\t>\n\t\t\t\t\t{v}\n\t\t\t\t</span>)}\n\t\t</div>\n\t\t{hasChildren && opened && <div style=\"padding-left: 20px\">\n\t\t\t{children}\n\t\t</div>}\n\t\t{opened && hasChildren && <div>{'</'}{name}{'>'}</div>}\n\t</div>;\n}\nfunction *getList(\n\tlist: VTreeNode | VTreeNode[],\n\tkeys: {[key: number]: boolean},\n\toptions: Options,\n\tlabels: ([string, string] | undefined)[] = [],\n): Iterable<NeepNode> {\n\tif (Array.isArray(list)) {\n\t\tfor (const it of list) {\n\t\t\tyield* getList(it, keys, options, labels);\n\t\t}\n\t\treturn;\n\t}\n\tconst {\n\t\tid,\n\t\ttype,\n\t\ttag,\n\t\tchildren,\n\t\tprops,\n\t\tkey,\n\t\tlabel,\n\t\tvalue,\n\t\tisNative,\n\t} = list;\n\tif (type === Type.standard || type === Type.native) {\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-weight: bold;\">{tag}</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (type === Type.tag) {\n\t\tif (!options.tag) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\ttag,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (type === Type.simple) {\n\t\tif (!options.simple) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"\n\t\t\t\tfont-style: italic;\n\t\t\t\tfont-weight: bold;\n\t\t\t\">{tag}</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (type === Type.placeholder) {\n\t\tif (!options.placeholder) { return; }\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">placeholder</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (type === Type.container) {\n\t\tif (!options.container) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">container</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (tag === Deliver) {\n\t\tif (!options.deliver) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">Deliver</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (tag === Template) {\n\t\tif (!options.template) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">Template</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (tag === ScopeSlot) {\n\t\tif (!options.scopeSlot) {\n\t\t\treturn yield* getList(children, keys, options, [label, ...labels]);\n\t\t}\n\t\treturn yield createTag(\n\t\t\t<span style=\"font-style: italic;\">ScopeSlot</span>,\n\t\t\tkeys, id, key, [label, ...labels],\n\t\t\t...getList(children, keys, options)\n\t\t);\n\t}\n\tif (tag === SlotRender) {\n\t\tif (options.slotRender) {\n\n\t\t}\n\t\treturn;\n\t}\n\tif (tag === Value) {\n\t\tif (!options.tag) { return; }\n\t\tif (!options.value) { return; }\n\t\treturn yield <TextNode isNative={isNative} value={value} />;\n\t}\n}\nexport default create((props: any, {}, { encase }) => {\n\tconst keys = encase<{[key: number]: boolean}>({});\n\treturn () => <div style=\"padding-left: 20px;\">\n\t\t{[...getList(props.tree, keys, getOptions(props))]}\n\t</div>;\n});\n","import { Neep } from '../install';\nimport { getTree } from '../tree';\nimport App from '../app';\nimport { Devtools } from '../type';\nimport { RootExposed } from '@neep/core';\n\nlet creating = false;\nfunction create() {\n\tcreating = true;\n\ttry {\n\t\treturn Neep.render();\n\t} finally {\n\t\tcreating = false;\n\t}\n}\n\nconst devtools: Devtools = {\n\trenderHook(container) {\n\t\tif (creating) { return; }\n\t\tlet app: RootExposed | undefined;\n\t\tconst getData = () => {\n\t\t\tif (!app) { app = create(); }\n\t\t\tconst tree = [...getTree(container.content)];\n\t\t\tapp.$update(Neep.createElement(App, {\n\t\t\t\ttree,\n\t\t\t\tvalue: true,\n\t\t\t\ttag: true,\n\t\t\t\t// simple: true,\n\t\t\t\t// container: true,\n\t\t\t\t// template: true,\n\t\t\t\t// scopeSlot: true,\n\t\t\t\t// slotRender: true,\n\t\t\t\t// deliver: true,\n\t\t\t}));\n\t\t};\n\t\tNeep.setHook('drawnAll', getData, container.entity);\n\t\tNeep.setHook('mounted', () => {\n\t\t\tif (!app) { app = create(); }\n\t\t\tgetData();\n\t\t\tapp.$mount();\n\t\t}, container.entity);\n\t},\n};\n\nexport default devtools;\n","import devtools from './devtools';\n\nexport let Neep: typeof import('@neep/core');\nexport default function install(neep: typeof import('@neep/core')) {\n\tneep.install({ devtools });\n\tNeep = neep;\n}\n","import * as Neep from '@neep/core';\nimport { install } from '.';\n\ninstall(Neep);\nexport * from '.';\n"],"names":["Type","getTree","tree","parent","Array","isArray","it","id","tag","props","children","key","component","label","exposed","$label","type","placeholder","name","nameSymbol","simple","isNative","typeSymbol","native","standard","content","nativeTree","Template","Deliver","ScopeSlot","SlotRender","special","Value","treeValue","value","node","getValue","createElement","String","RegExp","Date","toISOString","TextNode","isValue","Neep","data","getOptions","container","template","scopeSlot","slotRender","deliver","createTag","keys","labels","opened","hasChildren","Boolean","length","undefined","filter","map","v","color","getList","list","options","create","encase","creating","render","devtools","renderHook","app","getData","$update","App","setHook","entity","$mount","install","neep"],"mappings":"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"}