{"version":3,"file":"neep.core.esm.js","sources":["../src/constant.ts","../src/EventEmitter.ts","../src/Error.ts","../src/install.ts","../src/register.ts","../src/auxiliary/tags.ts","../src/helper/current.ts","../src/helper/context.ts","../src/hook.ts","../src/auxiliary/life.ts","../src/symbols.ts","../src/auxiliary/element.ts","../src/helper/label.ts","../src/auxiliary/dev.ts","../src/auxiliary/index.ts","../src/render/id.ts","../src/render/recursive.ts","../src/render/draw.ts","../src/render/slot.ts","../src/render/props.ts","../src/render/normalize.ts","../src/render/refresh.ts","../src/render/Object.ts","../src/render/Entity.ts","../src/render/convert.ts","../src/render/Container.ts","../src/render/index.ts","../src/create.ts"],"sourcesContent":["/**\n * Global constant\n *\n * Will be replaced by the 'rollup-plugin-replace' plug-in\n */\n\n /**\n * Neep code version\n */\nexport const version = '__VERSION__' as string;\n/**\n * Current mode\n * @enum production\n * @enum development\n */\nexport const mode = '__MODE__' as any as 'production' | 'development';\n/**\n * Is the current mode production mode\n * @description Support tree shaking\n */\nexport const isProduction = mode === 'production';\n","import { monitorable } from './install';\nimport { Emit, On } from './type';\n\nfunction getEventName(k: string): string {\n\tif (k[0] === '@') { return k.substr(1); }\n\tif (/^on[:-]/.test(k)) { return k.substr(3); }\n\treturn '';\n}\ninterface AddEvent<T extends Record<string, any[]>> {\n\t<N extends keyof T>(\n\t\tentName: N,\n\t\tlistener: (...p: T[N]) => void,\n\t): void\n}\n\nexport default class EventEmitter<\n\tT extends Record<string, any[]> = Record<string, any[]>\n> {\n\tstatic update<T extends Record<string, any[]>>(\n\t\temitter: EventEmitter<T>,\n\t\tevents: any,\n\t): (() => void)[] {\n\t\tif (!events) { return []; }\n\t\tconst newHandles: (() => void)[] = [];\n\t\tif (events && typeof events === 'object') {\n\t\t\tfor (const n of Object.keys(events)) {\n\t\t\t\tif (!n) { continue; }\n\t\t\t\tconst fn = events[n];\n\t\t\t\tif (typeof fn !== 'function') { continue; }\n\t\t\t\tnewHandles.push(emitter.on(n, fn));\n\t\t\t}\n\t\t}\n\t\treturn newHandles;\n\t}\n\tstatic updateInProps<T extends Record<string, any[]>>(\n\t\temitter: EventEmitter<T>,\n\t\tprops: any,\n\t\tcustom?: (addEvent: AddEvent<T>) => void,\n\t): (() => void)[] {\n\t\tif (!props) { return []; }\n\t\n\t\tconst newHandles: (() => void)[] = [];\n\n\t\tfunction addEvent<N extends keyof T>(\n\t\t\tentName: N,\n\t\t\tlistener: (...p: T[N]) => void,\n\t\t): void {\n\t\t\tnewHandles.push(emitter.on(entName, listener));\n\t\t}\n\t\tfor (const k of Object.keys(props)) {\n\t\t\tconst fn = props[k];\n\t\t\tif (typeof fn !== 'function') { continue; }\n\t\t\tconst entName = getEventName(k);\n\t\t\tif (!entName) { continue; }\n\t\t\taddEvent(entName, fn);\n\t\t}\n\t\tconst event = props['@'];\n\t\tif (event && typeof event === 'object') {\n\t\t\tfor (const k of Object.keys(event)) {\n\t\t\t\tconst f = event[k];\n\t\t\t\tif (typeof f !== 'function') { continue; }\n\t\t\t\taddEvent(k, f);\n\t\t\t}\n\t\t} if (typeof event === 'function') {\n\t\t\tconst { names } = event as Emit;\n\t\t\tif (Array.isArray(names)) {\n\t\t\t\tfor (const n of names) {\n\t\t\t\t\tif (!n) { continue; }\n\t\t\t\t\taddEvent(n, (...p) => event(n, ...p));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (typeof custom === 'function') {\n\t\t\tcustom(addEvent);\n\t\t}\n\t\tnewHandles.push(...EventEmitter.update(emitter, props['@']));\n\t\treturn newHandles;\n\t}\n\n\tprivate _names: (keyof T)[] = [];\n\tprivate readonly _cancelHandles = new Set<() => void>();\n\tget names(): (keyof T)[] {\n\t\treturn this._names;\n\t}\n\treadonly emit: Emit<T>;\n\treadonly on: On<T>;\n\tconstructor() {\n\t\tconst events: Record<keyof T, Set<Function>> = Object.create(null);\n\t\tconst names = this._names;\n\t\tfunction emit<N extends keyof T>(name: N, ...p: T[N]): void {\n\t\t\tconst event = events[name];\n\t\t\tif (!event) { return; }\n\t\t\tfor (const fn of [...event]) { \n\t\t\t\tfn(...p);\n\t\t\t}\n\t\t}\n\t\temit.names = names;\n\t\tReflect.defineProperty(emit, 'names', {\n\t\t\tget:() => {\n\t\t\t\tmonitorable.markRead(emit, 'names');\n\t\t\t\treturn this._names;\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t});\n\t\tconst on: On<T> = (name, listener) => {\n\t\t\tconst fn = monitorable.safeify(listener);\n\t\t\tlet event = events[name];\n\t\t\tif (!event) {\n\t\t\t\tevent = new Set();\n\t\t\t\tevents[name] = event;\n\t\t\t\tmonitorable.markChange(emit, 'names');\n\t\t\t\tthis._names = [...this._names, name];\n\t\t\t}\n\t\t\tevent.add(fn);\n\t\t\tlet removed = false;\n\t\t\treturn () => {\n\t\t\t\tif (removed) { return; }\n\t\t\t\tremoved = true;\n\t\t\t\tevent.delete(fn);\n\t\t\t\tif (event.size) { return; }\n\t\t\t\tmonitorable.markChange(emit, 'names');\n\t\t\t\tthis._names = this._names.filter(n => n !== name);\n\t\t\t};\n\t\t};\n\t\tthis.emit = emit;\n\t\tthis.on = on;\n\t}\n\tupdateHandles(newHandles: (() => void)[]): (() => void)[] {\n\t\tconst eventCancelHandles = this._cancelHandles;\n\t\tconst oldHandles = [...eventCancelHandles];\n\t\teventCancelHandles.clear();\n\t\tfor (const fn of oldHandles) { fn(); }\n\t\tnewHandles.forEach(f => eventCancelHandles.add(f));\n\t\treturn newHandles;\n\t}\n\tupdate(list: any): (() => void)[] {\n\t\tconst handles = EventEmitter.update(this, list);\n\t\treturn this.updateHandles(handles);\n\t}\n\tupdateInProps(\n\t\tlist: any,\n\t\tcustom?: (addEvent: AddEvent<T>) => void,\n\t): (() => void)[] {\n\t\tconst handles = EventEmitter.updateInProps(this, list, custom);\n\t\treturn this.updateHandles(handles);\n\t}\n}\n","export default class NeepError extends Error {\n\treadonly tag: string;\n\tconstructor(message: string, tag: string = '') {\n\t\tsuper(tag ? `[${tag}] ${message}` : message);\n\t\tthis.tag = tag;\n\t}\n}\nexport function assert(v: any, message: string, tag?: string) {\n\tif (v) { return; }\n\tthrow new NeepError(message, tag);\n}\n","import * as monitorableApi from 'monitorable';\nimport { IRender } from './type';\nimport { isProduction } from './constant';\nimport EventEmitter from './EventEmitter';\nimport NeepError, { assert } from './Error';\n\nimport { Devtools } from '../../devtools/src/type';\n\nexport let monitorable: typeof monitorableApi;\n\nexport let value: typeof monitorableApi.value;\nexport let computed: typeof monitorableApi.computed;\nexport let isValue: typeof monitorableApi.isValue;\nexport let encase: typeof monitorableApi.encase;\nexport let recover: typeof monitorableApi.recover;\n\nfunction installMonitorable(api?: typeof monitorableApi) {\n\tif (!api) { return; }\n\tmonitorable = api;\n\tvalue = monitorable.value;\n\tcomputed = monitorable.computed;\n\tisValue = monitorable.isValue;\n\tencase = monitorable.encase;\n\trecover = monitorable.recover;\n}\n\nexport interface InstallOptions {\n\tmonitorable?: typeof monitorableApi;\n\trender?: IRender;\n\trenders?: IRender[];\n\tdevtools?: any;\n}\n\n\nlet nextFrameApi: undefined | ((fn: () => void) => void);\nexport function nextFrame(fn: () => void): void {\n\tassert(nextFrameApi, 'The basic renderer is not installed', 'install');\n\tnextFrameApi!(fn);\n}\n\nexport const renders: Record<string, IRender>\n\t= Object.create(null);\n\nexport function getRender(\n\ttype: string | number | IRender = ''\n\t): IRender {\n\tif (typeof type === 'object') { return type; }\n\treturn renders[type] || renders.default;\n}\n\nfunction addRender(render?: IRender): void {\n\tif (!render) { return; }\n\tif (render.install) {\n\t\trender.install({\n\t\t\tget isValue() { return isValue; },\n\t\t\tEventEmitter,\n\t\t\tError: NeepError,\n\t\t});\n\t}\n\trenders[render.type] = render;\n\tif (nextFrameApi) { return; }\n\tif (!renders.default) {\n\t\trenders.default = render;\n\t}\n\tif (!nextFrameApi && render.nextFrame) {\n\t\trenders.default = render;\n\t\tnextFrameApi = render.nextFrame;\n\t}\n\n}\nfunction installRender({ render, renders}: InstallOptions) {\n\taddRender(render);\n\tif (!Array.isArray(renders)) { return; }\n\tfor (const render of renders) {\n\t\taddRender(render);\n\t}\n}\n\n\nexport const devtools: Devtools = {\n\trenderHook(){},\n};\n\nfunction installDevtools(tools?: Partial<Devtools>) {\n\tif (!tools) { return; }\n\tif (typeof tools !== 'object') { return; }\n\tconst { renderHook } = tools;\n\tif (typeof renderHook === 'function') {\n\t\tdevtools.renderHook = renderHook;\n\t}\n}\n\n\nexport default function install(apis: InstallOptions) {\n\tinstallMonitorable(apis.monitorable);\n\tinstallRender(apis);\n\tif (!isProduction) {\n\t\tinstallDevtools(apis.devtools);\n\t}\n}\n","import { Component } from './type';\n\nexport const components: Record<string, Component> = Object.create(null);\n\nexport function register(name: string, component: Component) {\n\tcomponents[name] = component;\n}\n","export const ScopeSlot = 'Neep:ScopeSlot';\nexport const SlotRender = 'Neep:SlotRender';\nexport const Slot = 'Neep:Slot';\nexport const Value = 'Neep:Value';\nexport const Container = 'Neep:Container';\nexport const Deliver = 'Neep:Deliver';\nexport const Template = 'template';\nexport const Fragment = Template;\n","import NeepError from '../Error';\nimport { Entity } from '../type';\n\n/** 当前正在执行的对象 */\nexport let current: Entity | undefined;\nexport function setCurrent<T>(\n\tfn: () => T,\n\tentity: Entity,\n): T {\n\tconst oldEntity = current;\n\tcurrent = entity;\n\ttry {\n\t\tcurrent.$_valueIndex = 0;\n\t\tconst ret = fn();\n\t\tif (current.$_valueIndex !== current.$_values.length) {\n\t\t\tthrow new NeepError(\n\t\t\t\t'Inconsistent number of useValue executions',\n\t\t\t\t'life',\n\t\t\t);\n\t\t}\n\t\treturn ret;\n\t} finally {\n\t\tcurrent = oldEntity;\n\t}\n}\n\nexport function checkCurrent(\n\tname: string,\n\tinitOnly = false,\n): Entity {\n\tif (!current) {\n\t\tthrow new NeepError(\n\t\t\t`Function \\`${name}\\` can only be called within a cycle.`,\n\t\t\t'life',\n\t\t);\n\t}\n\tif (!initOnly) {\n\t\treturn current;\n\t}\n\tif (!current.created) {\n\t\treturn current;\n\t}\n\tthrow new NeepError(\n\t\t`Function \\`${name}\\` can only be called at initialization time.`,\n\t\t'life',\n\t);\n}\n","import { Context, ContextConstructor, Exposed } from '../type';\nimport { monitorable } from '../install';\n\nconst constructors: ContextConstructor[] = [];\nexport function initContext(\n\tcontext: Context,\n\texposed?: Exposed,\n): Context {\n\tfor (const constructor of constructors) {\n\t\tconstructor(context, exposed);\n\t}\n\treturn context;\n}\nexport function addContextConstructor(\n\tconstructor: ContextConstructor\n): void {\n\tconstructors.push(monitorable.safeify(constructor));\n}\n","import { monitorable } from './install';\nimport { Hook, Hooks, Entity } from './type';\nconst hooks: Record<string, Set<Hook>> = Object.create(null);\n\nexport function setHook<H extends Hooks>(\n\tid: H,\n\thook: Hook,\n\tentity?: Entity,\n):() => void;\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: Entity,\n): () => void;\n\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: Entity,\n):() => void {\n\tlet list = entity?.$_hooks || hooks;\n\tif (!list) { return () => {}; }\n\thook = monitorable.safeify(hook);\n\tlet set = list[id];\n\tif (!set) {\n\t\tset = new Set();\n\t\tlist[id] = set;\n\t}\n\tset.add(hook);\n\treturn () => set.delete(hook);\n}\n\nexport function callHook<H extends Hooks>(\n\tid: H,\n\texposed: Entity,\n): void;\nexport function callHook(id: string, exposed: Entity): void;\nexport function callHook(id: string, exposed: Entity): void {\n\tif (!exposed) { return; }\n\tfor (const hook of exposed.$_hooks[id] || []) {\n\t\thook(exposed);\n\t}\n\tfor (const hook of hooks[id] || []) {\n\t\thook(exposed);\n\t}\n}\n","/**********************************\n * 组件上下文环境专用 API\n * @description 简单组件不支持\n **********************************/\nimport { Value, WatchCallback } from 'monitorable';\nimport { Hooks } from '../type';\nimport { checkCurrent } from '../helper';\nimport NeepError from '../Error';\nimport { setHook } from '../hook';\nimport { isValue, value, computed } from './state';\n\n\n/**********************************\n * 状态管理类 API\n **********************************/\n/**\n * 监听指定值的变化\n * @description 本质是调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 被监听的值\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: Value<T>,\n\tcb: WatchCallback<T>,\n): () => void;\n/**\n * 监听指定值的变化\n * @description 本质是创建调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 用于计算观测值的函数\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: () => T,\n\tcb: (v: T, stopped: boolean) => void,\n): () => void;\n\nexport function watch<T>(\n\tvalue: Value<T> | (() => T),\n\tcb: (v: Value<T> | T, stopped: boolean) => void\n): () => void {\n\tconst entity = checkCurrent('watch');\n\tif (typeof value !== 'function') { return () => {}; }\n\tconst stop = isValue(value)\n\t\t? value.watch(cb)\n\t\t: computed(value).watch((v, s) => cb(v(), s));\n\tsetHook('beforeDestroy', () => stop(), entity);\n\treturn stop;\n}\n\nexport function useValue(): Value<any>;\nexport function useValue<T>(fn: () => T, name?: string): T;\nexport function useValue<T>(fn?: () => T, name?: string): T | Value<any>;\nexport function useValue<T>(fn?: () => T, name = 'useValue'): T | Value<any> {\n\tconst entity = checkCurrent(name);\n\tconst index = entity.$_valueIndex++;\n\tconst values = entity.$_values;\n\tif (!entity.created) {\n\t\tvalues[index] = undefined;\n\t\tconst v = typeof fn === 'function' ? fn() : value(undefined);\n\t\treturn values[index] = v;\n\t}\n\tif (index >= values.length) {\n\t\tthrow new NeepError(\n\t\t\t'Inconsistent number of useValue executions',\n\t\t\t'life',\n\t\t);\n\t}\n\treturn values[index];\n\n}\n\n/**********************************\n * 钩子类 API\n **********************************/\n/**\n * 为当前组件注册钩子\n * @param name 钩子名称\n * @param hook 钩子\n * @param initOnly 是否仅在初始化时有效\n */\nexport function hook<H extends Hooks>(\n\tname: H,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: () => void,\n\tinitOnly?: boolean,\n): undefined | (() => void) {\n\tconst entity = checkCurrent('setHook');\n\tif (initOnly && entity.created) { return undefined; }\n\treturn setHook(name, () => hook(), entity);\n}\n\n/**********************************\n * 配置 API\n **********************************/\n\nexport function setValue<T>(\n\tobj: any,\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tif (\n\t\ttypeof name === 'string'\n\t\t&& ['$', '_'].includes(name[0])\n\t) {\n\t\treturn;\n\t}\n\tif (isValue(value) && opt) {\n\t\tReflect.defineProperty(obj, name, {\n\t\t\tget() { return value(); },\n\t\t\tset(v) { value(v); },\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t});\n\t\treturn;\n\t}\n\tif (typeof value === 'function' && opt) {\n\t\tReflect.defineProperty(obj, name, {\n\t\t\tget: value as () => T,\n\t\t\tset: typeof opt === 'function' ? opt : undefined,\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t});\n\t\treturn;\n\t}\n\tReflect.defineProperty(obj, name, {\n\t\tget() { return value; },\n\t\tconfigurable: true,\n\t\tenumerable: true,\n\t});\n}\n\n\n/**\n * 将 Value 导出\n * @param name 导出用的名称\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: Value<T>,\n\tmix?: boolean,\n): void;\n/**\n * 将普通值导出\n * @param name\n * @param value\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: T,\n): void;\n/**\n * 设置基于 getter 的导出\n * @param name\n * @param getter\n * @param nonModifiable\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tnonModifiable: true,\n): void;\n/**\n * 设置基于 getter/setter 的导出\n * @param name\n * @param getter\n * @param setter\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tsetter: (value: T) => void,\n): void;\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tsetValue(checkCurrent('expose', true).exposed, name, value, opt);\n}\n\n\n/**\n * 将 Value 传递给子组件\n * @param name 导出用的名称\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: Value<T>,\n\tmix?: boolean,\n): void;\n/**\n * 将普通值导出\n * @param name\n * @param value\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: T,\n): void;\n/**\n * 设置基于 getter 的传递\n * @param name\n * @param getter\n * @param nonModifiable\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tnonModifiable: true,\n): void;\n/**\n * 设置基于 getter/setter 的传递\n * @param name\n * @param getter\n * @param setter\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tsetter: (value: T) => void,\n): void;\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tsetValue(checkCurrent('deliver', true).delivered, name, value, opt);\n}\n","export const isElementSymbol = Symbol.for('isNeepElement');\nexport const typeSymbol = Symbol.for('type');\nexport const nameSymbol = Symbol.for('name');\nexport const renderSymbol = Symbol.for('render');\nexport const componentsSymbol = Symbol.for('components');\nexport const configSymbol = Symbol.for('config');\n","import { Tag, NeepElement, Component } from '../type';\nimport { isElementSymbol, typeSymbol } from '../symbols';\nimport * as Tags from './tags';\n\n/**\n * 判读是否为元素\n */\nexport function isElement(v: any): v is NeepElement {\n\tif (!v) { return false; }\n\tif (typeof v !== 'object') { return false; }\n\treturn v[isElementSymbol] === true;\n}\n\nexport function createElement(\n\ttag: Tag,\n\tattrs?: {[key:string]: any},\n\t...children: any[]\n): NeepElement {\n\tattrs = attrs ? {...attrs} : {};\n\tconst node: NeepElement = {\n\t\t[isElementSymbol]: true,\n\t\ttag,\n\t\tchildren: [],\n\t};\n\tif ('key' in attrs) { node.key = attrs.key; }\n\tif ('slot' in attrs) { node.slot = attrs.slot; }\n\tif (typeof attrs.ref === 'function') { node.ref = attrs.ref; }\n\tif (tag === Tags.Value) {\n\t\tnode.value = attrs.value;\n\t\treturn node;\n\t}\n\tnode.children = children;\n\tif (tag === Tags.Template) { return node; }\n\tif (tag === Tags.SlotRender) {\n\t\tnode.render = attrs.render;\n\t\treturn node;\n\t}\n\tif (tag === Tags.ScopeSlot || tag === Tags.Slot) {\n\t\tconst { render, argv, args, name } = attrs;\n\t\tnode.render = render;\n\t\tnode.args = argv && [argv]\n\t\t\t|| Array.isArray(args) && args.length && args\n\t\t\t|| [{}];\n\n\t\tif (tag === Tags.ScopeSlot) {\n\t\t\tnode.props = { name };\n\t\t\treturn node;\n\t\t}\n\t}\n\tnode.props = {};\n\tfor (let k in attrs) {\n\t\t// TODO: data\n\t\tconst nCmd = /^n([:-])([a-zA-Z0-9]+(?:\\.[a-zA-Z0-9]+)*)$/i.exec(k);\n\t\t/** 普通属性 */\n\t\tif (!nCmd) {\n\t\t\tnode.props[k] = attrs[k];\n\t\t\tcontinue;\n\t\t}\n\t}\n\treturn node;\n}\n\nexport interface elementIteratorOptions {\n\tsimple?: boolean | Component[] | ((c: Component) => boolean);\n}\n\nexport function elements(\n\tnode: any,\n\topt: elementIteratorOptions = {},\n): any[] {\n\tif (Array.isArray(node)) {\n\t\tconst list: any[][] = [];\n\t\tfor (let n of node) {\n\t\t\tlist.push(elements(n, opt));\n\t\t}\n\t\treturn ([] as any[]).concat(...list);\n\t}\n\tif (!isElement(node)) { return [node]; }\n\tlet { tag } = node;\n\tif (!tag) { return []; }\n\n\tif (([Tags.Template, Tags.ScopeSlot] as Tag[]).includes(tag)) {\n\t\treturn elements(node.children, opt);\n\t}\n\tif (typeof tag !== 'function') { return [node]; }\n\tif (tag[typeSymbol] !== 'simple') { return [node]; }\n\tconst { simple } = opt;\n\tif (!simple) { return [node]; }\n\tif (Array.isArray(simple)) {\n\t\tif (simple.includes(tag)) { return [node]; }\n\t} else if (typeof simple === 'function') {\n\t\tif (!simple(tag)) { return [node]; }\n\t}\n\treturn elements(node.children, opt);\n}\n","let label: [string, string] | undefined;\nexport function setLabel(l: [string, string]) {\n\tlabel = l;\n}\n\nexport function getLabel() {\n\tconst l = label;\n\tlabel = undefined;\n\treturn l;\n}\n","import { isProduction } from '../constant';\nimport { current } from '../helper';\nimport { setLabel } from '../helper/label';\n\nexport function label(text: string, color = ''): void {\n\tif (!isProduction) {\n\t\tif (!current) {\n\t\t\tsetLabel([text, color]);\n\t\t\treturn;\n\t\t}\n\t\tReflect.defineProperty(current.exposed, '$label', {\n\t\t\tvalue: [text, color],\n\t\t\tconfigurable: true,\n\t\t});\n\t}\n}\n","import * as Constant from '../constant';\nimport * as Tags from './tags';\nimport * as State from './state';\nimport * as Life from './life';\nimport * as Element from './element';\nimport * as Dev from './dev';\n\nexport * from './tags';\nexport * from './state';\nexport * from './life';\nexport * from './element';\nexport * from './dev';\n\nexport { Tags };\n\n/** 辅助 */\nexport interface Auxiliary extends\n\tReadonly<typeof Tags>,\n\tReadonly<typeof State>,\n\tReadonly<typeof Life>,\n\tReadonly<typeof Element>,\n\tReadonly<typeof Dev>,\n\tReadonly<typeof Constant>\n{}\n\nconst auxiliary: Auxiliary = {\n\t...Tags,\n\t...Life,\n\t...Element,\n\t...Dev,\n\t...Constant,\n\tget value() { return State.value; },\n\tget computed() { return State.computed; },\n\tget isValue() { return State.isValue; },\n\tget encase() { return State.encase; },\n\tget recover() { return State.recover; },\n};\n\nexport function setAuxiliary<T>(\n\tname: string,\n\tvalue: T,\n): void {\n\tReflect.defineProperty(auxiliary, name, {\n\t\tvalue,\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n}\nexport function defineAuxiliary<T>(\n\tname: string,\n\tget: (this: Auxiliary) => T,\n): void {\n\tReflect.defineProperty(auxiliary, name, {\n\t\tget,\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n}\nexport default auxiliary;\n","import { NativeNode } from '../type';\nimport { isProduction } from '../constant';\nimport { MountedNode } from './draw';\n\nlet ids = 0;\nconst Nodes: {[key: number]: MountedNode} = {};\nlet IdMap: undefined | Map<NativeNode, number>;\nif (!isProduction) {\n\tIdMap = new Map();\n}\nexport function createMountedNode(\n\tn: Omit<MountedNode, 'id'>,\n\tid?: number,\n): MountedNode {\n\tif (!isProduction) {\n\t\tid = id || ++ids;\n\t\tconst { node } = n;\n\t\tif (node && IdMap) { IdMap.set(node, id); }\n\t\treturn Nodes[id] = {...n, id};\n\t}\n\treturn {...n, id: 0};\n}\n\nexport function recoveryMountedNode(node: MountedNode): void {\n\tif (!isProduction) {\n\t\tdelete Nodes[node.id];\n\t}\n}\n\nexport function getNode(\n\tid: number | NativeNode,\n): MountedNode | undefined {\n\tif (!isProduction) {\n\t\tif (typeof id !== 'number') {\n\t\t\tid = IdMap?.get(id) || -1;\n\t\t}\n\t\treturn Nodes[id];\n\t}\n\treturn undefined;\n}\n","export interface RecursiveArray<T> extends Array<RecursiveItem<T>>{};\nexport type RecursiveItem<T> = T | RecursiveArray<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield* recursive2iterable(it);\n\t}\n}\n","import { Tags, Template, isValue } from '../auxiliary';\nimport { IRender, NativeNode, NativeElement, Exposed, Ref } from '../type';\nimport { createMountedNode, recoveryMountedNode } from './id';\nimport { TreeNode } from './convert';\n\n/**\n * @description node / component / children 至少一个有效\n */\nexport interface MountedNode extends TreeNode {\n\tid: number;\n\tparent?: this;\n\tnode: undefined | NativeNode;\n}\n\nlet refList: (() => void)[] | undefined;\nexport function setRefList(list?: (() => void)[]) {\n\trefList = list;\n}\nfunction setRef(\n\tref?: Ref,\n\tnode?: Exposed | NativeNode,\n\tisRemove?: boolean,\n) {\n\tif (typeof ref !== 'function') { return; }\n\tif (!node) { return; }\n\tif (!refList) {\n\t\tref(node, isRemove);\n\t} else {\n\t\trefList.push(() => ref(node, isRemove));\n\t}\n}\n\ntype MountedNodes = MountedNode | MountedNode[]\n\t| (MountedNode | MountedNode[])[];\n\nfunction getLastNode(tree: MountedNodes): NativeNode {\n\tif (Array.isArray(tree)) {\n\t\treturn getLastNode(tree[tree.length - 1]);\n\t}\n\tconst { component, children, node } = tree;\n\tif (node) { return node; }\n\tif (component) { return getLastNode(component.tree); }\n\treturn getLastNode(children);\n}\n\nfunction getFirstNode(tree: MountedNodes): NativeNode {\n\tif (Array.isArray(tree)) { return getFirstNode(tree[0]); }\n\tconst { component, children, node } = tree;\n\tif (node) { return node; }\n\tif (component) { return getFirstNode(component.tree); }\n\treturn getFirstNode(children[0]);\n}\n\nexport function *getNodes(tree: MountedNodes): Iterable<NativeNode> {\n\tif (Array.isArray(tree)) {\n\t\tfor (const it of tree) {\n\t\t\tyield* getNodes(it);\n\t\t}\n\t\treturn;\n\t}\n\tconst { children, node, component } = tree;\n\tif (node) {\n\t\tyield node;\n\t\treturn;\n\t}\n\tif (component) {\n\t\tyield* getNodes(component.tree);\n\t\treturn;\n\t}\n\tyield* getNodes(children);\n}\n\nexport function unmount(iRender: IRender, tree: MountedNodes): void {\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(e => unmount(iRender, e));\n\t\treturn;\n\t}\n\tconst { component, children, node, ref } = tree;\n\trecoveryMountedNode(tree);\n\tif (node) {\n\t\tsetRef(ref, node, true);\n\t\tiRender.remove(node);\n\t\treturn;\n\t}\n\tif (component) {\n\t\tsetRef(ref, component.exposed, true);\n\t\tcomponent.unmount();\n\t\treturn;\n\t}\n\tunmount(iRender, children);\n}\n\n\nfunction replace<T extends MountedNode | MountedNode[]>(\n\tiRender: IRender,\n\tnewTree: T,\n\toldTree: MountedNode | MountedNode[],\n): T {\n\tconst next = getFirstNode(oldTree);\n\tif (!next) { return newTree; }\n\tconst parent = iRender.parent(next);\n\tif (!parent) { return newTree; }\n\tfor (const it of getNodes(newTree)) {\n\t\tiRender.insert(parent, it, next);\n\t}\n\tunmount(iRender, oldTree);\n\treturn newTree;\n}\n\nfunction updateList(\n\tiRender: IRender,\n\tsource: TreeNode[],\n\ttree: MountedNode | MountedNode[],\n): MountedNode[] {\n\tif (!source.length) {\n\t\tconst node = createItem(iRender, {tag: null, children: []});\n\t\treturn [replace(iRender, node, tree)];\n\t}\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: MountedNode[] = [];\n\tconst list = [...tree];\n\tconst mountedMap = new Map<MountedNode, MountedNode>();\n\tfor (const src of source) {\n\t\tconst index = list.findIndex(it =>\n\t\t\tit.tag === src.tag && it.key === src.key\n\t\t);\n\t\tif (index >= 0) {\n\t\t\tconst old = list[index];\n\t\t\tconst item = updateItem(iRender, src, old);\n\t\t\tmountedMap.set(old, item);\n\t\t\tnewList.push(item);\n\t\t\tlist.splice(index, 1);\n\t\t} else {\n\t\t\tconst item = createItem(iRender, src);\n\t\t\tnewList.push(item);\n\t\t}\n\t}\n\tif (!mountedMap.size) {\n\t\treturn replace(iRender, newList, list);\n\t}\n\tunmount(iRender, list);\n\ttree = tree.filter(t => mountedMap.has(t));\n\tconst last = getLastNode(tree[tree.length - 1]);\n\tconst parent = iRender.parent(last);\n\tif (!parent) { return newList; }\n\tlet next = iRender.next(last);\n\t// 调整次序\n\tfor(let i = newList.length - 1; i >= 0; i--) {\n\t\tconst item = newList[i];\n\t\tconst index = tree.findIndex(o => mountedMap.get(o) === item);\n\t\tif (index >= 0) {\n\t\t\tfor (const it of tree.splice(index)) {\n\t\t\t\tmountedMap.delete(it);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\tiRender.insert(parent, it, next);\n\t\t\t}\n\t\t}\n\t\tnext = getFirstNode(item) || next;\n\t}\n\treturn newList;\n}\n/**\n * 更新树\n * @param tree 已有树\n * @param source 用于替换的源\n * @param iRender Neep 对象\n */\nfunction updateAll(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n\ttree: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tlet index = 0;\n\tlet length = Math.min(source.length, source.length || 1);\n\tconst list: (MountedNode | MountedNode[])[] = [];\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tlist.push(updateList(iRender, src, tree[index]));\n\t\t} else {\n\t\t\tlist.push(updateItem(iRender, src, tree[index]));\n\t\t}\n\t}\n\tlength = Math.max(source.length, tree.length);\n\tif (tree.length > length) {\n\t\t\t// 销毁多余项\n\t\t\tfor (; index < length; index++) {\n\t\t\tunmount(iRender, tree[index]);\n\t\t}\n\t}\n\tif (source.length > length) {\n\t\t// 创建多余项\n\t\tconst last = getLastNode(list[list.length - 1]);\n\t\tconst parent = iRender.parent(last);\n\t\tconst next = iRender.next(last);\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = source[index];\n\t\t\tconst item = Array.isArray(src)\n\t\t\t\t? createList(iRender, src)\n\t\t\t\t: createItem(iRender, src);\n\t\t\tlist.push(item);\n\t\t\tif (!parent) { continue; }\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\tiRender.insert(parent, it, next);\n\t\t\t}\n\t\t}\n\t}\n\treturn list;\n}\n\n/**\n * 更新树节点\n * @param iRender Neep 对象\n * @param tree 已有树\n * @param source 用于替换的源\n */\nfunction updateItem(\n\tiRender: IRender,\n\tsource: TreeNode,\n\ttree: MountedNode | MountedNode[],\n): MountedNode {\n\tif (Array.isArray(tree)) {\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === source.tag && it.component === source.component\n\t\t);\n\t\tif (index < 0) {\n\t\t\treturn replace(iRender, createItem(iRender, source), tree);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tunmount(iRender, all);\n\t}\n\tconst { tag, component } = source;\n\tconst ref = source.ref !== tree.ref && source.ref || undefined;\n\tif (tag !== tree.tag || component !== tree.component) {\n\t\treturn replace(iRender, createItem(iRender, source), tree);\n\t}\n\tif (!tag) { return tree; }\n\tif (typeof tag !== 'string' || tag === Tags.Container) {\n\t\tif (!component) {\n\t\t\t// TODO: ref\n\t\t\treturn createMountedNode({\n\t\t\t\t...source,\n\t\t\t\tnode: undefined,\n\t\t\t\tcomponent: undefined,\n\t\t\t\tchildren: draw(\n\t\t\t\t\tiRender,\n\t\t\t\t\tsource.children,\n\t\t\t\t\ttree.children,\n\t\t\t\t),\n\t\t\t}, tree.id);\n\t\t}\n\t\tsetRef(ref, component.exposed);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent,\n\t\t\tchildren: [],\n\t\t}, tree.id);\n\t}\n\tif (tag === Tags.Value) {\n\t\tlet value = source.value;\n\t\tif (isValue(value)) { value = value(); }\n\t\tif(tree.value === value) {\n\t\t\tsetRef(ref, tree.node);\n\t\t\treturn createMountedNode({\n\t\t\t\t...tree,\n\t\t\t\t...source,\n\t\t\t\tvalue,\n\t\t\t\tchildren: [],\n\t\t\t}, tree.id);\n\t\t}\n\t\treturn replace(iRender, createValue(iRender, source, value), tree);\n\t}\n\tif (tag === Template || tag.substr(0, 5) === 'Neep:') {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: updateAll(\n\t\t\t\tiRender,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t),\n\t\t}, tree.id);\n\t}\n\tconst { node } = tree;\n\tiRender.update(\n\t\tnode as NativeElement,\n\t\tsource.props || {},\n\t);\n\tsetRef(ref, node);\n\tif (!source.children.length && !tree.children.length) {\n\t\treturn createMountedNode(\n\t\t\t{\n\t\t\t\t...tree,\n\t\t\t\t...source,\n\t\t\t\tchildren: [],\n\t\t\t},\n\t\t\ttree.id);\n\t}\n\tif (!source.children.length && tree.children.length) {\n\t\tunmount(iRender, tree.children);\n\t}\n\tif (source.children.length && !tree.children.length) {\n\t\tconst children = createAll(iRender, source.children);\n\t\tfor (const it of getNodes(children)) {\n\t\t\tiRender.insert(node as NativeElement, it);\n\t\t}\n\t\treturn createMountedNode({\n\t\t\t...tree,\n\t\t\t...source,\n\t\t\tchildren,\n\t\t}, tree.id);\n\t}\n\treturn createMountedNode({\n\t\t...tree, ...source,\n\t\tchildren: updateAll(\n\t\t\tiRender,\n\t\t\tsource.children,\n\t\t\ttree.children,\n\t\t),\n\t}, tree.id);\n}\n\nfunction createValue(\n\tiRender: IRender,\n\tsource: TreeNode,\n\tvalue: any,\n): MountedNode {\n\tlet { ref } = source;\n\tif (iRender.isNode(value)) {\n\t\tsetRef(ref, value);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tvalue,\n\t\t\tnode: value,\n\t\t\tchildren: [],\n\t\t\tcomponent: undefined,\n\t\t});\n\t}\n\tconst type = typeof value;\n\tlet node: NativeNode | undefined;\n\tif (\n\t\ttype === 'bigint'\n\t\t|| type === 'boolean'\n\t\t|| type === 'number'\n\t\t|| type === 'string'\n\t\t|| type === 'symbol'\n\t\t|| value instanceof RegExp\n\t) {\n\t\tnode = iRender.text(String(value));\n\t} else if (value instanceof Date) {\n\t\tnode = iRender.text(value.toISOString());\n\t} else if (type === 'object' && value) {\n\t\tnode = iRender.text(String(value));\n\t\t// TODO: 对象处理\n\t}\n\tif (!node) { node = iRender.placeholder(); }\n\tsetRef(ref, node);\n\treturn createMountedNode({\n\t\t...source,\n\t\tvalue,\n\t\tnode,\n\t\tcomponent: undefined,\n\t\tchildren: [],\n\t});\n}\n\nfunction createAll(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (!source.length) {\n\t\treturn [createMountedNode({\n\t\t\ttag: null,\n\t\t\tnode: iRender.placeholder(),\n\t\t\tcomponent: undefined,\n\t\t\tchildren: [],\n\t\t})];\n\t}\n\n\treturn source.map(item =>\n\t\tArray.isArray(item)\n\t\t\t? createList(iRender, item)\n\t\t\t: createItem(iRender, item)\n\t);\n}\n\nfunction createList(\n\tiRender: IRender,\n\tsource: TreeNode[],\n): MountedNode[] {\n\tif (source.length) {\n\t\treturn source.map(it => createItem(iRender, it));\n\t}\n\treturn [createMountedNode({\n\t\ttag: null,\n\t\tnode: iRender.placeholder(),\n\t\tcomponent: undefined,\n\t\tchildren: [],\n\t})];\n}\n\nfunction createItem(\n\tiRender: IRender,\n\tsource: TreeNode,\n): MountedNode {\n\tconst { tag, ref, component } = source;\n\tif (!tag) {\n\t\tconst node = iRender.placeholder();\n\t\tsetRef(ref, node);\n\t\treturn createMountedNode({\n\t\t\ttag: null,\n\t\t\tnode,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: [],\n\t\t});\n\t}\n\tif (typeof tag !== 'string' || tag === Tags.Container) {\n\t\tif (!component) {\n\t\t\t// TODO: ref\n\t\t\treturn createMountedNode({\n\t\t\t\t...source,\n\t\t\t\tnode: undefined,\n\t\t\t\tcomponent: undefined,\n\t\t\t\tchildren: draw(iRender, source.children),\n\t\t\t});\n\t\t}\n\t\tcomponent.mount();\n\t\tsetRef(ref, component.exposed);\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent, children: [],\n\t\t});\n\t}\n\tif (tag === Tags.Value) {\n\t\tlet value = source.value;\n\t\tif (isValue(value)) { value = value(); }\n\t\treturn createValue(iRender, source, value);\n\t}\n\tif (tag === Template || tag.substr(0, 5) === 'Neep:') {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: createAll(iRender, source.children),\n\t\t});\n\t}\n\tconst node = iRender.create(tag, source.props || {});\n\tsetRef(ref, node);\n\tlet children: (MountedNode | MountedNode[])[] = [];\n\tif (source.children) {\n\t\tchildren = createAll(iRender, source.children);\n\t\tfor (const it of getNodes(children)) {\n\t\t\tiRender.insert(node, it);\n\t\t}\n\t}\n\treturn createMountedNode({\n\t\t...source,\n\t\tnode,\n\t\tcomponent: undefined,\n\t\tchildren,\n\t});\n}\n\nexport default function draw(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n\ttree?: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (tree) {\n\t\treturn updateAll(iRender, source, tree);\n\t}\n\treturn createAll(iRender, source);\n}\n","import { NeepElement, SlotFn, Slots, IRender } from '../type';\nimport { isElement, SlotRender, ScopeSlot } from '../auxiliary';\nimport { isElementSymbol } from '../symbols';\nimport { isProduction } from '../constant';\n\n\nexport function getSlots(\n\tiRender: IRender,\n\tchildren: any[],\n\tslots: Record<string | symbol, any[]>,\n\tnative = false,\n): any[] {\n\t/** 原始对象 */\n\tconst nativeList: any[] = [];\n\tfor (const it of children) {\n\t\tif (Array.isArray(it)) {\n\t\t\tconst list: Record<string | symbol, any[]>\n\t\t\t\t= Object.create(null);\n\t\t\tnativeList.push(getSlots(iRender, it, list, native));\n\t\t\tfor (const k of Reflect.ownKeys(list) as string[]) {\n\t\t\t\tif (k in slots) {\n\t\t\t\t\tslots[k].push(list[k]);\n\t\t\t\t} else {\n\t\t\t\t\tslots[k] = [list[k]];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (native) {\n\t\t\tif (iRender.isNode(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!isElement(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (it.tag !== SlotRender) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tconst slot = isElement(it) && it.slot || 'default';\n\t\tconst el = isElement(it) ? {\n\t\t\t...it, slot: undefined,\n\t\t\tprops: {...it.props, slot: undefined },\n\t\t} : it;\n\t\tif (slot in slots) {\n\t\t\tslots[slot].push(el);\n\t\t} else {\n\t\t\tslots[slot] = [el];\n\t\t}\n\t}\n\treturn nativeList;\n}\nfunction renderSlots(\n\tlist: any[],\n\t...props: any\n): any[] {\n\treturn list.map(it => {\n\t\tif (Array.isArray(it)) {\n\t\t\treturn renderSlots(it, ...props);\n\t\t}\n\t\tif (!isElement(it)) { return it; }\n\t\tif (it.tag !== SlotRender) {\n\t\t\treturn {\n\t\t\t\t...it,\n\t\t\t\tslot: undefined,\n\t\t\t} as NeepElement;\n\t\t}\n\t\tif (typeof it.render === 'function') {\n\t\t\treturn it.render(...props);\n\t\t}\n\t\treturn it.children;\n\t});\n}\nfunction createSlots(\n\tname: string,\n\tlist: any[],\n): SlotFn {\n\tconst slot = (...props: any) => ({\n\t\t[isElementSymbol]: true,\n\t\ttag: ScopeSlot,\n\t\tchildren: renderSlots(list, ...props),\n\t\tinserted: true,\n\t\tlabel: isProduction ? undefined : [`[${name}]`, '#00F'],\n\t} as NeepElement);\n\tslot.children = list;\n\treturn slot;\n}\nexport function setSlots(\n\tchildren: {[key: string]: any[]},\n\tslots: Slots = Object.create(null),\n) {\n\tfor (const k of Reflect.ownKeys(slots)) {\n\t\tif (!(k in children)) {\n\t\t\tdelete slots[k as string];\n\t\t}\n\t}\n\tfor (const k of Reflect.ownKeys(children) as string[]) {\n\t\tslots[k] = createSlots(k, children[k]);\n\t}\n\treturn slots;\n}\n","import { isValue } from '../auxiliary';\nconst disabledKey = new Set([\n\t':', '@', '#', '*',\n\t'!', '%', '^', '~',\n\t'&', '=', '+', '.',\n\t'(', ')', '[', ']', '{', '}', '<', '>',\n]);\nfunction filter(k: string | number | symbol) {\n\tif (typeof k !== 'string') { return true; }\n\treturn !disabledKey.has(k[0]);\n}\nexport function updateProps(\n\tobj: any,\n\tprops: any,\n\toldProps: any = {},\n\tdefine = false,\n) {\n\tconst newKeys = new Set(Reflect.ownKeys(props));\n\tfor (const k of Reflect.ownKeys(obj)) {\n\t\tif (!newKeys.has(k)) {\n\t\t\tdelete obj[k];\n\t\t}\n\t}\n\tif (!define) {\n\t\tfor (const k of newKeys) {\n\t\t\tobj[k] = props[k];\n\t\t}\n\t\treturn obj;\n\t}\n\tfor (const k of newKeys) {\n\t\tconst value = props[k];\n\t\tif (k in oldProps && oldProps[k] === value) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (isValue(value)) {\n\t\t\tReflect.defineProperty(obj, k, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget() { return value(); },\n\t\t\t\tset(v) { value(v); },\n\t\t\t});\n\t\t\tcontinue;\n\t\t}\n\t\tReflect.defineProperty(obj, k, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue,\n\t\t});\n\t}\n\treturn obj;\n}\n","import {\n\tNeepElement, Exposed, Delivered,\n\tRender, NeepNode, Slots, Context, IRender, Component,\n} from '../type';\nimport { typeSymbol, componentsSymbol } from '../symbols';\nimport { isProduction } from '../constant';\nimport auxiliary, { isElement, Tags } from '../auxiliary';\nimport { renderSymbol, isElementSymbol } from '../symbols';\nimport { getLabel } from '../helper/label';\nimport Entity from './Entity';\nimport { getSlots, setSlots } from './slot';\nimport { initContext } from '../helper/context';\nimport { updateProps } from './props';\nimport EventEmitter from '../EventEmitter';\nimport { components as globalComponents } from '../register';\n\n\nfunction getComponents(\n\t...components: (Record<string, Component> | undefined)[]\n) {\n\treturn components.filter(Boolean) as Record<string, Component>[];\n}\n\nfunction execSimple(\n\tnObject: Entity,\n\tdelivered: Delivered,\n\tnode: NeepElement,\n\ttag: Component,\n\tcomponents: Record<string, Component>[],\n\tchildren: any[],\n) {\n\tconst { iRender } = nObject;\n\tconst slotMap = Object.create(null);\n\tgetSlots(iRender, children, slotMap);\n\tconst slots = setSlots(slotMap);\n\tconst event = new EventEmitter();\n\tevent.updateInProps(node.props);\n\tconst context: Context = initContext({\n\t\tslots,\n\t\tcreated: false,\n\t\tparent: nObject.exposed,\n\t\tdelivered,\n\t\tchildren: new Set<Exposed>(),\n\t\tchildNodes: children,\n\t\trefresh(f) { nObject.refresh(f); },\n\t\temit: event.emit,\n\t});\n\tif (!isProduction) { getLabel(); }\n\tconst result = tag({...node.props}, context, auxiliary);\n\tlet label: [string, string] | undefined;\n\tif (!isProduction) { label = getLabel(); }\n\tconst nodes = exec(nObject, delivered, renderNode(\n\t\tiRender,\n\t\tresult,\n\t\tcontext,\n\t\ttag[renderSymbol],\n\t), slots, getComponents(...components, tag[componentsSymbol]));\n\n\treturn {\n\t\t...node,\n\t\ttag,\n\t\tchildren: Array.isArray(nodes) ? nodes : [nodes],\n\t\tlabel,\n\t} as NeepElement;\n}\n\nfunction execSlot(\n\tnode: NeepElement,\n\tslots: Slots,\n\tchildren: any[],\n\targs: any[] = [{}],\n): NeepElement {\n\tconst slotName = node.props?.name || 'default';\n\tconst slot = slots[slotName];\n\tif (typeof slot === 'function') {\n\t\treturn {\n\t\t\t...node,\n\t\t\t...slot(...args),\n\t\t};\n\t}\n\tconst { render } = node;\n\tconst label: [string, string] | undefined = isProduction\n\t\t? undefined\n\t\t: [`[${ slotName }]`, '#00F'];\n\treturn {\n\t\t...node,\n\t\ttag: Tags.ScopeSlot,\n\t\tlabel,\n\t\tchildren:\n\t\t\ttypeof render !== 'function' ? children : render(...args),\n\t};\n}\n\nfunction findComponent(\n\ttag: any,\n\tcomponents: Record<string, Component>[],\n): Component | string | null {\n\tif (!tag) { return null; }\n\tif (typeof tag !== 'string') { return tag; }\n\tif (tag === 'template') { return tag; }\n\tif (/^neep:.+/i.test(tag)) { return tag; }\n\tfor (const list of components) {\n\t\tconst component = list[tag];\n\t\tif (component) { return component; }\n\t}\n\treturn globalComponents[tag] || tag;\n}\n\nfunction exec(\n\tnObject: Entity,\n\tdelivered: Delivered,\n\tnode: any,\n\tslots: Slots,\n\tcomponents: Record<string, Component>[],\n\tnative = false,\n): any {\n\tif (Array.isArray(node)) {\n\t\treturn node.map(n =>\n\t\t\texec(nObject, delivered, n, slots, components, native)\n\t\t);\n\t}\n\tif (!isElement(node)) { return node; }\n\tconst { inserted, args = [{}] } = node;\n\tlet tag = findComponent(node.tag, components);\n\tif (tag === Tags.Deliver) {\n\t\tconst props = { ...node.props };\n\t\tdelete props.ref;\n\t\tdelete props.slot;\n\t\tdelete props.key;\n\t\tconst newDelivered = Object.create(delivered);\n\t\tupdateProps(newDelivered, props || {}, {}, true);\n\t\treturn {\n\t\t\t...node,\n\t\t\ttag,\n\t\t\t$__neep__delivered: newDelivered,\n\t\t\tchildren: node.children.map(n => exec(\n\t\t\t\tnObject,\n\t\t\t\tnewDelivered,\n\t\t\t\tn,\n\t\t\t\tslots,\n\t\t\t\tcomponents,\n\t\t\t\tnative,\n\t\t\t)),\n\t\t};\n\t}\n\n\tconst children = node.children\n\t\t.map(n => exec(nObject, delivered, n, slots, components, native));\n\n\tif (typeof tag === 'function') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn execSimple(\n\t\t\t\tnObject,\n\t\t\t\tdelivered,\n\t\t\t\tnode,\n\t\t\t\ttag,\n\t\t\t\tcomponents,\n\t\t\t\tchildren,\n\t\t\t);\n\t\t}\n\t\treturn { ...node, $__neep__delivered: delivered, children, tag };\n\n\t}\n\tif (tag === Tags.Slot) {\n\t\ttag = native ? 'slot' : Tags.ScopeSlot;\n\t}\n\tif (tag !== Tags.ScopeSlot || inserted) {\n\t\treturn { ...node, children, tag };\n\t}\n\treturn execSlot({ ...node, tag }, slots, children, args);\n}\n\n\nfunction renderNode<R extends object = object>(\n\tiRender: IRender,\n\tnode: R | NeepNode | NeepNode[] | undefined | null,\n\tcontext: Context,\n\trender?: Render,\n): NeepNode[] {\n\tif (Array.isArray(node)) { return node; }\n\tif (isElement(node)) { return [node]; }\n\tif (node === undefined || node === null) {\n\t\treturn [{ [isElementSymbol]: true, tag: null, children: [] }];\n\t}\n\tif (!iRender.isNode(node)\n\t\t&& node && typeof node === 'object' && render\n\t) {\n\t\tnode = render(node, context, auxiliary);\n\t}\n\tif (isElement(node)) { return [node]; }\n\tif (node === undefined || node === null) {\n\t\treturn [{ [isElementSymbol]: true, tag: null, children: [] }];\n\t}\n\treturn [{\n\t\t[isElementSymbol]: true,\n\t\ttag: Tags.Value,\n\t\tvalue: node,\n\t\tchildren: [],\n\t}];\n}\n\nexport default function normalize(\n\tnObject: Entity,\n\tresult: any,\n) {\n\tconst { component } = nObject;\n\treturn exec(\n\t\tnObject,\n\t\tnObject.delivered,\n\t\trenderNode(\n\t\t\tnObject.iRender,\n\t\t\tresult,\n\t\t\tnObject.context,\n\t\t\tcomponent[renderSymbol],\n\t\t),\n\t\tnObject.context.slots,\n\t\tgetComponents(component[componentsSymbol]),\n\t\tBoolean(nObject.native),\n\t);\n}\n","import NeepObject from './Object';\n\nlet delayedRefresh = 0;\nconst objectSet = new Set<NeepObject>();\nexport function wait(obj: NeepObject) {\n\tif (delayedRefresh <= 0) { return false; }\n\tobjectSet.add(obj);\n\treturn true;\n}\nfunction run() {\n\tif (delayedRefresh > 0) { return; }\n\tconst list = [...objectSet];\n\tobjectSet.clear();\n\tlist.forEach(o => o.refresh());\n}\nasync function asyncRefresh<T>(f: () => PromiseLike<T> | T): Promise<T> {\n\ttry {\n\t\tdelayedRefresh++;\n\t\treturn await f();\n\t} finally {\n\t\tdelayedRefresh--;\n\t\trun();\n\t}\n}\nexport default function refresh<T>(f: () => T, async?: false): T;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync: true,\n): Promise<T>;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync?: boolean,\n): PromiseLike<T> | T;\nexport default function refresh<T>(\n\tf: () => PromiseLike<T> | T,\n\tasync?: boolean,\n): PromiseLike<T> | T {\n\tif (async) { return asyncRefresh(f); }\n\ttry {\n\t\tdelayedRefresh++;\n\t\treturn f();\n\t} finally {\n\t\tdelayedRefresh--;\n\t\trun();\n\t}\n}\n","import {\n\tExposed, Delivered,\n\tEntity as ComponentEntity,\n\tNativeComponent,\n\tHook, Hooks, NeepNode, IRender, Component,\n} from '../type';\nimport { callHook, setHook } from '../hook';\nimport { MountedNode } from './draw';\nimport Container from './Container';\nimport convert, { TreeNode } from './convert';\nimport { wait } from './refresh';\nimport { monitorable } from '../install';\nimport EventEmitter from '../EventEmitter';\n\nfunction createExposed(obj: NeepObject): Exposed {\n\tconst cfg: { [K in Exclude<keyof Exposed, '$label'>]-?:\n\t\t{ configurable: true, value: Exposed[K] }\n\t\t| { configurable: true, get(): Exposed[K] }\n\t} = {\n\t\t$parent: { configurable: true, get: () => obj.parent?.exposed },\n\t\t$component: { configurable: true, value: null },\n\t\t$isContainer: { configurable: true, value: false },\n\t\t$created: { configurable: true, get: () => obj.created },\n\t\t$destroyed: { configurable: true, get: () => obj.destroyed },\n\t\t$mounted: { configurable: true, get: () => obj.mounted },\n\t\t$unmounted: { configurable: true, get: () => obj.unmounted },\n\t};\n\tconst exposed: Exposed = Object.create(null, cfg);\n\treturn exposed;\n}\n\nlet completeList: (() => void)[] | undefined;\nexport function setCompleteList(list?: (() => void)[]) {\n\tcompleteList = list;\n}\nexport function complete(it: () => void) {\n\tif (!completeList) {\n\t\tit();\n\t} else {\n\t\tcompleteList.push(it);\n\t}\n}\n\nfunction createEntity(obj: NeepObject): ComponentEntity {\n\tconst cfg: { [K in keyof ComponentEntity]-?:\n\t\t{ configurable: true, value: ComponentEntity[K], writable?: boolean }\n\t\t| { configurable: true, get(): ComponentEntity[K] }\n\t} = {\n\t\texposed: { configurable: true, get: () => obj.exposed },\n\t\tdelivered: { configurable: true, get: () => obj.delivered },\n\t\tparent: { configurable: true, get: () => obj.parent?.entity },\n\t\tcomponent: { configurable: true, value: null },\n\t\tisContainer: { configurable: true, value: false },\n\t\tcreated: { configurable: true, get: () => obj.created },\n\t\tdestroyed: { configurable: true, get: () => obj.destroyed },\n\t\tmounted: { configurable: true, get: () => obj.mounted },\n\t\tunmounted: { configurable: true, get: () => obj.unmounted },\n\t\t$_hooks: { configurable: true, value: Object.create(null) },\n\t\t$_valueIndex: { configurable: true, value: 0, writable: true },\n\t\t$_values: { configurable: true, value: [] },\n\t\tcallHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(h: string) { callHook(h, entity); },\n\t\t},\n\t\tsetHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(id: string, hook: Hook) {\n\t\t\t\treturn setHook(id, hook, entity);\n\t\t\t},\n\t\t},\n\t\trefresh: { configurable: true, value: obj.refresh.bind(obj) },\n\t\ton: { configurable: true, value: obj.on },\n\t\temit: { configurable: true, value: obj.emit },\n\t\tconfig: { configurable: true, value: obj.config },\n\t};\n\tconst entity: ComponentEntity = Object.create(null, cfg);\n\treturn entity;\n}\n\nexport default class NeepObject {\n\treadonly events = new EventEmitter();\n\treadonly emit = this.events.emit;\n\treadonly on = this.events.on;\n\treadonly eventCancelHandles = new Set<() => void>();\n\treadonly iRender: IRender;\n\treadonly components: Record<string, Component> = Object.create(null);\n\treadonly config: Record<string, any> = Object.create(null);\n\t/** 接受到的呈递值 */\n\treadonly parentDelivered: Delivered;\n\t/** 向后代呈递的值 */\n\treadonly delivered: Delivered;\n\t/** 组件暴露值 */\n\treadonly exposed: Exposed = createExposed(this);\n\t/** 组件实体 */\n\treadonly entity: ComponentEntity = createEntity(this);\n\t/** 父组件 */\n\tparent?: NeepObject;\n\t/** 原生组件 */\n\tnative: NativeComponent | undefined;\n\t/** 状态 */\n\tcreated: boolean = false;\n\tdestroyed: boolean = false;\n\tmounted: boolean = false;\n\tunmounted: boolean = false;\n\t/**  子组件的暴露值 */\n\treadonly children: Set<Exposed> = new Set();\n\t/** The subtree mounted on the parent node */\n\ttree: (MountedNode | MountedNode[])[] = [];\n\treadonly container: Container;\n\tconstructor(\n\t\tiRender: IRender,\n\t\tparent?: NeepObject,\n\t\tdelivered: Delivered = parent?.delivered || Object.create(null),\n\t\tcontainer?: Container,\n\t) {\n\t\tthis.iRender = iRender;\n\t\tthis.parentDelivered = delivered;\n\t\tthis.delivered = Object.create(delivered);\n\t\tif (parent) {\n\t\t\tthis.parent = parent;\n\t\t}\n\t\tthis.container = container || this as any as Container;\n\t}\n\t/** 结果渲染函数 */\n\tprotected _render: () => NeepNode[] = () => [];\n\n\tget canRefresh(): boolean {\n\t\tif (wait(this)) { return false; }\n\t\treturn !this._delayedRefresh;\n\t}\n\tprotected get needRefresh(): boolean {\n\t\tif (wait(this)) { return false; }\n\t\tif (this._delayedRefresh) { return false; }\n\t\tconst needRefresh = this._needRefresh;\n\t\tthis._needRefresh = false;\n\t\treturn needRefresh;\n\t}\n\t/** 是否需要继续刷新 */\n\tprotected _needRefresh = false;\n\tprivate _delayedRefresh = 0;\n\t/** 是否为刷新中 */\n\tprivate _refreshing = false;\n\t/** 渲染结果 */\n\tprotected _nodes: (TreeNode | TreeNode[])[] = [];\n\tprotected requestDraw() { }\n\tasync asyncRefresh<T>(f: () => PromiseLike<T> | T): Promise<T> {\n\t\ttry {\n\t\t\tthis._delayedRefresh++;\n\t\t\treturn await f();\n\t\t} finally {\n\t\t\tthis._delayedRefresh--;\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\trefresh(): void;\n\trefresh<T>(f: () => T, async?: false): T;\n\trefresh<T>(f: () => PromiseLike<T> | T, async: true): Promise<T>;\n\trefresh<T>(\n\t\tf: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T;\n\trefresh<T>(\n\t\tf?: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T | undefined;\n\trefresh<T>(\n\t\tf?: () => PromiseLike<T> | T,\n\t\tasync?: boolean,\n\t): PromiseLike<T> | T | undefined {\n\t\tif (typeof f === 'function') {\n\t\t\tif (async) { return this.asyncRefresh(f); }\n\t\t\ttry {\n\t\t\t\tthis._delayedRefresh++;\n\t\t\t\treturn f();\n\t\t\t} finally {\n\t\t\t\tthis._delayedRefresh--;\n\t\t\t\tif (this._delayedRefresh <= 0) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.destroyed) { return; }\n\t\tthis._needRefresh = true;\n\t\tif (!this.created) { return; }\n\n\t\tif (this._refreshing) { return; }\n\t\tthis._refreshing = true;\n\n\t\tlet nodes: NeepNode[] | undefined;\n\t\twhile(this.needRefresh) {\n\t\t\tnodes = this._render();\n\t\t\tif (this.destroyed) { return; }\n\t\t}\n\t\tthis._refreshing = false;\n\t\tif (!this.canRefresh) { return; }\n\t\tif (!nodes) { return; }\n\n\t\tthis._nodes = convert(this, nodes, this._nodes);\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tif (this.unmounted) { return; }\n\t\tthis.requestDraw();\n\t}\n\tcallHook<H extends Hooks>(id: H): void;\n\tcallHook(id: string): void;\n\tcallHook(id: string): void {\n\t\tcallHook(id, this.entity);\n\t}\n\n\tchildNodes: any[] = [];\n\t/** 更新属性及子代 */\n\tprotected _update(props: object, children: any[]): void {\n\t\tthis.childNodes = children;\n\t}\n\t/** 更新属性及子代 */\n\tupdate(props: object, children: any[]): void {\n\t\tthis._update(props, children);\n\t}\n\n\n\tprivate __executed_destroy = false;\n\tprivate __executed_mount = false;\n\tprivate __executed_mounted = false;\n\tprotected _destroy() { }\n\tdestroy() {\n\t\tif (this.__executed_destroy) { return; }\n\t\tthis.__executed_destroy = true;\n\t\tthis.callHook('beforeDestroy');\n\t\tthis._destroy();\n\t\tthis.callHook('destroyed');\n\t\tthis.destroyed = true;\n\t}\n\tprotected _mount() { }\n\tmount() {\n\t\tif (this.__executed_destroy) { return; }\n\t\tif (this.__executed_mount) { return; }\n\t\tthis.__executed_mount = true;\n\t\tthis.callHook('beforeMount');\n\t\tconst result = monitorable.exec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => {\n\t\t\t\tthis._mount();\n\t\t\t\tthis.mounted = true;\n\t\t\t},\n\t\t);\n\t\tthis._cancelDrawMonitor = result.stop;\n\t\tcomplete(() => this.callHook('mounted'));\n\t}\n\tprotected _unmount() { }\n\tunmount() {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.__executed_mounted) { return; }\n\t\tthis.__executed_mounted = true;\n\t\tthis.callHook('beforeUnmount');\n\t\tthis._unmount();\n\t\tthis.callHook('unmounted');\n\t\tthis.unmounted = true;\n\t}\n\t_draw() {}\n\t_cancelDrawMonitor?: () => void;\n\tdraw() {\n\t\tif (this.__executed_destroy) { return; }\n\t\tthis._cancelDrawMonitor?.();\n\t\tthis.callHook('beforeUpdate');\n\t\tconst result = monitorable.exec(\n\t\t\tc => c && this.requestDraw(),\n\t\t\t() => this._draw(),\n\t\t);\n\t\tthis._cancelDrawMonitor = result.stop;\n\t\tcomplete(() => this.callHook('updated'));\n\t}\n}\n","import { Component, NeepNode, Slots, Context, Delivered, NativeShadow } from '../type';\nimport auxiliary from '../auxiliary';\nimport { monitorable } from '../install';\nimport { setCurrent } from '../helper/current';\nimport convert, { destroy, TreeNode } from './convert';\nimport draw, { unmount, MountedNode, getNodes } from './draw';\nimport normalize from './normalize';\nimport { getSlots, setSlots } from './slot';\nimport NeepObject from './Object';\nimport { initContext } from '../helper/context';\nimport { updateProps } from './props';\nimport { typeSymbol, configSymbol, componentsSymbol } from '../symbols';\nimport refresh from './refresh';\n\nfunction update(\n\tnObject: Entity<any, any>,\n\tprops: any,\n\tchildren:any[],\n) {\n\tupdateProps(nObject.props, props);\n\tnObject.events.updateInProps(props);\n\tconst slots = Object.create(null);\n\tconst { native } = nObject;\n\tconst childNodes = getSlots(\n\t\tnObject.iRender,\n\t\tchildren,\n\t\tslots,\n\t\tBoolean(native),\n\t);\n\tsetSlots(slots, nObject.slots);\n\tif (!native) { return; }\n\tnObject.nativeNodes\n\t\t= convert(nObject, childNodes, nObject.nativeNodes);\n\tif (!nObject.mounted) { return; }\n\tnObject.requestDraw();\n}\n\nfunction createContext<\n\tP extends object = object,\n\tR extends object = object\n>(nObject: Entity<P, R>): Context {\n\treturn initContext({\n\t\tslots: nObject.slots,\n\t\tget created() { return nObject.created; },\n\t\tget parent() { return nObject.parent.exposed; },\n\t\tget delivered() { return nObject.parentDelivered; },\n\t\tget children() { return nObject.children; },\n\t\tget childNodes() { return nObject.childNodes; },\n\t\tget emit() { return nObject.emit; },\n\t\trefresh(f) { nObject.refresh(f); },\n\t}, nObject.exposed);\n}\n\n/** 初始化渲染 */\nfunction initRender<R extends object = object>(\n\tnObject: Entity<any, R>\n): { render(): any, nodes: any, stopRender(): void } {\n\tconst {\n\t\tcomponent,\n\t\tprops,\n\t\tcontext,\n\t\tentity,\n\t} = nObject;\n\tconst refresh = (changed: boolean) => changed && nObject.refresh();\n\t// 初始化执行\n\tconst result = monitorable.exec(refresh, () => setCurrent(\n\t\t() => component(props, context, auxiliary),\n\t\tentity,\n\t), { resultOnly: true });\n\tif (typeof result === 'function') {\n\t\t// 响应式\n\t\tconst render = monitorable.createExecutable(\n\t\t\trefresh,\n\t\t\t() => normalize(nObject, (result as () => NeepNode)()),\n\t\t);\n\t\treturn {\n\t\t\tnodes: render(),\n\t\t\trender,\n\t\t\tstopRender: () => render.stop(),\n\t\t};\n\t}\n\n\tconst render = monitorable.createExecutable(\n\t\trefresh,\n\t\t() => normalize(nObject, setCurrent(\n\t\t\t() => component(props, context, auxiliary),\n\t\t\tentity,\n\t\t)),\n\t);\n\treturn {\n\t\tnodes: monitorable.exec(\n\t\t\trefresh,\n\t\t\t() => normalize(nObject, result),\n\t\t\t{ resultOnly: true },\n\t\t),\n\t\trender,\n\t\tstopRender: () => render.stop(),\n\t};\n}\n\n\nexport default class Entity<\n\tP extends object = object,\n\tR extends object = object\n> extends NeepObject {\n\t/** 组件函数 */\n\treadonly component: Component<P, R>;\n\t/** 组件属性 */\n\treadonly props: P = monitorable.encase(Object.create(null));\n\t/** 组件槽 */\n\treadonly slots: Slots = monitorable.encase(Object.create(null));\n\t/** 结果渲染函数 */\n\tprivate readonly _stopRender:() => void;\n\t/** 原生子代 */\n\tnativeNodes: (TreeNode | TreeNode[])[] | undefined;\n\tshadowTree: (MountedNode | MountedNode[])[] = [];\n\tnativeTree: (MountedNode | MountedNode[])[] = [];\n\tprivate readonly _shadow: NativeShadow | undefined;\n\t/** 组件上下文 */\n\treadonly context: Context;\n\treadonly parent: NeepObject;\n\t/** 结果渲染函数 */\n\tconstructor(\n\t\tcomponent: Component<P, R>,\n\t\tprops: object,\n\t\tchildren: any[],\n\t\tparent: NeepObject,\n\t\tdelivered?: Delivered,\n\t) {\n\t\tsuper(parent.iRender, parent, delivered, parent.container);\n\t\tthis.component = component;\n\t\tObject.assign(this.config, component[configSymbol]);\n\t\tObject.assign(this.components, component[componentsSymbol]);\n\t\tReflect.defineProperty(\n\t\t\tthis.exposed,\n\t\t\t'$component',\n\t\t\t{ value: component, enumerable: true, configurable: true },\n\t\t);\n\t\t// 原生组件\n\t\t[this.native, this._shadow] =\n\t\t\tcomponent[typeSymbol] === 'native' &&\n\t\t\tthis.iRender.component?.() || [];\n\t\t// 父子关系\n\t\tthis.parent = parent;\n\t\tparent.children.add(this.exposed);\n\t\t// 上下文属性\n\t\tconst context = createContext(this);\n\t\tthis.context = context;\n\t\t// 初始化钩子\n\t\tthis.callHook('beforeCreate');\n\t\t// 更新属性\n\t\tthis.childNodes = children;\n\t\trefresh(() => update(this, props, children));\n\t\t// 获取渲染函数及初始渲染\n\t\tconst { render, nodes, stopRender } = initRender(this);\n\t\tthis._render = render;\n\t\tthis._stopRender = stopRender;\n\t\tthis._nodes = convert(this, nodes);\n\t\t// 初始化钩子\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t\tif (this._needRefresh) { this.refresh(); }\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: object, children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\trefresh(() => update(this, props, children));\n\t}\n\t_destroy() {\n\t\tif (this._stopRender) {\n\t\t\tthis._stopRender();\n\t\t}\n\t\tthis.parent.children.delete(this.exposed);\n\t\tdestroy(this._nodes);\n\t}\n\n\t/** 刷新 */\n\trequestDraw() {\n\t\tthis.container.markDraw(this);\n\t}\n\t_draw() {\n\t\tconst {nativeNodes, iRender, _shadow, native} = this;\n\t\tif (!native || !nativeNodes || !_shadow) {\n\t\t\tthis.tree = draw(\n\t\t\t\tiRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.tree,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tthis.shadowTree = draw(\n\t\t\tiRender,\n\t\t\tthis._nodes,\n\t\t\tthis.shadowTree,\n\t\t);\n\t\tthis.nativeTree = draw(\n\t\t\tiRender,\n\t\t\tnativeNodes,\n\t\t\tthis.nativeTree,\n\t\t);\n\t}\n\t_mount() {\n\t\tconst {nativeNodes, iRender, _shadow, native, _nodes} = this;\n\t\tif (!native || !nativeNodes || !_shadow) {\n\t\t\tthis.tree = draw(iRender, _nodes);\n\t\t\treturn;\n\t\t}\n\t\tthis.tree = draw(iRender, convert(this, native));\n\t\tthis.shadowTree = draw(iRender, _nodes);\n\t\tfor (const it of getNodes(this.shadowTree)) {\n\t\t\tiRender.insert(_shadow, it);\n\t\t}\n\t\tthis.nativeTree = draw(iRender, nativeNodes);\n\t\tfor (const it of getNodes(this.nativeTree)) {\n\t\t\tiRender.insert(native, it);\n\t\t}\n\t}\n\t_unmount() {\n\t\tconst {iRender, nativeTree} = this;\n\t\tunmount(iRender, this.tree);\n\t\tif (!nativeTree) { return; }\n\t\tunmount(iRender, nativeTree);\n\t}\n}\n","import { getRender } from '../install';\nimport { NeepNode, NeepElement, Tag } from '../type';\nimport { Tags, isElement, Value, Template } from '../auxiliary';\nimport { isElementSymbol, typeSymbol } from '../symbols';\nimport { recursive2iterable } from './recursive';\nimport Entity from './Entity';\nimport NeepObject from './Object';\nimport Container from './Container';\nimport { updateProps } from './props';\n\nexport interface TreeNode\n\textends Omit<\n\t\tNeepElement,\n\t\t'children' | 'tag' | typeof isElementSymbol\n\t>\n{\n\t/** 标签名 */\n\ttag: Tag;\n\tchildren: (this | this[])[];\n\tmounted?: boolean;\n\tcomponent?: NeepObject;\n}\n/** 强制转换为 NeepElement */\nfunction toElement(t: any): null | NeepElement {\n\tif (t === false || t === null || t === undefined) {\n\t\treturn null;\n\t}\n\tif (isElement(t)) {\n\t\treturn t;\n\t}\n\treturn {\n\t\t[isElementSymbol]: true,\n\t\ttag: Value,\n\t\tkey: t,\n\t\tvalue: t,\n\t\tchildren: [],\n\t};\n}\n\nexport function destroy(\n\ttree: TreeNode | TreeNode[] | (TreeNode | TreeNode[])[]\n) {\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(t => destroy(t));\n\t\treturn;\n\t}\n\tconst { component } = tree;\n\tif (component) { component.destroy(); }\n}\n\nfunction createItem(\n\tnObject: NeepObject,\n\tsource: NeepNode,\n): TreeNode {\n\tif (!source) { return { tag: null, children: [] }; }\n\tconst { tag } = source;\n\tif (!tag) { return { tag: null, children: [] }; }\n\tif (typeof tag !== 'string') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn {\n\t\t\t\t...source,\n\t\t\t\tchildren: convert(nObject, source.children),\n\t\t\t\tcomponent: undefined,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\t...source, children: [],\n\t\t\tcomponent: new Entity(\n\t\t\t\ttag,\n\t\t\t\tsource.props || {},\n\t\t\t\tsource.children,\n\t\t\t\tnObject,\n\t\t\t\tsource.$__neep__delivered,\n\t\t\t),\n\t\t};\n\t}\n\tif (tag === Tags.Container) {\n\t\tconst type = source?.props?.type;\n\t\tconst iRender = type ? getRender(type) : nObject.iRender;\n\t\treturn {\n\t\t\t...source, children: [],\n\t\t\tcomponent: new Container(\n\t\t\t\tiRender,\n\t\t\t\tsource.props || {},\n\t\t\t\tsource.children,\n\t\t\t\tnObject,\n\t\t\t\tsource.$__neep__delivered,\n\t\t\t),\n\t\t};\n\t}\n\tif (tag === Tags.Value) {\n\t\treturn { ...source, children: [] };\n\t}\n\tif (tag === Template || tag.substr(0, 5) === 'Neep:') {\n\t\treturn {\n\t\t\t...source,\n\t\t\tchildren: convert(nObject, source.children),\n\t\t};\n\t}\n\treturn {...source, children: convert(nObject, source.children) };\n}\n\n/**\n * 更新树节点\n * @param nObject Neep 对象\n * @param source 用于替换的源\n * @param tree 已有树\n */\nfunction updateList(\n\tnObject: NeepObject,\n\tsource: any[],\n\ttree: TreeNode | TreeNode[],\n): TreeNode[] {\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: TreeNode[] = [];\n\tfor (const src of recursive2iterable(source)) {\n\t\tconst node = toElement(src);\n\t\tif (!node) { continue; }\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === node.tag && it.key === node.key\n\t\t);\n\t\tif (index >= 0) {\n\t\t\tnewList.push(updateItem(nObject, node, tree[index]));\n\t\t\ttree.splice(index, 1);\n\t\t} else {\n\t\t\tnewList.push(createItem(nObject, node));\n\t\t}\n\t}\n\tdestroy(tree);\n\treturn newList;\n}\n\n/**\n * 更新树节点\n * @param tree 已有树\n * @param source 用于替换的源\n * @param nObject Neep 对象\n */\nfunction updateItem(\n\tnObject: NeepObject,\n\tsource: NeepNode,\n\ttree?: TreeNode | TreeNode[],\n): TreeNode {\n\tif (!tree) {\n\t\treturn createItem(nObject, source);\n\t}\n\tif (!source) {\n\t\tdestroy(tree);\n\t\treturn { tag: null, children: [] };\n\t}\n\tif (Array.isArray(tree)) {\n\t\tif (!tree.length) { return createItem(nObject, source); }\n\t\tconst index = tree.findIndex(it => it.tag === source.tag);\n\t\tif (index < 0) {\n\t\t\tdestroy(tree);\n\t\t\treturn createItem(nObject, source);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tdestroy(all);\n\t}\n\tconst { tag } = source;\n\tif (tag !== tree.tag) {\n\t\tdestroy(tree);\n\t\treturn createItem(nObject, source);\n\t}\n\tif (!tag) { return { tag: null, children: [] }; }\n\tif (typeof tag !== 'string') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn {\n\t\t\t\t...source,\n\t\t\t\tchildren: convert(\n\t\t\t\t\tnObject,\n\t\t\t\t\tsource.children,\n\t\t\t\t\ttree.children,\n\t\t\t\t),\n\t\t\t\tcomponent: undefined,\n\t\t\t};\n\t\t}\n\t\tconst { component } = tree;\n\t\tif (!component) { return createItem(nObject, source); }\n\t\tcomponent.update(source.props || {}, source.children);\n\t\treturn { ...source, children: [], component };\n\t}\n\tif (tag === Tags.Container) {\n\t\tconst { component } = tree;\n\t\tif (!component) { return createItem(nObject, source); }\n\t\tconst type = source?.props?.type;\n\t\tconst iRender = type ? getRender(type) : nObject.iRender;\n\t\tif (iRender !== component.iRender) {\n\t\t\treturn createItem(nObject, source);\n\t\t}\n\t\tcomponent.update(source.props || {}, source.children);\n\t\treturn { ...source, children: [], component };\n\t}\n\tif (tag === Tags.Value) {\n\t\treturn { ...source, children: [] };\n\t}\n\tif (tag === Template || tag.substr(0, 5) === 'Neep:') {\n\t\tlet delivered: any;\n\t\tif (Tags.Deliver === tag) {\n\t\t\tconst props = { ...source.props };\n\t\t\tdelete props.ref;\n\t\t\tdelete props.slot;\n\t\t\tdelete props.key;\n\t\t\tdelivered = updateProps(\n\t\t\t\ttree.$__neep__delivered,\n\t\t\t\tprops,\n\t\t\t\ttree.props,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\t\treturn {\n\t\t\t...source,\n\t\t\t$__neep__delivered: delivered,\n\t\t\tchildren: convert(\n\t\t\t\tnObject,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t),\n\t\t};\n\t}\n\treturn {\n\t\t...source,\n\t\tchildren: convert(nObject, source.children, tree.children),\n\t};\n}\n\n\nfunction createAll(\n\tnObject: NeepObject,\n\tsource: any[],\n): (TreeNode | TreeNode[])[] {\n\tif (!source.length) { return []; }\n\treturn (source as any[]).map(item => {\n\t\tif (!Array.isArray(item)) {\n\t\t\treturn createItem(nObject, toElement(item));\n\t\t}\n\t\treturn [...recursive2iterable(item)]\n\t\t\t.map(it => createItem(nObject, toElement(it)));\n\t});\n}\nfunction *updateAll(\n\tnObject: NeepObject,\n\tsource: any[],\n\ttree: (TreeNode | TreeNode[])[],\n): Iterable<TreeNode | TreeNode[]> {\n\tlet index = 0;\n\tlet length = Math.min(source.length, source.length);\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tyield updateList(nObject, src, tree[index]);\n\t\t} else {\n\t\t\tyield updateItem(nObject, toElement(src), tree[index]);\n\t\t}\n\t}\n\tlength = Math.max(source.length, source.length);\n\tif (tree.length > length) {\n\t\t\t// 销毁多余项\n\t\t\tfor (; index < length; index++) {\n\t\t\t\tdestroy(tree[index]);\n\t\t\t}\n\t}\n\tif (source.length > length) {\n\t\t// 创建多余项\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = toElement(source[index]);\n\t\t\tif (Array.isArray(src)) {\n\t\t\t\tyield [...recursive2iterable(src)]\n\t\t\t\t\t.map(it => createItem(nObject, it));\n\t\t\t} else {\n\t\t\t\tyield createItem(nObject, src);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * 更新树\n * @param source 用于替换的源\n * @param nObject Neep 对象\n * @param tree 已有树\n */\nfunction convert(\n\tnObject: NeepObject,\n\tsource: any,\n\ttree?: (TreeNode | TreeNode[])[],\n): (TreeNode | TreeNode[])[] {\n\tif (!Array.isArray(source)) { source = [source]; }\n\tif (!tree) {\n\t\treturn createAll(nObject, source);\n\t}\n\treturn [...updateAll(nObject, source, tree)];\n}\n\n\nexport default convert;\n","import {\n\tIRender,\n\tMountProps,\n\tNativeNode,\n\tNativeContainer,\n\tDelivered,\n} from '../type';\nimport { Tags } from '../auxiliary';\nimport { createMountedNode } from './id';\nimport convert, { destroy } from './convert';\nimport draw, { unmount, getNodes, MountedNode, setRefList } from './draw';\nimport NeepObject, { setCompleteList, complete } from './Object';\nimport { nextFrame, monitorable } from '../install';\n\n\nlet awaitDraw = new Set<Container>();\nlet requested = false;\nfunction markDraw(c: Container) {\n\tawaitDraw.add(c);\n\tif (requested) { return; }\n\trequested = true;\n\tnextFrame(() => {\n\t\trequested = false;\n\t\tconst list = [...awaitDraw];\n\t\tawaitDraw.clear();\n\t\tlist.map(c => c.drawAll());\n\t});\n}\n\nexport default class Container extends NeepObject {\n\tprops: MountProps;\n\t/** 组件树结构 */\n\tcontent: (MountedNode | MountedNode[])[] = [];\n\t_node: NativeNode | null = null;\n\t_container: NativeContainer | null = null;\n\treadonly rootContainer: Container = this;\n\tconstructor(\n\t\tiRender: IRender,\n\t\tprops: MountProps,\n\t\tchildren: any[],\n\t\tparent?: NeepObject,\n\t\tdelivered?: Delivered,\n\t) {\n\t\tsuper(iRender, parent, delivered);\n\t\tthis.props = props;\n\t\tthis.parent = parent;\n\t\tif (parent) {\n\t\t\tthis.rootContainer = parent.container.rootContainer;\n\t\t}\n\t\tthis.callHook('beforeCreate');\n\t\tthis._render = () => children;\n\t\tthis._nodes = convert(this, children);\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t}\n\t_drawChildren = false;\n\t_drawContainer = false;\n\tsetChildren(children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\tthis._render = () => children;\n\t\tthis._drawChildren = true;\n\t\tthis.refresh();\n\t}\n\tsetProps(props: MountProps): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.props = props;\n\t\tthis._drawContainer = true;\n\t\tthis.refresh();\n\t}\n\t/** 更新属性及子代 */\n\tupdate(props: MountProps, children: any[]): void {\n\t\tthis.refresh(() => {\n\t\t\tthis.setProps(props);\n\t\t\tthis.setChildren(children);\n\t\t});\n\t}\n\trequestDraw() {\n\t\tthis.markDraw(this);\n\t}\n\t_mount() {\n\t\tconst { props, parent, iRender } = this;\n\t\tconst content = draw(this.container.iRender, this._nodes);\n\t\tthis.content = content;\n\t\tconst [container, node]\n\t\t\t= iRender.mount(props, parent?.iRender);\n\t\tfor (const it of getNodes(content)) {\n\t\t\tiRender.insert(container, it);\n\t\t}\n\t\tthis.tree = [createMountedNode({\n\t\t\ttag: Tags.Value,\n\t\t\tcomponent: undefined,\n\t\t\tnode,\n\t\t\tvalue: node,\n\t\t\tchildren: [],\n\t\t})];\n\t\tthis._node = node;\n\t\tthis._container = container;\n\t}\n\t_destroy() {\n\t\tdestroy(this.content);\n\t}\n\t_unmount() {\n\t\tconst { parent, iRender } = this;\n\t\tif (parent) {\n\t\t\tunmount(parent.iRender, this.tree);\n\t\t}\n\t\tiRender.unmount(\n\t\t\tthis._container!,\n\t\t\tthis._node!,\n\t\t\tBoolean(parent),\n\t\t);\n\t\tunmount(this.iRender, this.content);\n\t}\n\t_draw() {\n\t\tconst {\n\t\t\t_drawChildren: drawChildren,\n\t\t\t_drawContainer: drawContainer,\n\t\t} = this;\n\t\tthis._drawContainer = false;\n\t\tif (drawContainer) {\n\t\t\tthis.iRender.drawContainer(\n\t\t\t\tthis._container!,\n\t\t\t\tthis._node!,\n\t\t\t\tthis.props,\n\t\t\t\tthis.parent?.iRender,\n\t\t\t);\n\t\t}\n\t\tif (this.parent && this.parent.iRender !== this.iRender) {\n\t\t\treturn;\n\t\t}\n\t\tthis._drawChildren = false;\n\t\tif (drawChildren) {\n\t\t\tthis.content = draw(\n\t\t\t\tthis.iRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.content,\n\t\t\t);\n\t\t}\n\t}\n\t_drawSelf() {\n\t\tconst {\n\t\t\t_drawChildren: drawChildren,\n\t\t\t_drawContainer: drawContainer,\n\t\t} = this;\n\t\tthis._needDraw = false;\n\t\tthis._drawChildren = false;\n\t\tthis._drawContainer = false;\n\t\tif (drawContainer) {\n\t\t\tthis.iRender.drawContainer(\n\t\t\t\tthis._container!,\n\t\t\t\tthis._node!,\n\t\t\t\tthis.props,\n\t\t\t\tthis.parent?.iRender,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\t\tif (drawChildren) {\n\t\t\tthis.content = draw(\n\t\t\t\tthis.iRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.content,\n\t\t\t);\n\t\t}\n\t}\n\tdrawSelf() {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tthis.callHook('beforeUpdate');\n\t\tmonitorable.exec(\n\t\t\tc => c && this.markDraw(this),\n\t\t\t() => this._drawSelf(),\n\t\t);\n\t\tcomplete(() => this.callHook('updated'));\n\t}\n\t/** 等待重画的项目 */\n\tprivate _awaitDraw = new Set<NeepObject>();\n\t/** 自身是否需要重绘 */\n\tprivate _needDraw = false;\n\t/** 标记需要绘制的元素 */\n\tmarkDraw(\n\t\tnObject: NeepObject,\n\t\tremove = false,\n\t) {\n\t\tif (this.parent?.iRender === this.iRender) {\n\t\t\tthis.parent.container.markDraw(nObject, remove);\n\t\t\treturn;\n\t\t}\n\t\tif (nObject === this && this.parent) {\n\t\t\tthis.parent.container.markDraw(this, remove);\n\t\t\tthis._needDraw = !remove;\n\t\t} else if (remove) {\n\t\t\tthis._awaitDraw.delete(nObject);\n\t\t} else {\n\t\t\tthis._awaitDraw.add(nObject);\n\t\t}\n\t\tthis.rootContainer.markDrawContainer(\n\t\t\tthis,\n\t\t\t!this._needDraw && !this._awaitDraw.size || this.destroyed,\n\t\t);\n\t}\n\tdrawContainer() {\n\t\tconst {\n\t\t\t_node: node,\n\t\t\t_container: container,\n\t\t\t_awaitDraw: awaitDraw,\n\t\t} = this;\n\t\tif (!node || !container) { return; }\n\t\tthis.callHook('beforeDraw');\n\t\tconst needDraw = this._needDraw;\n\t\tthis._needDraw = false;\n\t\tconst list = [...awaitDraw];\n\t\tawaitDraw.clear();\n\t\tif (needDraw) { this.drawSelf(); }\n\t\tlist.map(c => c.draw());\n\t\tthis.iRender.draw(container, node);\n\t\tcomplete(() => this.callHook('drawn'));\n\t}\n\tprivate _containers = new Set<Container>();\n\tmarkDrawContainer(\n\t\tcontainer: Container,\n\t\tremove = false,\n\t) {\n\t\tif (remove) {\n\t\t\tthis._containers.delete(container);\n\t\t} else {\n\t\t\tthis._containers.add(container);\n\t\t}\n\t\tmarkDraw(this);\n\t}\n\tdrawAll() {\n\t\tconst containers = this._containers;\n\t\tif (!containers.size) { return; }\n\t\tthis.callHook('beforeDrawAll');\n\t\tconst refs: (() => void)[] = [];\n\t\tconst completeList: (() => void)[] = [];\n\t\tsetCompleteList(completeList);\n\t\tsetRefList(refs);\n\t\tconst list = [...containers];\n\t\tcontainers.clear();\n\t\tlist.forEach(c => c.drawContainer());\n\t\tsetRefList();\n\t\trefs.forEach(r => r());\n\t\tcompleteList.forEach(r => r());\n\t\tthis.callHook('drawnAll');\n\t}\n}\n","import {\n\tMountProps,\n\tNeepElement,\n\tComponent,\n\tRootExposed,\n} from '../type';\nimport { isElement, createElement } from '../auxiliary';\nimport { isProduction } from '../constant';\nimport { devtools, getRender } from '../install';\nimport Container from './Container';\n\nexport function render(\n\te?: NeepElement | Component,\n\tp: MountProps = {},\n): RootExposed {\n\tlet params = {...p};\n\tconst container =  new Container(\n\t\tgetRender(p.type),\n\t\tparams,\n\t\te === undefined ? [] : isElement(e) ? [e] : [createElement(e)],\n\t);\n\tif (!isProduction) {\n\t\tdevtools.renderHook(container);\n\t}\n\tconst { exposed } = container;\n\tReflect.defineProperty(exposed, '$update', {\n\t\tvalue(c?: NeepElement | Component) {\n\t\t\tcontainer.setChildren(c === undefined ? []\n\t\t\t\t: isElement(c) ? [c] : [createElement(c)]);\n\t\t\treturn exposed;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tReflect.defineProperty(exposed, '$mount', {\n\t\tvalue(target?: any) {\n\t\t\tif (exposed.$mounted) { return exposed; }\n\t\t\tif (target) {\n\t\t\t\tparams.target = target;\n\t\t\t\tcontainer.setProps(params);\n\t\t\t}\n\t\t\tcontainer.mount();\n\t\t\treturn exposed;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tReflect.defineProperty(exposed, '$unmount', {\n\t\tvalue() {\n\t\t\tif (!exposed.$mounted) { return; }\n\t\t\tif (exposed.$unmounted) { return; }\n\t\t\tif (exposed.$destroyed) { return container.destroy(); }\n\t\t\tcontainer.unmount();\n\t\t\treturn;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tif (params.target) {\n\t\tcontainer.mount();\n\t}\n\treturn exposed as any as RootExposed;\n}\nexport { default as refresh } from './refresh';\n","import { Component, Render, Marks } from './type';\nimport { nameSymbol, typeSymbol, renderSymbol, componentsSymbol, configSymbol } from './symbols';\n\n/** 组件标记函数 */\nexport interface Mark {\n\t<N extends Component<any, any>>(component: N): N;\n}\n\n/** 创建组件标记函数 */\nfunction Mark<S extends keyof Marks>(\n\tsymbol: S,\n\tvalue: Component[S],\n): Mark {\n\treturn component => {\n\t\tcomponent[symbol] = value as any;\n\t\treturn component;\n\t};\n}\n/** 创建组件标记函数 */\nfunction MarkValue<S extends typeof componentsSymbol | typeof configSymbol>(\n\tsymbol: S,\n\tkey: keyof (NonNullable<Marks[typeof configSymbol]>),\n\tvalue: NonNullable<Marks[typeof componentsSymbol]>[typeof key],\n): Mark {\n\treturn component => {\n\t\tlet obj = component[symbol] as any;\n\t\tif (!obj) {\n\t\t\tobj = Object.create(null);\n\t\t\tcomponent[symbol] = obj;\n\t\t}\n\t\tobj[key] = value;\n\t\treturn component;\n\t};\n}\n\n\n/** 标记组件名称 */\nexport function mName(name: string): Mark;\nexport function mName<N extends Component<any, any>>(\n\tname: string,\n\tcomponent: N,\n): N;\nexport function mName<N extends Component<any, any>>(\n\tname: string,\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(nameSymbol, name); }\n\tcomponent[nameSymbol] = name;\n\treturn component;\n}\n\n/** 标记组件类型 */\nexport function mType(type?: 'native' | 'simple' | 'standard'): Mark;\nexport function mType<N extends Component<any, any>>(\n\ttype: 'native' | 'simple' | 'standard',\n\tcomponent: N,\n): N;\nexport function mType<N extends Component<any, any>>(\n\ttype?: 'native' | 'simple' | 'standard',\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, type); }\n\tcomponent[typeSymbol] = type;\n\treturn component;\n}\n/** 标记为简单组件 */\nexport function mSimple(): Mark;\nexport function mSimple<N extends Component<any, any>>(\n\tcomponent: N,\n): N;\nexport function mSimple<N extends Component<any, any>>(\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, 'simple'); }\n\tcomponent[typeSymbol] = 'simple';\n\treturn component;\n}\n/** 标记为原生组件 */\nexport function mNative(): Mark;\nexport function mNative<N extends Component<any, any>>(\n\tcomponent: N,\n): N;\nexport function mNative<N extends Component<any, any>>(\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, 'native'); }\n\tcomponent[typeSymbol] = 'native';\n\treturn component;\n}\n\n/** 标记独立的渲染函数 */\nexport function mRender(fn?: Marks[typeof renderSymbol]): Mark;\nexport function mRender<N extends Component<any, any>>(\n\tfn: Marks[typeof renderSymbol] | undefined,\n\tcomponent: N,\n): N;\nexport function mRender<N extends Component<any, any>>(\n\tfn?: Marks[typeof renderSymbol] | undefined,\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(renderSymbol, fn); }\n\tcomponent[renderSymbol] = fn;\n\treturn component;\n}\n\n/** 标记组件类型 */\nexport function mConfig(name: string, config: any): Mark;\nexport function mConfig<N extends Component<any, any>>(\n\tname: string, config: any,\n\tcomponent: N,\n): N;\nexport function mConfig<N extends Component<any, any>>(\n\tname: string, config: any,\n\tcomponent?: N,\n): Mark | N {\n\tconst mark = MarkValue(configSymbol, name, config);\n\tif (!component) { return mark; }\n\treturn mark(component);\n}\n/** 标记组件类型 */\nexport function mComponent(name: string, item: Component): Mark;\nexport function mComponent<N extends Component<any, any>>(\n\tname: string, item: Component,\n\tcomponent: N,\n): N;\nexport function mComponent<N extends Component<any, any>>(\n\tname: string, item: Component,\n\tcomponent?: N,\n): Mark | N {\n\tconst mark = MarkValue(componentsSymbol, name, item);\n\tif (!component) { return mark; }\n\treturn mark(component);\n}\n\nexport function create<P extends object>(\n\tc: Component<P, never>,\n): Component<P, never>;\nexport function create<\n\tP extends object = object,\n\tR extends object = object,\n>(c: Component<P, R>, r: Render<R>): Component<P, R>;\nexport function create<T extends Component<any, any>>(\n\tc: T,\n\tr?: Render,\n): T {\n\tif (typeof r === 'function') {\n\t\tc[renderSymbol] = r;\n\t}\n\treturn c;\n}\n\nexport function mark<N extends Component<any, any>>(\n\tcomponent: N,\n\t...marks: Mark[]\n): N {\n\tfor (const m of marks) { m(component); }\n\treturn component;\n}\n"],"names":["version","mode","isProduction","getEventName","k","substr","test","EventEmitter","update","emitter","events","newHandles","n","Object","keys","fn","push","on","updateInProps","props","custom","addEvent","entName","listener","event","f","names","Array","isArray","p","_names","constructor","Set","create","emit","name","Reflect","defineProperty","get","monitorable","markRead","configurable","safeify","markChange","add","removed","delete","size","filter","updateHandles","eventCancelHandles","_cancelHandles","oldHandles","clear","forEach","list","handles","NeepError","Error","message","tag","assert","v","value","computed","isValue","encase","recover","installMonitorable","api","nextFrameApi","nextFrame","renders","getRender","type","default","addRender","render","install","installRender","devtools","renderHook","installDevtools","tools","apis","components","register","component","ScopeSlot","SlotRender","Slot","Value","Container","Deliver","Template","Fragment","current","setCurrent","entity","oldEntity","$_valueIndex","ret","$_values","length","checkCurrent","initOnly","created","constructors","initContext","context","exposed","addContextConstructor","hooks","setHook","id","hook","$_hooks","set","callHook","watch","cb","stop","s","useValue","index","values","undefined","setValue","obj","opt","includes","enumerable","expose","deliver","delivered","isElementSymbol","Symbol","for","typeSymbol","nameSymbol","renderSymbol","componentsSymbol","configSymbol","isElement","createElement","attrs","children","node","key","slot","ref","Tags","argv","args","nCmd","exec","elements","concat","simple","label","setLabel","l","getLabel","text","color","auxiliary","Life","Element","Dev","Constant","State","setAuxiliary","defineAuxiliary","ids","Nodes","IdMap","Map","createMountedNode","recoveryMountedNode","recursive2iterable","it","refList","setRefList","setRef","isRemove","getLastNode","tree","getFirstNode","getNodes","unmount","iRender","e","remove","replace","newTree","oldTree","next","parent","insert","updateList","source","createItem","newList","mountedMap","src","findIndex","old","item","updateItem","splice","t","has","last","i","o","updateAll","Math","min","max","createList","all","draw","createValue","createAll","isNode","RegExp","String","Date","toISOString","placeholder","map","mount","getSlots","slots","native","nativeList","ownKeys","el","renderSlots","createSlots","inserted","setSlots","updateProps","oldProps","define","newKeys","getComponents","Boolean","execSimple","nObject","slotMap","childNodes","refresh","result","nodes","renderNode","execSlot","slotName","findComponent","globalComponents","newDelivered","$__neep__delivered","normalize","delayedRefresh","objectSet","wait","run","asyncRefresh","async","createExposed","cfg","$parent","$component","$isContainer","$created","$destroyed","destroyed","$mounted","mounted","$unmounted","unmounted","completeList","setCompleteList","complete","createEntity","isContainer","writable","h","bind","config","NeepObject","container","parentDelivered","canRefresh","_delayedRefresh","needRefresh","_needRefresh","requestDraw","_refreshing","_render","_nodes","convert","_update","_destroy","destroy","__executed_destroy","_mount","__executed_mount","c","_cancelDrawMonitor","_unmount","__executed_mounted","_draw","nativeNodes","createContext","initRender","changed","resultOnly","createExecutable","stopRender","Entity","assign","_shadow","_stopRender","markDraw","shadowTree","nativeTree","toElement","awaitDraw","requested","drawAll","rootContainer","setChildren","_drawChildren","setProps","_drawContainer","content","_node","_container","drawChildren","drawContainer","_drawSelf","_needDraw","drawSelf","_awaitDraw","markDrawContainer","needDraw","_containers","containers","refs","r","params","target","Mark","symbol","MarkValue","mName","mType","mSimple","mNative","mRender","mConfig","mark","mComponent","marks","m"],"mappings":"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"}