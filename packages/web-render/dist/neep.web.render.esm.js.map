{"version":3,"file":"neep.web.render.esm.js","sources":["../src/install.ts","../src/update/id.ts","../../core/src/render/recursive.ts","../src/update/class.ts","../src/update/style.ts","../src/update/attr.ts","../src/update/event.ts","../src/update/index.ts","../src/nextFrame.ts","../src/createElement.ts","../src/index.ts"],"sourcesContent":["import * as Neep from '@neep/core';\n\nexport let isValue: typeof Neep.isValue;\nexport let EventEmitter: typeof Neep.EventEmitter;\nexport let Error: typeof Neep.Error;\n\nexport default function install(auxiliary: Neep.IRenderAuxiliary) {\n\tisValue = auxiliary.isValue;\n\tEventEmitter = auxiliary.EventEmitter;\n\tError = auxiliary.Error;\n}\n","import { isValue } from '../install';\n\nexport type Id = string;\n\nfunction getId(v: any): Id | undefined {\n\tif (typeof v === 'string') { return v; }\n\tif (typeof v === 'number') { return String(v); }\n\treturn undefined;\n}\nexport default function updateId(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told?: Id,\n) {\n\tconst id = getId(isValue(props.id) ? props.id() : props.id);\n\tif (id !== old) {\n\t\tif (typeof id === 'string') {\n\t\t\tel.id = props.id;\n\t\t} else {\n\t\t\tel.removeAttribute('id');\n\t\t}\n\t}\n\treturn id;\n}\n","export interface RecursiveArray<T> extends Array<RecursiveItem<T>>{};\nexport type RecursiveItem<T> = T | RecursiveArray<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield* recursive2iterable(it);\n\t}\n}\n","import {\n\trecursive2iterable, RecursiveItem,\n} from '../../../core/src/render/recursive';\nimport { isValue } from '../install';\n\nexport type Class = Set<string>;\nfunction getClass(\n\tlist: RecursiveItem<(string | {[k: string]: any})>\n): Class | undefined {\n\tconst set = new Set<string>();\n\tfor (const v of recursive2iterable(list)) {\n\t\tif (!v) { continue; }\n\t\tif (typeof v === 'string') {\n\t\t\tfor (let k of v.split(' ').filter(Boolean)) {\n\t\t\t\tset.add(k);\n\t\t\t}\n\t\t} else if (typeof v === 'object') {\n\t\t\tfor (const k in v) {\n\t\t\t\tconst add = v[k];\n\t\t\t\tfor (let it of k.split(' ').filter(Boolean)) {\n\t\t\t\t\tset[add ? 'add' : 'delete'](it);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (!set.size) { return undefined; }\n\treturn set;\n}\nfunction update(\n\tel: Element,\n\tclasses?: Class,\n\toClasses?: Class,\n) {\n\tif (classes && oClasses) {\n\t\tconst list = el.getAttribute('class') || '';\n\t\tconst classList = new Set(list.split(' ').filter(Boolean));\n\t\toClasses.forEach(c => classList.delete(c));\n\t\tclasses.forEach(c => classList.add(c));\n\t\tel.setAttribute('class', [...classList].join(' '));\n\t} else if (classes) {\n\t\tel.setAttribute('class', [...classes].join(' '));\n\t} else if (oClasses) {\n\t\tel.removeAttribute('class');\n\t}\n}\nexport default function updateClass(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told?: Class,\n) {\n\tconst classes = getClass(isValue(props.class) ? props.class() : props.class);\n\tupdate(el, classes, old);\n\treturn classes;\n}\n","import { isValue } from '../install';\n\nexport type Style = string | Record<string, [string, 'important' | null]>;\n\nfunction getStyle(\n\tstyle: any\n): Style | undefined {\n\tif (typeof style === 'string') { return style; }\n\tif (!style) { return undefined; }\n\tif (typeof style !== 'object') { return undefined; }\n\tconst css: Record<string, [string, 'important' | null]> =\n\t\tObject.create(null);\n\tfor (let k in style) {\n\t\tlet value = style[k];\n\t\tconst key = k.substr(0, 2) === '--' ? k\n\t\t\t: k.replace(/[A-Z]/g, '-$1')\n\t\t\t\t.replace(/-+/g, '-')\n\t\t\t\t.toLowerCase();\n\t\tif (typeof value === 'number') {\n\t\t\tcss[key] = [value === 0 ? '0' : `${value}px`, null];\n\t\t} else if (value && typeof value === 'string') {\n\t\t\tconst v = value.replace(/\\!important\\s*$/, '');\n\t\t\tcss[key] = [v, v === value ? null : 'important'];\n\t\t}\n\t}\n\treturn css;\n}\n\nfunction update(\n\tcss: CSSStyleDeclaration,\n\tstyle?: Style,\n\toStyle?: Style,\n) {\n\tif (!style) {\n\t\tif (!oStyle) { return; }\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t\treturn;\n\t\t}\n\t\tfor (const k of Object.keys(oStyle)) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t\treturn;\n\t}\n\n\tif (typeof style === 'string') {\n\t\tif (style !== typeof oStyle) {\n\t\t\tcss.cssText = style;\n\t\t}\n\t\treturn;\n\t}\n\tif (!oStyle || typeof oStyle === 'string') {\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t}\n\t\tfor (const k of Object.keys(style)) {\n\t\t\tcss.setProperty(k, ...style[k]);\n\t\t}\n\t\treturn;\n\t}\n\n\tfor (const k of Object.keys(style)) {\n\t\tconst v = style[k];\n\t\tif (\n\t\t\t!oStyle[k]\n\t\t\t|| oStyle[k][0] !== v[0]\n\t\t\t|| oStyle[k][1] !== v[1]\n\t\t) {\n\t\t\tcss.setProperty(k, ...v);\n\t\t}\n\t}\n\tfor (const k of Object.keys(oStyle)) {\n\t\tif (!style[k]) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t}\n}\nexport default function updateStyle(\n\tprops: {[k: string]: any},\n\tcss: CSSStyleDeclaration,\n\told?: Style,\n\thasStyle?: boolean,\n): Style | undefined {\n\tif (!hasStyle) { return undefined; }\n\n\tconst style = getStyle(isValue(props.style) ? props.style() : props.style);\n\tupdate(css, style, old);\n\treturn style;\n}\n","import { isValue } from '../install';\n\nexport type Attrs = Record<string, string | null>;\n\nexport function setAttrs(el: Element, attrs: Record<string, string | null>) {\n\tif (el instanceof HTMLInputElement && 'checked' in attrs) {\n\n\t\tswitch(el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\tcase 'radio':\n\t\t\t\tif ((attrs.checked !== null) !== el.checked) {\n\t\t\t\t\tel.checked = attrs.checked !== null;\n\t\t\t\t}\n\t\t}\n\t}\n\tif ((\n\t\tel instanceof HTMLSelectElement \n\t\t|| el instanceof HTMLInputElement\n\t) && 'value' in attrs) {\n\t\tconst value = attrs.value || '';\n\t\tif (el.value !== value) {\n\t\t\tel.value = value;\n\t\t}\n\t}\n}\n\nfunction stringify(\n\tdata: any,\n\tisOn = false,\n): string | null | undefined {\n\tif (data === undefined || data === null) { return data; }\n\tif (isOn && typeof data === 'function') { return undefined; }\n\tif (typeof data === 'boolean') { return data ? '' : null; }\n\tif (typeof data !== 'object') { return String(data); }\n\tif (data instanceof Date) {\n\t\treturn data.toISOString();\n\t}\n\tif (data instanceof RegExp) {\n\t\treturn data.toString();\n\t}\n\treturn JSON.stringify(data);\n}\nfunction getAttrs(\n\tprops: {[k: string]: any},\n\thasStyle: boolean,\n) {\n\tconst attrs: Attrs = Object.create(null);\n\tfor (const k in props) {\n\t\tif (!/^[a-zA-Z:_][a-zA-Z0-9:_-]*$/.test(k)) { continue; }\n\t\tconst name = k\n\t\t\t.toLowerCase();\n\t\tswitch(name) {\n\t\t\tcase 'style':\n\t\t\t\tif (!hasStyle) { break; }\n\t\t\tcase 'ref':\n\t\t\tcase 'is':\n\t\t\tcase 'id':\n\t\t\tcase 'class':\n\t\t\t\tcontinue;\n\t\t}\n\t\tlet data = props[k];\n\t\tif (isValue(data)) { data = data(); }\n\t\tconst value = stringify(data, name.substr(0, 2) === 'on');\n\t\tif (value !== undefined) { attrs[name] = value; }\n\t}\n\treturn attrs;\n}\nfunction update(\n\tel: Element,\n\tattrs: Attrs,\n\told: Attrs,\n) {\n\tfor (const k of Object.keys(attrs)) {\n\t\tconst v = attrs[k];\n\t\tif (!(k in old) || old[k] !== v) {\n\t\t\tif (v === null) {\n\t\t\t\tel.removeAttribute(k);\n\t\t\t} else {\n\t\t\t\tel.setAttribute(k, v);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const k of Object.keys(old)) {\n\t\tif (!(k in attrs)) {\n\t\t\tel.removeAttribute(k);\n\t\t}\n\t}\n}\n\nexport default function updateAttrs(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told: Attrs,\n\thasStyle: boolean,\n): Attrs {\n\tconst attrs = getAttrs(props, hasStyle);\n\tupdate(el, attrs, old);\n\tsetAttrs(el, attrs);\n\treturn attrs;\n}\n","import { isValue, EventEmitter } from '../install';\nimport * as Neep from '@neep/core';\n\nexport interface Events extends Neep.EventEmitter {\n\t__eventBind: Record<string, () => void>;\n}\n\nfunction createEventEmitter(): Events {\n\tconst events: Events = new EventEmitter as Events;\n\tevents.__eventBind = Object.create(null);\n\treturn events;\n}\n\n\nfunction *getElementModel(el: Element): Iterable<[string, string, (e: any) => any]> {\n\tif (el instanceof HTMLInputElement) {\n\t\tswitch(el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\tcase 'radio':\n\t\t\treturn yield [\n\t\t\t\t'checked', 'change',\n\t\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).checked,\n\t\t\t];\n\t\t}\n\t\treturn yield [\n\t\t\t'value', 'input',\n\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLSelectElement) {\n\t\treturn yield [\n\t\t\t'value', 'select',\n\t\t\t(e: any) => (e.currentTarget as HTMLSelectElement).value,\n\t\t];\n\t}\n}\n\nfunction getEventName(k: string): string {\n\tif (k.substr(0, 2) !== 'on') { return ''; }\n\tlet n = k.substr(2);\n\tif (n[0] === ':' || n[0] === '-') { return ''; }\n\treturn n;\n}\n\nexport default function updateEvent(\n\tprops: {[k: string]: any},\n\tel: Element,\n\tevent = createEventEmitter(),\n): Events {\n\tevent.updateInProps(props, addEvent => {\n\t\tfor (const k in props) {\n\t\t\tconst f = props[k];\n\t\t\tif (typeof f !== 'function') { continue; }\n\t\t\tconst name = getEventName(k);\n\t\t\tif (!name) { continue; }\n\t\t\taddEvent(name, f);\n\t\t}\n\t\tfor (const [prop, name, t] of getElementModel(el)) {\n\t\t\tconst value = props[prop];\n\t\t\tif (isValue(value)) {\n\t\t\t\taddEvent(name, e => value(t(e)));\n\t\t\t}\n\t\t}\n\t});\n\n\tconst names = new Set(event.names.map(String));\n\tconst eventBind = event.__eventBind;\n\tfor (const k of Object.keys(eventBind)) {\n\t\tif (names.has(k)) { continue; }\n\t\teventBind[k]();\n\t\tdelete eventBind[k];\n\t}\n\tconst {emit} = event;\n\tfor (const k of names) {\n\t\tif (k in eventBind) { continue; }\n\t\tconst f = (...p: any[]) => emit(k, ...p);\n\t\tel.addEventListener(k, f);\n\t\teventBind[k] = () => {\n\t\t\tel.removeEventListener(k, f);\n\t\t};\n\t}\n\treturn event;\n}\n","import updateId, { Id } from './id';\nimport updateClass, { Class } from './class';\nimport updateStyle, { Style } from './style';\nimport updateAttrs, { Attrs } from './attr';\nimport updateEvent, { Events } from './event';\n\nconst PropsMap = new WeakMap<Element, {\n\tid?: Id;\n\tclasses?: Class;\n\tstyle?: Style;\n\tattrs: Attrs;\n\tevent?: Events;\n}>();\n\nexport default function update(\n\tel: Element,\n\tprops: {[k: string]: any},\n) {\n\tconst css = (el as any).style;\n\tconst hasStyle = css instanceof CSSStyleDeclaration;\n\tconst old = PropsMap.get(el) || { attrs: {} };\n\n\tconst id = updateId(props, el, old.id);\n\tconst classes = updateClass(props, el, old.classes);\n\tconst style = updateStyle(props, css, old.style, hasStyle);\n\tconst attrs = updateAttrs(props, el, old.attrs, hasStyle);\n\tconst event = updateEvent(props, el, old.event);\n\tPropsMap.set(el, { id, classes, style, attrs, event });\n\treturn el;\n}\n","let list: (() => void)[] | undefined;\nexport default function nextFrame(f: () => void) {\n\tif (list) {\n\t\tlist.push(f);\n\t\treturn;\n\t}\n\tlist = [f];\n\twindow.requestAnimationFrame(() => {\n\t\tconst fs = list;\n\t\tlist = undefined;\n\t\tif (!fs) { return; }\n\t\tfs.forEach(f => f());\n\t});\n}","const xmlnsMap: Record<string, string> = {\n\tsvg: 'http://www.w3.org/2000/svg',\n\thtml: 'http://www.w3.org/1999/xhtml',\n\tmathml: 'http://www.w3.org/1998/Math/MathML',\n};\nconst SVGTags = new Set([\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'script',\n\t'set',\n\t'stop',\n\t'style',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'title',\n\t'tref',\n\t'tspan',\n\t'use',\n\t'view',\n\t'vkern',\n]);\nconst MathMLTags = new Set([\n\t'maction',\n\t'math',\n\t'menclose',\n\t'merror',\n\t'mfenced',\n\t'mfrac',\n\t'mglyph',\n\t'mi',\n\t'mlabeledtr',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics',\n]);\n\nexport default function createElement(tagname: string, namespace?: string) {\n\tconst res = /^([a-z][a-z0-9-]*):([a-z0-9-]+)$/i.exec(tagname);\n\tconst tag = res ? res[2] : tagname;\n\tconst ns = (namespace || res?.[1]\n\t\t|| SVGTags.has(tag.toLowerCase()) && 'svg'\n\t\t|| MathMLTags.has(tag.toLowerCase()) && 'mathml' || '').toLowerCase();\n\tif (!ns) {\n\t\treturn document.createElement(tag);\n\t}\n\treturn document.createElementNS(\n\t\tns in xmlnsMap && xmlnsMap[ns] || ns,\n\t\ttag,\n\t);\n}\n","import {\n\tIRender,\n\tNativeNode,\n\tNativeText,\n\tNativePlaceholder,\n\tNativeComponent,\n\tNativeShadow,\n\tNativeContainer,\n\tNativeElement,\n} from '@neep/core';\nimport update from './update';\nimport nextFrame from './nextFrame';\nimport createElement from './createElement';\nimport install from './install';\n\nconst render: IRender = {\n\tinstall,\n\ttype: 'web',\n\tnextFrame,\n\tisNode(v): v is NativeNode {\n\t\treturn v instanceof Node;\n\t},\n\tmount({target, class: className, style, tag}, parent) {\n\t\tif (!(\n\t\t\ttypeof tag === 'string' &&\n\t\t\t/^[a-z][a-z0-9]*(?:\\-[a-z0-9]+)?(?:\\:[a-z0-9]+(?:\\-[a-z0-9]+)?)?$/i.test(tag)\n\t\t)) {\n\t\t\ttag = 'div';\n\t\t}\n\t\tconst container = render.create(tag, { class: className, style });\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (target instanceof Element) {\n\t\t\ttarget.appendChild(container as any);\n\t\t\tif (parent) {\n\t\t\t\treturn [container, parent.placeholder] as any;\n\t\t\t}\n\t\t\treturn [container, container];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\tdocument.body.appendChild(container as any);\n\t\t\treturn [container, container] as any;\n\t\t}\n\t\treturn [container, container] as any;\n\t},\n\tunmount(container, node, removed) {\n\t\tif (container === node && removed) { return; }\n\t\t(container as any as Element).remove();\n\t},\n\tdrawContainer(container, node, {target, class: className, style, tag}, parent) {\n\t\trender.update(container as NativeElement, { class: className, style });\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (parent !== render && !(target instanceof Element)) {\n\t\t\ttarget = document.body;\n\t\t}\n\t\tconst oldTarget = parent === render && container === node ? undefined : render.parent(node);\n\t\tif (oldTarget === target) {\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\ttarget.appendChild(container);\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (!oldTarget) {\n\t\t\tconst newNode = parent.placeholder();\n\t\t\tconst pNode = parent.parent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insert(pNode, newNode as any, node);\n\t\t\t\trender.remove(node);\n\t\t\t}\n\t\t\treturn [container, newNode];\n\t\t}\n\t\tif (!target) {\n\t\t\tconst pNode = parent.parent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insert(pNode, container, node);\n\t\t\t\trender.remove(node);\n\t\t\t}\n\t\t\treturn [container, container];\n\n\t\t}\n\t\ttarget.appendChild(node);\n\t\treturn [container, node];\n\t},\n\tdraw() {},\n\n\tcreate(tag, props) {\n\t\treturn update(createElement(tag), props) as any;\n\t},\n\ttext(text: string): NativeText {\n\t\treturn document.createTextNode(text) as any;\n\t},\n\tplaceholder(): NativePlaceholder {\n\t\treturn document.createComment('') as any;\n\t},\n\tcomponent(): [NativeComponent, NativeShadow] {\n\t\tconst node = createElement('neep-component');\n\t\treturn [node, node.attachShadow({ mode: 'open' })] as any;\n\t},\n\n\tparent(node: NativeNode): NativeContainer | null {\n\t\treturn (node as any).parentNode as NativeContainer | null;\n\t},\n\tnext(node: NativeNode): NativeNode | null {\n\t\treturn (node as any).nextSibling as NativeContainer | null;\n\t},\n\tupdate(node, props): void {\n\t\tupdate(node as any, props);\n\t},\n\tinsert(\n\t\tparent: NativeContainer,\n\t\tnode: NativeNode,\n\t\tnext: NativeNode | null = null,\n\t): void {\n\t\t(parent as any).insertBefore(node, next);\n\t},\n\tremove(node: NativeNode): void {\n\t\tconst p = render.parent(node);\n\t\tif (!p) { return; }\n\t\t(p as any).removeChild(node);\n\t},\n};\n\nexport default render;\n"],"names":["isValue","EventEmitter","Error","install","auxiliary","getId","v","String","undefined","updateId","props","el","old","id","removeAttribute","recursive2iterable","list","Array","isArray","it","getClass","set","Set","k","split","filter","Boolean","add","size","update","classes","oClasses","getAttribute","classList","forEach","c","delete","setAttribute","join","updateClass","class","getStyle","style","css","Object","create","value","key","substr","replace","toLowerCase","oStyle","cssText","keys","removeProperty","setProperty","updateStyle","hasStyle","setAttrs","attrs","HTMLInputElement","type","checked","HTMLSelectElement","stringify","data","isOn","Date","toISOString","RegExp","toString","JSON","getAttrs","test","name","updateAttrs","createEventEmitter","events","__eventBind","getElementModel","e","currentTarget","getEventName","n","updateEvent","event","updateInProps","addEvent","f","prop","t","names","map","eventBind","has","emit","p","addEventListener","removeEventListener","PropsMap","WeakMap","CSSStyleDeclaration","get","nextFrame","push","window","requestAnimationFrame","fs","xmlnsMap","svg","html","mathml","SVGTags","MathMLTags","createElement","tagname","namespace","res","exec","tag","ns","document","createElementNS","render","isNode","Node","mount","target","className","parent","container","querySelector","Element","appendChild","placeholder","body","unmount","node","removed","remove","drawContainer","oldTarget","newNode","pNode","insert","draw","text","createTextNode","createComment","component","attachShadow","mode","parentNode","next","nextSibling","insertBefore","removeChild"],"mappings":"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"}