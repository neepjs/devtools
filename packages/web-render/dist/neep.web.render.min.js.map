{"version":3,"file":"neep.web.render.min.js","sources":["../src/install.ts","../src/update/id.ts","../src/update/class.ts","../../core/src/render/recursive.ts","../src/update/style.ts","../src/update/attr.ts","../src/update/event.ts","../src/update/index.ts","../src/nextFrame.ts","../src/createElement.ts","../src/index.ts","../src/browser.ts"],"sourcesContent":["import * as Neep from '@neep/core';\n\nexport let isValue: typeof Neep.isValue;\nexport let EventEmitter: typeof Neep.EventEmitter;\nexport let Error: typeof Neep.Error;\n\nexport default function install(auxiliary: Neep.IRenderAuxiliary) {\n\tisValue = auxiliary.isValue;\n\tEventEmitter = auxiliary.EventEmitter;\n\tError = auxiliary.Error;\n}\n","import { isValue } from '../install';\n\nexport type Id = string;\n\nfunction getId(v: any): Id | undefined {\n\tif (typeof v === 'string') { return v; }\n\tif (typeof v === 'number') { return String(v); }\n\treturn undefined;\n}\nexport default function updateId(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told?: Id,\n) {\n\tconst id = getId(isValue(props.id) ? props.id() : props.id);\n\tif (id !== old) {\n\t\tif (typeof id === 'string') {\n\t\t\tel.id = props.id;\n\t\t} else {\n\t\t\tel.removeAttribute('id');\n\t\t}\n\t}\n\treturn id;\n}\n","import {\n\trecursive2iterable, RecursiveItem,\n} from '../../../core/src/render/recursive';\nimport { isValue } from '../install';\n\nexport type Class = Set<string>;\nfunction getClass(\n\tlist: RecursiveItem<(string | {[k: string]: any})>\n): Class | undefined {\n\tconst set = new Set<string>();\n\tfor (const v of recursive2iterable(list)) {\n\t\tif (!v) { continue; }\n\t\tif (typeof v === 'string') {\n\t\t\tfor (let k of v.split(' ').filter(Boolean)) {\n\t\t\t\tset.add(k);\n\t\t\t}\n\t\t} else if (typeof v === 'object') {\n\t\t\tfor (const k in v) {\n\t\t\t\tconst add = v[k];\n\t\t\t\tfor (let it of k.split(' ').filter(Boolean)) {\n\t\t\t\t\tset[add ? 'add' : 'delete'](it);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (!set.size) { return undefined; }\n\treturn set;\n}\nfunction update(\n\tel: Element,\n\tclasses?: Class,\n\toClasses?: Class,\n) {\n\tif (classes && oClasses) {\n\t\tconst list = el.getAttribute('class') || '';\n\t\tconst classList = new Set(list.split(' ').filter(Boolean));\n\t\toClasses.forEach(c => classList.delete(c));\n\t\tclasses.forEach(c => classList.add(c));\n\t\tel.setAttribute('class', [...classList].join(' '));\n\t} else if (classes) {\n\t\tel.setAttribute('class', [...classes].join(' '));\n\t} else if (oClasses) {\n\t\tel.removeAttribute('class');\n\t}\n}\nexport default function updateClass(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told?: Class,\n) {\n\tconst classes = getClass(isValue(props.class) ? props.class() : props.class);\n\tupdate(el, classes, old);\n\treturn classes;\n}\n","export interface RecursiveArray<T> extends Array<RecursiveItem<T>>{};\nexport type RecursiveItem<T> = T | RecursiveArray<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield* recursive2iterable(it);\n\t}\n}\n","import { isValue } from '../install';\n\nexport type Style = string | Record<string, [string, 'important' | null]>;\n\nfunction getStyle(\n\tstyle: any\n): Style | undefined {\n\tif (typeof style === 'string') { return style; }\n\tif (!style) { return undefined; }\n\tif (typeof style !== 'object') { return undefined; }\n\tconst css: Record<string, [string, 'important' | null]> =\n\t\tObject.create(null);\n\tfor (let k in style) {\n\t\tlet value = style[k];\n\t\tconst key = k.substr(0, 2) === '--' ? k\n\t\t\t: k.replace(/[A-Z]/g, '-$1')\n\t\t\t\t.replace(/-+/g, '-')\n\t\t\t\t.toLowerCase();\n\t\tif (typeof value === 'number') {\n\t\t\tcss[key] = [value === 0 ? '0' : `${value}px`, null];\n\t\t} else if (value && typeof value === 'string') {\n\t\t\tconst v = value.replace(/\\!important\\s*$/, '');\n\t\t\tcss[key] = [v, v === value ? null : 'important'];\n\t\t}\n\t}\n\treturn css;\n}\n\nfunction update(\n\tcss: CSSStyleDeclaration,\n\tstyle?: Style,\n\toStyle?: Style,\n) {\n\tif (!style) {\n\t\tif (!oStyle) { return; }\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t\treturn;\n\t\t}\n\t\tfor (const k of Object.keys(oStyle)) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t\treturn;\n\t}\n\n\tif (typeof style === 'string') {\n\t\tif (style !== typeof oStyle) {\n\t\t\tcss.cssText = style;\n\t\t}\n\t\treturn;\n\t}\n\tif (!oStyle || typeof oStyle === 'string') {\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t}\n\t\tfor (const k of Object.keys(style)) {\n\t\t\tcss.setProperty(k, ...style[k]);\n\t\t}\n\t\treturn;\n\t}\n\n\tfor (const k of Object.keys(style)) {\n\t\tconst v = style[k];\n\t\tif (\n\t\t\t!oStyle[k]\n\t\t\t|| oStyle[k][0] !== v[0]\n\t\t\t|| oStyle[k][1] !== v[1]\n\t\t) {\n\t\t\tcss.setProperty(k, ...v);\n\t\t}\n\t}\n\tfor (const k of Object.keys(oStyle)) {\n\t\tif (!style[k]) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t}\n}\nexport default function updateStyle(\n\tprops: {[k: string]: any},\n\tcss: CSSStyleDeclaration,\n\told?: Style,\n\thasStyle?: boolean,\n): Style | undefined {\n\tif (!hasStyle) { return undefined; }\n\n\tconst style = getStyle(isValue(props.style) ? props.style() : props.style);\n\tupdate(css, style, old);\n\treturn style;\n}\n","import { isValue } from '../install';\n\nexport type Attrs = Record<string, string | null>;\n\nexport function setAttrs(el: Element, attrs: Record<string, string | null>) {\n\tif (el instanceof HTMLInputElement && 'checked' in attrs) {\n\n\t\tswitch(el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\tcase 'radio':\n\t\t\t\tif ((attrs.checked !== null) !== el.checked) {\n\t\t\t\t\tel.checked = attrs.checked !== null;\n\t\t\t\t}\n\t\t}\n\t}\n\tif ((\n\t\tel instanceof HTMLSelectElement \n\t\t|| el instanceof HTMLInputElement\n\t) && 'value' in attrs) {\n\t\tconst value = attrs.value || '';\n\t\tif (el.value !== value) {\n\t\t\tel.value = value;\n\t\t}\n\t}\n}\n\nfunction stringify(\n\tdata: any,\n\tisOn = false,\n): string | null | undefined {\n\tif (data === undefined || data === null) { return data; }\n\tif (isOn && typeof data === 'function') { return undefined; }\n\tif (typeof data === 'boolean') { return data ? '' : null; }\n\tif (typeof data !== 'object') { return String(data); }\n\tif (data instanceof Date) {\n\t\treturn data.toISOString();\n\t}\n\tif (data instanceof RegExp) {\n\t\treturn data.toString();\n\t}\n\treturn JSON.stringify(data);\n}\nfunction getAttrs(\n\tprops: {[k: string]: any},\n\thasStyle: boolean,\n) {\n\tconst attrs: Attrs = Object.create(null);\n\tfor (const k in props) {\n\t\tif (/^(n|on|bind|slot)[:-]/.test(k)) { continue; }\n\t\tif (!/^[a-zA-Z:_][a-zA-Z0-9:_-]*$/.test(k)) { continue; }\n\t\tconst name = k\n\t\t\t.toLowerCase();\n\t\tswitch(name) {\n\t\t\tcase 'style':\n\t\t\t\tif (!hasStyle) { break; }\n\t\t\tcase 'ref':\n\t\t\tcase 'is':\n\t\t\tcase 'id':\n\t\t\tcase 'class':\n\t\t\t\tcontinue;\n\t\t}\n\t\tlet data = props[k];\n\t\tif (isValue(data)) { data = data(); }\n\t\tconst value = stringify(data, name.substr(0, 2) === 'on');\n\t\tif (value !== undefined) { attrs[name] = value; }\n\t}\n\treturn attrs;\n}\nfunction update(\n\tel: Element,\n\tattrs: Attrs,\n\told: Attrs,\n) {\n\tfor (const k of Object.keys(attrs)) {\n\t\tconst v = attrs[k];\n\t\tif (!(k in old) || old[k] !== v) {\n\t\t\tif (v === null) {\n\t\t\t\tel.removeAttribute(k);\n\t\t\t} else {\n\t\t\t\tel.setAttribute(k, v);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const k of Object.keys(old)) {\n\t\tif (!(k in attrs)) {\n\t\t\tel.removeAttribute(k);\n\t\t}\n\t}\n}\n\nexport default function updateAttrs(\n\tprops: {[k: string]: any},\n\tel: Element,\n\told: Attrs,\n\thasStyle: boolean,\n): Attrs {\n\tconst attrs = getAttrs(props, hasStyle);\n\tupdate(el, attrs, old);\n\tsetAttrs(el, attrs);\n\treturn attrs;\n}\n","import { isValue, EventEmitter } from '../install';\nimport * as Neep from '@neep/core';\n\nexport interface Events extends Neep.EventEmitter {\n\t__eventBind: Record<string, () => void>;\n}\n\nfunction createEventEmitter(): Events {\n\tconst events: Events = new EventEmitter as Events;\n\tevents.__eventBind = Object.create(null);\n\treturn events;\n}\n\n\nfunction *getElementModel(el: Element): Iterable<[string, string, (e: any) => any]> {\n\tif (el instanceof HTMLInputElement) {\n\t\tswitch(el.type.toLowerCase()) {\n\t\t\tcase 'checkbox':\n\t\t\tcase 'radio':\n\t\t\treturn yield [\n\t\t\t\t'checked', 'change',\n\t\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).checked,\n\t\t\t];\n\t\t}\n\t\treturn yield [\n\t\t\t'value', 'input',\n\t\t\t(e: any) => (e.currentTarget as HTMLInputElement).value,\n\t\t];\n\t}\n\tif (el instanceof HTMLSelectElement) {\n\t\treturn yield [\n\t\t\t'value', 'select',\n\t\t\t(e: any) => (e.currentTarget as HTMLSelectElement).value,\n\t\t];\n\t}\n}\n\nfunction getEventName(k: string): string {\n\tif (k.substr(0, 2) !== 'on') { return ''; }\n\tlet n = k.substr(2);\n\tif (n[0] === ':' || n[0] === '-') { return ''; }\n\treturn n;\n}\n\nexport default function updateEvent(\n\tprops: {[k: string]: any},\n\tel: Element,\n\tevent = createEventEmitter(),\n): Events {\n\tevent.updateInProps(props, addEvent => {\n\t\tfor (const k in props) {\n\t\t\tconst f = props[k];\n\t\t\tif (typeof f !== 'function') { continue; }\n\t\t\tconst name = getEventName(k);\n\t\t\tif (!name) { continue; }\n\t\t\taddEvent(name, f);\n\t\t}\n\t\tfor (const [prop, name, t] of getElementModel(el)) {\n\t\t\tconst value = props[prop];\n\t\t\tif (isValue(value)) {\n\t\t\t\taddEvent(name, e => value(t(e)));\n\t\t\t}\n\t\t}\n\t});\n\n\tconst names = new Set(event.names.map(String));\n\tconst eventBind = event.__eventBind;\n\tfor (const k of Object.keys(eventBind)) {\n\t\tif (names.has(k)) { continue; }\n\t\teventBind[k]();\n\t\tdelete eventBind[k];\n\t}\n\tconst {emit} = event;\n\tfor (const k of names) {\n\t\tif (k in eventBind) { continue; }\n\t\tconst f = (...p: any[]) => emit(k, ...p);\n\t\tel.addEventListener(k, f);\n\t\teventBind[k] = () => {\n\t\t\tel.removeEventListener(k, f);\n\t\t};\n\t}\n\treturn event;\n}\n","import updateId, { Id } from './id';\nimport updateClass, { Class } from './class';\nimport updateStyle, { Style } from './style';\nimport updateAttrs, { Attrs } from './attr';\nimport updateEvent, { Events } from './event';\n\nconst PropsMap = new WeakMap<Element, {\n\tid?: Id;\n\tclasses?: Class;\n\tstyle?: Style;\n\tattrs: Attrs;\n\tevent?: Events;\n}>();\n\nexport default function update(\n\tel: Element,\n\tprops: {[k: string]: any},\n) {\n\tconst css = (el as any).style;\n\tconst hasStyle = css instanceof CSSStyleDeclaration;\n\tconst old = PropsMap.get(el) || { attrs: {} };\n\n\tconst id = updateId(props, el, old.id);\n\tconst classes = updateClass(props, el, old.classes);\n\tconst style = updateStyle(props, css, old.style, hasStyle);\n\tconst attrs = updateAttrs(props, el, old.attrs, hasStyle);\n\tconst event = updateEvent(props, el, old.event);\n\tPropsMap.set(el, { id, classes, style, attrs, event });\n\treturn el;\n}\n","let list: (() => void)[] | undefined;\nexport default function nextFrame(f: () => void) {\n\tif (list) {\n\t\tlist.push(f);\n\t\treturn;\n\t}\n\tlist = [f];\n\twindow.requestAnimationFrame(() => {\n\t\tconst fs = list;\n\t\tlist = undefined;\n\t\tif (!fs) { return; }\n\t\tfs.forEach(f => f());\n\t});\n}","const xmlnsMap: Record<string, string> = {\n\tsvg: 'http://www.w3.org/2000/svg',\n\thtml: 'http://www.w3.org/1999/xhtml',\n\tmathml: 'http://www.w3.org/1998/Math/MathML',\n};\nconst SVGTags = new Set([\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'script',\n\t'set',\n\t'stop',\n\t'style',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'title',\n\t'tref',\n\t'tspan',\n\t'use',\n\t'view',\n\t'vkern',\n]);\nconst MathMLTags = new Set([\n\t'maction',\n\t'math',\n\t'menclose',\n\t'merror',\n\t'mfenced',\n\t'mfrac',\n\t'mglyph',\n\t'mi',\n\t'mlabeledtr',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics',\n]);\n\nexport default function createElement(tagname: string, namespace?: string) {\n\tconst res = /^([a-z][a-z0-9-]*):([a-z0-9-]+)$/i.exec(tagname);\n\tconst tag = res ? res[2] : tagname;\n\tconst ns = (namespace || res?.[1]\n\t\t|| SVGTags.has(tag.toLowerCase()) && 'svg'\n\t\t|| MathMLTags.has(tag.toLowerCase()) && 'mathml' || '').toLowerCase();\n\tif (!ns) {\n\t\treturn document.createElement(tag);\n\t}\n\treturn document.createElementNS(\n\t\tns in xmlnsMap && xmlnsMap[ns] || ns,\n\t\ttag,\n\t);\n}\n","import {\n\tIRender,\n\tNativeNode,\n\tNativeText,\n\tNativePlaceholder,\n\tNativeComponent,\n\tNativeShadow,\n\tNativeContainer,\n\tNativeElement,\n} from '@neep/core';\nimport update from './update';\nimport nextFrame from './nextFrame';\nimport createElement from './createElement';\nimport install from './install';\n\nconst render: IRender = {\n\tinstall,\n\ttype: 'web',\n\tnextFrame,\n\tisNode(v): v is NativeNode {\n\t\treturn v instanceof Node;\n\t},\n\tmount({target, class: className, style, tag}, parent) {\n\t\tif (!(\n\t\t\ttypeof tag === 'string' &&\n\t\t\t/^[a-z][a-z0-9]*(?:\\-[a-z0-9]+)?(?:\\:[a-z0-9]+(?:\\-[a-z0-9]+)?)?$/i.test(tag)\n\t\t)) {\n\t\t\ttag = 'div';\n\t\t}\n\t\tconst container = render.create(tag, { class: className, style });\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (target instanceof Element) {\n\t\t\ttarget.appendChild(container as any);\n\t\t\tif (parent) {\n\t\t\t\treturn [container, parent.placeholder] as any;\n\t\t\t}\n\t\t\treturn [container, container];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\tdocument.body.appendChild(container as any);\n\t\t\treturn [container, container] as any;\n\t\t}\n\t\treturn [container, container] as any;\n\t},\n\tunmount(container, node, removed) {\n\t\tif (container === node && removed) { return; }\n\t\t(container as any as Element).remove();\n\t},\n\tdrawContainer(container, node, {target, class: className, style, tag}, parent) {\n\t\trender.update(container as NativeElement, { class: className, style });\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (parent !== render && !(target instanceof Element)) {\n\t\t\ttarget = document.body;\n\t\t}\n\t\tconst oldTarget = parent === render && container === node ? undefined : render.parent(node);\n\t\tif (oldTarget === target) {\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\ttarget.appendChild(container);\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (!oldTarget) {\n\t\t\tconst newNode = parent.placeholder();\n\t\t\tconst pNode = parent.parent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insert(pNode, newNode as any, node);\n\t\t\t\trender.remove(node);\n\t\t\t}\n\t\t\treturn [container, newNode];\n\t\t}\n\t\tif (!target) {\n\t\t\tconst pNode = parent.parent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insert(pNode, container, node);\n\t\t\t\trender.remove(node);\n\t\t\t}\n\t\t\treturn [container, container];\n\n\t\t}\n\t\ttarget.appendChild(node);\n\t\treturn [container, node];\n\t},\n\tdraw() {},\n\n\tcreate(tag, props) {\n\t\treturn update(createElement(tag), props) as any;\n\t},\n\ttext(text: string): NativeText {\n\t\treturn document.createTextNode(text) as any;\n\t},\n\tplaceholder(): NativePlaceholder {\n\t\treturn document.createComment('') as any;\n\t},\n\tcomponent(): [NativeComponent, NativeShadow] {\n\t\tconst node = createElement('neep-component');\n\t\treturn [node, node.attachShadow({ mode: 'open' })] as any;\n\t},\n\n\tparent(node: NativeNode): NativeContainer | null {\n\t\treturn (node as any).parentNode as NativeContainer | null;\n\t},\n\tnext(node: NativeNode): NativeNode | null {\n\t\treturn (node as any).nextSibling as NativeContainer | null;\n\t},\n\tupdate(node, props): void {\n\t\tupdate(node as any, props);\n\t},\n\tinsert(\n\t\tparent: NativeContainer,\n\t\tnode: NativeNode,\n\t\tnext: NativeNode | null = null,\n\t): void {\n\t\t(parent as any).insertBefore(node, next);\n\t},\n\tremove(node: NativeNode): void {\n\t\tconst p = render.parent(node);\n\t\tif (!p) { return; }\n\t\t(p as any).removeChild(node);\n\t},\n};\n\nexport default render;\n","import { install } from '@neep/core';\nimport render from '.';\n\ninstall({ render });\nexport { default } from '.';\n"],"names":["isValue","EventEmitter","Error","updateId","props","el","old","id","v","String","removeAttribute","getClass","list","set","Set","recursive2iterable","Array","isArray","it","k","split","filter","Boolean","add","size","updateClass","classes","class","oClasses","getAttribute","classList","forEach","c","delete","setAttribute","join","update","updateStyle","css","hasStyle","style","Object","create","value","key","substr","replace","toLowerCase","getStyle","oStyle","keys","setProperty","removeProperty","cssText","stringify","data","isOn","Date","toISOString","RegExp","toString","JSON","updateAttrs","attrs","test","name","undefined","getAttrs","HTMLInputElement","type","checked","HTMLSelectElement","setAttrs","getEventName","n","updateEvent","event","events","__eventBind","createEventEmitter","updateInProps","addEvent","f","prop","t","e","currentTarget","getElementModel","names","map","eventBind","has","emit","p","addEventListener","removeEventListener","PropsMap","WeakMap","CSSStyleDeclaration","get","xmlnsMap","svg","html","mathml","SVGTags","MathMLTags","createElement","tagname","namespace","res","exec","tag","ns","document","createElementNS","render","install","auxiliary","nextFrame","push","window","requestAnimationFrame","fs","isNode","Node","mount","target","className","parent","container","querySelector","Element","appendChild","placeholder","body","unmount","node","removed","remove","drawContainer","oldTarget","newNode","pNode","insert","draw","text","createTextNode","createComment","component","attachShadow","mode","parentNode","next","nextSibling","insertBefore","removeChild"],"mappings":"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ACA,UACA,eACA,gBACA,mBACA,SACA,WACA,gBACA,SACA,OACA,OACA,UACA,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,eACA,SACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,IACA,QACA,WACA,QACA,QACA,OACA,iBACA,SACA,OACA,WACA,gBACA,QACA,OACA,UACA,UACA,WACA,iBACA,OACA,SACA,MACA,OACA,QACA,MACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,MACA,OACA,UAEK2F,EAAa,IAAI3F,IAAI,CAC1B,UACA,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,UACA,OACA,SACA,MACA,QACA,MACA,SACA,aACA,cAGc,SAAS4F,EAAcC,EAAiBC,SAChDC,EAAM,oCAAoCC,KAAKH,GAC/CI,EAAMF,EAAMA,EAAI,GAAKF,EACrBK,GAAMJ,IAAaC,MAAAA,SAAAA,EAAM,KAC3BL,EAAQb,IAAIoB,EAAIhE,gBAAkB,OAClC0D,EAAWd,IAAIoB,EAAIhE,gBAAkB,UAAY,IAAIA,qBACpDiE,EAGEC,SAASC,gBACfF,KAAMZ,GAAYA,EAASY,IAAOA,EAClCD,GAJOE,SAASP,cAAcK,SC/G1BI,EAAkB,CACvBC,QVVc,SAAiBC,GAC/BrH,EAAUqH,EAAUrH,QACpBC,EAAeoH,EAAUpH,aACzBC,EAAQmH,EAAUnH,OUQlBmE,KAAM,MACNiD,UFjBc,SAAmBpC,GAC7BtE,EACHA,EAAK2G,KAAKrC,IAGXtE,EAAO,CAACsE,GACRsC,OAAOC,sBAAsB,WACtBC,EAAK9G,EACXA,OAAOsD,EACFwD,GACLA,EAAG3F,QAAQmD,GAAKA,SEQjByC,OAAOnH,GACCA,aAAaoH,KAErBC,OAAMC,OAACA,EAAQnG,MAAOoG,EAAhBvF,MAA2BA,EAA3BuE,IAAkCA,GAAMiB,GAE7B,iBAARjB,GACP,oEAAoE/C,KAAK+C,KAEzEA,EAAM,aAEDkB,EAAYd,EAAOzE,OAAOqE,EAAK,CAAEpF,MAAOoG,EAAWvF,MAAAA,UACnC,iBAAXsF,IACVA,EAASb,SAASiB,cAAcJ,IAE7BA,aAAkBK,SACrBL,EAAOM,YAAYH,GACfD,EACI,CAACC,EAAWD,EAAOK,aAEpB,CAACJ,EAAWA,IAEhBD,IAAWb,GACdF,SAASqB,KAAKF,YAAYH,GACnB,CAACA,EAAWA,IAEb,CAACA,EAAWA,IAEpBM,QAAQN,EAAWO,EAAMC,GACpBR,IAAcO,GAAQC,GACzBR,EAA6BS,UAE/BC,cAAcV,EAAWO,GAAMV,OAACA,EAAQnG,MAAOoG,EAAhBvF,MAA2BA,EAA3BuE,IAAkCA,GAAMiB,GACtEb,EAAO/E,OAAO6F,EAA4B,CAAEtG,MAAOoG,EAAWvF,MAAAA,IACxC,iBAAXsF,IACVA,EAASb,SAASiB,cAAcJ,IAE7BE,IAAWb,GAAYW,aAAkBK,UAC5CL,EAASb,SAASqB,YAEbM,EAAYZ,IAAWb,GAAUc,IAAcO,OAAOtE,EAAYiD,EAAOa,OAAOQ,MAClFI,IAAcd,QACV,CAACG,EAAWO,MAEhBR,IAAWb,SACdW,EAAOM,YAAYH,GACZ,CAACA,EAAWO,OAEfI,EAAW,OACTC,EAAUb,EAAOK,cACjBS,EAAQd,EAAOA,OAAOQ,UACxBM,IACH3B,EAAO4B,OAAOD,EAAOD,EAAgBL,GACrCrB,EAAOuB,OAAOF,IAER,CAACP,EAAWY,OAEff,EAAQ,OACNgB,EAAQd,EAAOA,OAAOQ,UACxBM,IACH3B,EAAO4B,OAAOD,EAAOb,EAAWO,GAChCrB,EAAOuB,OAAOF,IAER,CAACP,EAAWA,UAGpBH,EAAOM,YAAYI,GACZ,CAACP,EAAWO,IAEpBQ,SAEAtG,OAAM,CAACqE,EAAK3G,IACJgC,EAAOsE,EAAcK,GAAM3G,GAEnC6I,KAAKA,GACGhC,SAASiC,eAAeD,GAEhCZ,YAAW,IACHpB,SAASkC,cAAc,IAE/BC,kBACOZ,EAAO9B,EAAc,wBACpB,CAAC8B,EAAMA,EAAKa,aAAa,CAAEC,KAAM,WAGzCtB,OAAOQ,GACEA,EAAae,WAEtBC,KAAKhB,GACIA,EAAaiB,YAEtBrH,OAAOoG,EAAMpI,GACZgC,EAAOoG,EAAapI,IAErB2I,OACCf,EACAQ,EACAgB,EAA0B,MAEzBxB,EAAe0B,aAAalB,EAAMgB,IAEpCd,OAAOF,SACA3C,EAAIsB,EAAOa,OAAOQ,GACnB3C,GACJA,EAAU8D,YAAYnB,sBCvHjB,CAAErB,OAAAA"}