{"version":3,"file":"neep.web.full.js","sources":["../../src/core/constant.ts","../../src/core/install.ts","../../src/core/Error.ts","../../src/core/auxiliary/tags.ts","../../src/core/auxiliary/state.ts","../../src/core/helper/current.ts","../../src/core/helper/context.ts","../../src/core/hook.ts","../../src/core/auxiliary/life.ts","../../src/core/symbols.ts","../../src/core/auxiliary/element.ts","../../src/core/helper/label.ts","../../src/core/auxiliary/dev.ts","../../src/core/auxiliary/index.ts","../../src/core/render/id.ts","../../src/core/render/recursive.ts","../../src/core/render/draw.ts","../../src/core/render/slot.ts","../../src/core/render/props.ts","../../src/core/render/normalize.ts","../../src/core/render/Object.ts","../../src/core/render/Entity.ts","../../src/core/render/convert.ts","../../src/core/render/Container.ts","../../src/core/render/index.ts","../../src/core/create.ts","../../src/web/update.ts","../../src/web/index.ts","../../node_modules/monitorable/dist/monitorable.esm.js","../../src/web/full.ts"],"sourcesContent":["/**\n * Global constant\n *\n * Will be replaced by the 'rollup-plugin-replace' plug-in\n */\n\n /**\n * Neep code version\n */\nexport const version = '__VERSION__' as string;\n/**\n * Current mode\n * @enum production\n * @enum development\n */\nexport const mode = '__MODE__' as any as 'production' | 'development';\n/**\n * Is the current mode production mode\n * @description Support tree shaking\n */\nexport const isProduction = mode === 'production';\n","import * as monitorableApi from 'monitorable';\nimport { IRender } from './type';\nimport { isProduction } from './constant';\n\nimport { Devtools } from '../devtools/type';\n\nexport let monitorable: typeof monitorableApi;\n\nexport interface InstallOptions {\n\tmonitorable?: typeof monitorableApi;\n\trender?: IRender;\n\trenders?: IRender[];\n\tdevtools?: any;\n}\n\nexport const renders: Record<string, IRender>\n\t= Object.create(null);\n\n\texport function getRender(\n\ttype: string | number | IRender = ''\n\t): IRender {\n\tif (typeof type === 'object') { return type; }\n\treturn renders[type] || renders.default;\n}\n\nfunction installRender({ render, renders: list}: InstallOptions) {\n\tif (render) {\n\t\trenders[render.type] = render;\n\t\tif (!renders.default) {\n\t\t\trenders.default = render;\n\t\t}\n\t}\n\tif (Array.isArray(list)) {\n\t\tfor (const render of list) {\n\t\t\trenders[render.type] = render;\n\t\t}\n\t\tif (!renders.default) {\n\t\t\tconst [render] = list;\n\t\t\tif (render) { renders.default = render; }\n\t\t}\n\t}\n}\n\nexport const devtools: Devtools = {\n\trenderHook(){},\n};\n\nfunction installDevtools(tools?: Partial<Devtools>) {\n\tif (!tools) { return; }\n\tif (typeof tools !== 'object') { return; }\n\tconst { renderHook } = tools;\n\tif (typeof renderHook === 'function') {\n\t\tdevtools.renderHook = renderHook;\n\t}\n}\n\nexport default function install(apis: InstallOptions) {\n\tif (apis.monitorable) {\n\t\tmonitorable = apis.monitorable;\n\t}\n\tinstallRender(apis);\n\tif (!isProduction) {\n\t\tinstallDevtools(apis.devtools);\n\t}\n}\n","export default class NeepError extends Error {\n\treadonly tag: string;\n\tconstructor(message: string, tag: string = '') {\n\t\tsuper(tag ? `[${tag}] ${message}` : message);\n\t\tthis.tag = tag;\n\t}\n}\n","export const ScopeSlot = 'Neep:ScopeSlot';\nexport const SlotRender = 'Neep:SlotRender';\nexport const Slot = 'Neep:Slot';\nexport const Value = 'Neep:Value';\nexport const Container = 'Neep:Container';\nexport const Deliver = 'Neep:Deliver';\nexport const Template = 'template';\nexport const Fragment = Template;\n","/**\n * 状态管理类 API\n */\nimport { Value, Options } from 'monitorable';\nimport { monitorable } from '../install';\n\nexport function value<T>(\n\tvalue: T,\n\toptions?: boolean | Options,\n): Value<T>\nexport function value(...v: [any]) {\n\treturn monitorable.value(...v);\n}\nexport function computed<T>(\n\tgetter: () => T,\n\toptions?: boolean | Options,\n): Value<T>;\nexport function computed<T>(...v: [any]) {\n\treturn monitorable.computed(...v);\n}\nexport function isValue(v: any): v is Value<any>;\nexport function isValue(...v: [any]) {\n\treturn monitorable.isValue(...v);\n}\nexport function encase<T>(value: T, nest?: number | boolean): T;\nexport function encase<T>(...v: [any]): T {\n\treturn monitorable.encase(...v);\n}\nexport function recover<T>(v: T): T;\nexport function recover<T>(...v: [any]): T {\n\treturn monitorable.recover(...v);\n}\n","import NeepError from '../Error';\nimport { Entity } from '../type';\n\n/** 当前正在执行的对象 */\nexport let current: Entity | undefined;\nexport function setCurrent<T>(\n\tfn: () => T,\n\tentity: Entity,\n): T {\n\tconst oldEntity = current;\n\tcurrent = entity;\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tcurrent = oldEntity;\n\t}\n}\n\nexport function checkCurrent(\n\tname: string,\n\tinitOnly = false,\n): Entity {\n\tif (!current) {\n\t\tthrow new NeepError(\n\t\t\t`Function \\`${name}\\` can only be called within a cycle.`,\n\t\t\t'life',\n\t\t);\n\t}\n\tif (!initOnly) {\n\t\treturn current;\n\t}\n\tif (!current.created) {\n\t\treturn current;\n\t}\n\tthrow new NeepError(\n\t\t`Function \\`${name}\\` can only be called at initialization time.`,\n\t\t'life',\n\t);\n}\n","import { Context, ContextConstructor, Exposed } from '../type';\nimport { monitorable } from '../install';\n\nconst constructors: ContextConstructor[] = [];\nexport function initContext(\n\tcontext: Context,\n\texposed?: Exposed,\n): Context {\n\tfor (const constructor of constructors) {\n\t\tconstructor(context, exposed);\n\t}\n\treturn context;\n}\nexport function addContextConstructor(\n\tconstructor: ContextConstructor\n): void {\n\tconstructors.push(monitorable.safeify(constructor));\n}","import { monitorable } from './install';\nimport { Hook, Hooks, Entity } from './type';\nconst hooks: Record<string, Set<Hook>> = Object.create(null);\n\nexport function setHook<H extends Hooks>(\n\tid: H,\n\thook: Hook,\n\tentity?: Entity,\n):() => void;\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: Entity,\n): () => void;\n\nexport function setHook(\n\tid: string,\n\thook: Hook,\n\tentity?: Entity,\n):() => void {\n\tlet list = entity?.$_hooks || hooks;\n\tif (!list) { return () => {}; }\n\thook = monitorable.safeify(hook);\n\tlet set = list[id];\n\tif (!set) {\n\t\tset = new Set();\n\t\tlist[id] = set;\n\t}\n\tset.add(hook);\n\treturn () => set.delete(hook);\n}\n\nexport function callHook<H extends Hooks>(\n\tid: H,\n\texposed: Entity,\n): void;\nexport function callHook(id: string, exposed: Entity): void;\nexport function callHook(id: string, exposed: Entity): void {\n\tif (!exposed) { return; }\n\tfor (const hook of exposed.$_hooks[id] || []) {\n\t\thook(exposed);\n\t}\n\tfor (const hook of hooks[id] || []) {\n\t\thook(exposed);\n\t}\n}\n","/**********************************\n * 组件上下文环境专用 API\n * @description 简单组件不支持\n **********************************/\nimport { Value, WatchCallback } from 'monitorable';\nimport { Hooks, Hook } from '../type';\nimport { checkCurrent } from '../helper';\nimport { monitorable } from '../install';\nimport { setHook } from '../hook';\nimport { isValue } from './state';\n\n\n/**********************************\n * 状态管理类 API\n **********************************/\n/**\n * 监听指定值的变化\n * @description 本质是调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 被监听的值\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: Value<T>,\n\tcb: WatchCallback<T>,\n): () => void;\n/**\n * 监听指定值的变化\n * @description 本质是创建调用 Value 对象的 watch 方法\n * @description 但是通过此方法进行的观察，会在组件生命周期结束时自动停止观察\n * @description 此函数只有在初始化调用时有效\n * @param value 用于计算观测值的函数\n * @param cb    当监听的值发送变化时调用的函数\n */\nexport function watch<T>(\n\tvalue: () => T,\n\tcb: (v: T, stopped: boolean) => void,\n): () => void;\n\nexport function watch<T>(\n\tvalue: Value<T> | (() => T),\n\tcb: (v: Value<T> | T, stopped: boolean) => void\n): () => void {\n\tconst entity = checkCurrent('watch');\n\tif (typeof value !== 'function') { return () => {}; }\n\tconst stop = isValue(value)\n\t\t? value.watch(cb)\n\t\t: monitorable.computed(value).watch((v, s) => cb(v(), s));\n\tsetHook('beforeDestroy', () => stop(), entity);\n\treturn stop;\n}\n\n\n/**********************************\n * 钩子类 API\n **********************************/\n/**\n * 为当前组件注册钩子\n * @param name 钩子名称\n * @param hook 钩子\n * @param initOnly 是否仅在初始化时有效\n */\nexport function hook<H extends Hooks>(\n\tname: H,\n\thook: Hook,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: Hook,\n\tinitOnly?: boolean,\n): undefined | (() => void);\nexport function hook(\n\tname: string,\n\thook: Hook,\n\tinitOnly?: boolean,\n): undefined | (() => void) {\n\tconst entity = checkCurrent('setHook');\n\tif (initOnly && entity.created) { return undefined; }\n\treturn setHook(name, hook, entity);\n}\n\n/**********************************\n * 配置 API\n **********************************/\n\nexport function setValue<T>(\n\tobj: any,\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tif (\n\t\ttypeof name === 'string'\n\t\t&& ['$', '_'].includes(name[0])\n\t) {\n\t\treturn;\n\t}\n\tif (isValue(value) && opt) {\n\t\tReflect.defineProperty(obj, name, {\n\t\t\tget() { return value(); },\n\t\t\tset(v) { value(v); },\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t});\n\t\treturn;\n\t}\n\tif (typeof value === 'function' && opt) {\n\t\tReflect.defineProperty(obj, name, {\n\t\t\tget: value as () => T,\n\t\t\tset: typeof opt === 'function' ? opt : undefined,\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t});\n\t\treturn;\n\t}\n\tReflect.defineProperty(obj, name, {\n\t\tget() { return value; },\n\t\tconfigurable: true,\n\t\tenumerable: true,\n\t});\n}\n\n\n\n/**********************************\n * 配置 API\n **********************************/\n\n/**\n * 将 Value 导出\n * @param name 导出用的名称\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: Value<T>,\n\tmix?: boolean,\n): void;\n/**\n * 将普通值导出\n * @param name\n * @param value\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: T,\n): void;\n/**\n * 设置基于 getter 的导出\n * @param name\n * @param getter\n * @param nonModifiable\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tnonModifiable: true,\n): void;\n/**\n * 设置基于 getter/setter 的导出\n * @param name\n * @param getter\n * @param setter\n */\nexport function expose<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tsetter: (value: T) => void,\n): void;\nexport function expose<T>(\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tsetValue(checkCurrent('expose', true).exposed, name, value, opt);\n}\n\n/**********************************\n * 配置 API\n **********************************/\n\n/**\n * 将 Value 传递给子组件\n * @param name 导出用的名称\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: Value<T>,\n\tmix?: boolean,\n): void;\n/**\n * 将普通值导出\n * @param name\n * @param value\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: T,\n): void;\n/**\n * 设置基于 getter 的传递\n * @param name\n * @param getter\n * @param nonModifiable\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tnonModifiable: true,\n): void;\n/**\n * 设置基于 getter/setter 的传递\n * @param name\n * @param getter\n * @param setter\n */\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tgetter: () => T,\n\tsetter: (value: T) => void,\n): void;\nexport function deliver<T>(\n\tname: string | number | symbol,\n\tvalue: T | Value<T> | (() => T),\n\topt?: boolean | ((value: T) => void),\n): void {\n\tsetValue(checkCurrent('deliver', true).delivered, name, value, opt);\n}\n","export const isElementSymbol = Symbol.for('isNeepElement');\nexport const typeSymbol = Symbol.for('type');\nexport const nameSymbol = Symbol.for('name');\nexport const renderSymbol = Symbol.for('render');\n","import { Tag, NeepElement, Component } from '../type';\nimport { isElementSymbol, typeSymbol } from '../symbols';\nimport * as Tags from './tags';\n\n/**\n * 判读是否为元素\n */\nexport function isElement(v: any): v is NeepElement {\n\tif (!v) { return false; }\n\tif (typeof v !== 'object') { return false; }\n\treturn v[isElementSymbol] === true;\n}\n\nexport function createElement(\n\ttag: Tag,\n\tattrs?: {[key:string]: any},\n\t...children: any[]\n): NeepElement {\n\tattrs = attrs ? {...attrs} : {};\n\tconst node: NeepElement = {\n\t\t[isElementSymbol]: true,\n\t\ttag,\n\t\tchildren: [],\n\t};\n\tif ('key' in attrs) { node.key = attrs.key; }\n\tif ('slot' in attrs) { node.slot = attrs.slot; }\n\tif (typeof attrs.ref === 'function') { node.ref = attrs.ref; }\n\tif (tag === Tags.Value) {\n\t\tnode.value = attrs.value;\n\t\treturn node;\n\t}\n\tnode.children = children;\n\tif (tag === Tags.Template) { return node; }\n\tif (tag === Tags.SlotRender) {\n\t\tnode.render = attrs.render;\n\t\treturn node;\n\t}\n\tif (tag === Tags.ScopeSlot || tag === Tags.Slot) {\n\t\tconst { render, argv, args, name } = attrs;\n\t\tnode.render = render;\n\t\tnode.args = argv && [argv]\n\t\t\t|| Array.isArray(args) && args.length && args\n\t\t\t|| [{}];\n\n\t\tif (tag === Tags.ScopeSlot) {\n\t\t\tnode.props = { name };\n\t\t\treturn node;\n\t\t}\n\t}\n\tnode.on = {};\n\tnode.props = {};\n\tfor (let k in attrs) {\n\t\t/** 事件 */\n\t\tconst onInfo = /^(::|@|on:)([a-zA-Z0-9].*)$/.exec(k);\n\t\tif (onInfo) {\n\t\t\tnode.on[onInfo[2]] = attrs[k];\n\t\t\tcontinue;\n\t\t}\n\t\t// TODO: data\n\t\tconst nCmd = /^n([:-])([a-zA-Z0-9]+(?:\\.[a-zA-Z0-9]+)*)$/i.exec(k);\n\t\t/** 普通属性 */\n\t\tif (!nCmd) {\n\t\t\tnode.props[k] = attrs[k];\n\t\t\tcontinue;\n\t\t}\n\t}\n\treturn node;\n}\n\nexport interface elementIteratorOptions {\n\tsimple?: boolean | Component[] | ((c: Component) => boolean);\n}\n\nexport function elements(\n\tnode: any,\n\topt: elementIteratorOptions = {},\n): any[] {\n\tif (Array.isArray(node)) {\n\t\tconst list: any[][] = [];\n\t\tfor (let n of node) {\n\t\t\tlist.push(elements(n, opt));\n\t\t}\n\t\treturn ([] as any[]).concat(...list);\n\t}\n\tif (!isElement(node)) { return [node]; }\n\tlet { tag } = node;\n\tif (!tag) { return []; }\n\n\tif (([Tags.Template, Tags.ScopeSlot] as Tag[]).includes(tag)) {\n\t\treturn elements(node.children, opt);\n\t}\n\tif (typeof tag !== 'function') { return [node]; }\n\tif (tag[typeSymbol] !== 'simple') { return [node]; }\n\tconst { simple } = opt;\n\tif (!simple) { return [node]; }\n\tif (Array.isArray(simple)) {\n\t\tif (simple.includes(tag)) { return [node]; }\n\t} else if (typeof simple === 'function') {\n\t\tif (!simple(tag)) { return [node]; }\n\t}\n\treturn elements(node.children, opt);\n}\n","let label: [string, string] | undefined;\nexport function setLabel(l: [string, string]) {\n\tlabel = l;\n}\n\nexport function getLabel() {\n\tconst l = label;\n\tlabel = undefined;\n\treturn l;\n}\n","import { isProduction } from '../constant';\nimport { current } from '../helper';\nimport { setLabel } from '../helper/label';\n\nexport function label(text: string, color = ''): void {\n\tif (!isProduction) {\n\t\tif (!current) {\n\t\t\tsetLabel([text, color]);\n\t\t\treturn;\n\t\t}\n\t\tReflect.defineProperty(current.exposed, '$label', {\n\t\t\tvalue: [text, color],\n\t\t\tconfigurable: true,\n\t\t});\n\t}\n}\n","import * as Constant from '../constant';\nimport * as Tags from './tags';\nimport * as State from './state';\nimport * as Life from './life';\nimport * as Element from './element';\nimport * as Dev from './dev';\n\nexport * from './tags';\nexport * from './state';\nexport * from './life';\nexport * from './element';\nexport * from './dev';\n\nexport { Tags };\n\n\n/** 辅助 */\nexport interface Auxiliary extends\n\tReadonly<typeof Tags>,\n\tReadonly<typeof State>,\n\tReadonly<typeof Life>,\n\tReadonly<typeof Element>,\n\tReadonly<typeof Dev>,\n\tReadonly<typeof Constant>\n{}\n\nconst auxiliary: Auxiliary = {\n\t...Tags,\n\t...State,\n\t...Life,\n\t...Element,\n\t...Dev,\n\t...Constant,\n};\n\nexport function setAuxiliary<T>(\n\tname: string,\n\tvalue: T,\n): void {\n\tReflect.defineProperty(auxiliary, name, {\n\t\tvalue,\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n}\nexport function defineAuxiliary<T>(\n\tname: string,\n\tget: (this: Auxiliary) => T,\n): void {\n\tReflect.defineProperty(auxiliary, name, {\n\t\tget,\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t});\n}\nexport default auxiliary;\n","import { NativeNode } from '../type';\nimport { isProduction } from '../constant';\nimport { MountedNode } from './draw';\n\nlet ids = 0;\nconst Nodes: {[key: number]: MountedNode} = {};\nlet IdMap: undefined | Map<NativeNode, number>;\nif (!isProduction) {\n\tIdMap = new Map();\n}\nexport function createMountedNode(\n\tn: Omit<MountedNode, 'id'>,\n\tid?: number,\n): MountedNode {\n\tif (!isProduction) {\n\t\tid = id || ++ids;\n\t\tconst { node } = n;\n\t\tif (node && IdMap) { IdMap.set(node, id); }\n\t\treturn Nodes[id] = {...n, id};\n\t}\n\treturn {...n, id: 0};\n}\n\nexport function recoveryMountedNode(node: MountedNode): void {\n\tif (!isProduction) {\n\t\tdelete Nodes[node.id];\n\t}\n}\n\nexport function getNode(\n\tid: number | NativeNode,\n): MountedNode | undefined {\n\tif (!isProduction) {\n\t\tif (typeof id !== 'number') {\n\t\t\tid = IdMap?.get(id) || -1;\n\t\t}\n\t\treturn Nodes[id];\n\t}\n\treturn undefined;\n}\n","export interface RecursiveArray<T> extends Array<RecursiveItem<T>>{};\nexport type RecursiveItem<T> = T | RecursiveArray<T>;\n\nexport function *recursive2iterable<T>(\n\tlist: RecursiveItem<T>,\n): Iterable<T> {\n\tif (!Array.isArray(list)) {\n\t\tyield list;\n\t\treturn;\n\t}\n\tfor (const it of list) {\n\t\tyield* recursive2iterable(it);\n\t}\n}\n","import { Tags, Template } from '../auxiliary';\nimport { IRender, NativeNode, NativeElement } from '../type';\nimport { createMountedNode, recoveryMountedNode } from './id';\nimport { TreeNode } from './convert';\nimport NeepObject from './Object';\n\n\n/**\n * @description node / component / children 至少一个有效\n */\nexport interface MountedNode extends TreeNode {\n\tid: number;\n\tparent?: this;\n\tnode: undefined | NativeNode;\n}\n\n\ntype MountedNodes = MountedNode | MountedNode[]\n\t| (MountedNode | MountedNode[])[];\n\nfunction getLastNode(tree: MountedNodes): NativeNode {\n\tif (Array.isArray(tree)) {\n\t\treturn getLastNode(tree[tree.length - 1]);\n\t}\n\tconst { component, children, node } = tree;\n\tif (node) { return node; }\n\tif (component) { return getLastNode(component.tree); }\n\treturn getLastNode(children);\n}\n\nfunction getFirstNode(tree: MountedNodes): NativeNode {\n\tif (Array.isArray(tree)) { return getFirstNode(tree[0]); }\n\tconst { component, children, node } = tree;\n\tif (node) { return node; }\n\tif (component) { return getFirstNode(component.tree); }\n\treturn getFirstNode(children[0]);\n}\n\nexport function *getNodes(tree: MountedNodes): Iterable<NativeNode> {\n\tif (Array.isArray(tree)) {\n\t\tfor (const it of tree) {\n\t\t\tyield* getNodes(it);\n\t\t}\n\t\treturn;\n\t}\n\tconst { children, node, component } = tree;\n\tif (node) {\n\t\tyield node;\n\t\treturn;\n\t}\n\tif (component) {\n\t\tyield* getNodes(component.tree);\n\t\treturn;\n\t}\n\tyield* getNodes(children);\n}\n\nexport function unmount(iRender: IRender, tree: MountedNodes): void {\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(e => unmount(iRender, e));\n\t\treturn;\n\t}\n\tconst { component, children, node, ref } = tree;\n\trecoveryMountedNode(tree);\n\tif (node) {\n\t\tif (ref) { ref(node, true); }\n\t\tiRender.remove(node);\n\t\treturn;\n\t}\n\tif (component) {\n\t\tif (ref) { ref(component.exposed, true); }\n\t\tcomponent.unmount();\n\t\treturn;\n\t}\n\tunmount(iRender, children);\n}\n\n\nfunction replace<T extends MountedNode | MountedNode[]>(\n\tiRender: IRender,\n\tnewTree: T,\n\toldTree: MountedNode | MountedNode[],\n): T {\n\tconst next = getFirstNode(oldTree);\n\tif (!next) { return newTree; }\n\tconst parent = iRender.parent(next);\n\tif (!parent) { return newTree; }\n\tfor (const it of getNodes(newTree)) {\n\t\tiRender.insert(parent, it, next);\n\t}\n\tunmount(iRender, oldTree);\n\treturn newTree;\n}\n\nfunction updateList(\n\tiRender: IRender,\n\tsource: TreeNode[],\n\ttree: MountedNode | MountedNode[],\n): MountedNode[] {\n\tif (!source.length) {\n\t\tconst node = createItem(iRender, {tag: null, children: []});\n\t\treturn [replace(iRender, node, tree)];\n\t}\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: MountedNode[] = [];\n\tconst list = [...tree];\n\tconst mountedMap = new Map<MountedNode, MountedNode>();\n\tfor (const src of source) {\n\t\tconst index = list.findIndex(it =>\n\t\t\tit.tag === src.tag && it.key === src.key\n\t\t);\n\t\tif (index >= 0) {\n\t\t\tconst old = list[index];\n\t\t\tconst item = updateItem(iRender, src, old);\n\t\t\tmountedMap.set(old, item);\n\t\t\tnewList.push(item);\n\t\t\tlist.splice(index, 1);\n\t\t} else {\n\t\t\tconst item = createItem(iRender, src);\n\t\t\tnewList.push(item);\n\t\t}\n\t}\n\tif (!mountedMap.size) {\n\t\treturn replace(iRender, newList, list);\n\t}\n\tunmount(iRender, list);\n\ttree = tree.filter(t => mountedMap.has(t));\n\tconst last = getLastNode(tree[tree.length - 1]);\n\tconst parent = iRender.parent(last);\n\tif (!parent) { return newList; }\n\tlet next = iRender.next(last);\n\t// 调整次序\n\tfor(let i = newList.length - 1; i >= 0; i--) {\n\t\tconst item = newList[i];\n\t\tconst index = tree.findIndex(o => mountedMap.get(o) === item);\n\t\tif (index >= 0) {\n\t\t\tfor (const it of tree.splice(index)) {\n\t\t\t\tmountedMap.delete(it);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\tiRender.insert(parent, it, next);\n\t\t\t}\n\t\t}\n\t\tnext = getFirstNode(item) || next;\n\t}\n\treturn newList;\n}\n/**\n * 更新树\n * @param tree 已有树\n * @param source 用于替换的源\n * @param iRender Neep 对象\n */\nfunction updateAll(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n\ttree: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tlet index = 0;\n\tlet length = Math.min(source.length, source.length || 1);\n\tconst list: (MountedNode | MountedNode[])[] = [];\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tlist.push(updateList(iRender, src, tree[index]));\n\t\t} else {\n\t\t\tlist.push(updateItem(iRender, src, tree[index]));\n\t\t}\n\t}\n\tlength = Math.max(source.length, tree.length);\n\tif (tree.length > length) {\n\t\t\t// 销毁多余项\n\t\t\tfor (; index < length; index++) {\n\t\t\tunmount(iRender, tree[index]);\n\t\t}\n\t}\n\tif (source.length > length) {\n\t\t// 创建多余项\n\t\tconst last = getLastNode(list[list.length - 1]);\n\t\tconst parent = iRender.parent(last);\n\t\tconst next = iRender.next(last);\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = source[index];\n\t\t\tconst item = Array.isArray(src)\n\t\t\t\t? createList(iRender, src)\n\t\t\t\t: createItem(iRender, src);\n\t\t\tlist.push(item);\n\t\t\tif (!parent) { continue; }\n\t\t\tfor (const it of getNodes(item)) {\n\t\t\t\tiRender.insert(parent, it, next);\n\t\t\t}\n\t\t}\n\t}\n\treturn list;\n}\n\n/**\n * 更新树节点\n * @param iRender Neep 对象\n * @param tree 已有树\n * @param source 用于替换的源\n */\nfunction updateItem(\n\tiRender: IRender,\n\tsource: TreeNode,\n\ttree: MountedNode | MountedNode[],\n): MountedNode {\n\tif (Array.isArray(tree)) {\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === source.tag && it.component === source.component\n\t\t);\n\t\tif (index < 0) {\n\t\t\treturn replace(iRender, createItem(iRender, source), tree);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tunmount(iRender, all);\n\t}\n\tconst { tag, component } = source;\n\tconst ref = source.ref !== tree.ref && source.ref;\n\tif (tag !== tree.tag || component !== tree.component) {\n\t\treturn replace(iRender, createItem(iRender, source), tree);\n\t}\n\tif (!tag) { return tree; }\n\tif (typeof tag !== 'string' || tag === Tags.Container) {\n\t\tif (!component) {\n\t\t\t// TODO: ref\n\t\t\treturn createMountedNode({\n\t\t\t\t...source,\n\t\t\t\tnode: undefined,\n\t\t\t\tcomponent: undefined,\n\t\t\t\tchildren: draw(\n\t\t\t\t\tiRender,\n\t\t\t\t\tsource.children,\n\t\t\t\t\ttree.children,\n\t\t\t\t),\n\t\t\t}, tree.id);\n\t\t}\n\t\tif (ref) { ref(component.exposed); }\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent,\n\t\t\tchildren: [],\n\t\t}, tree.id);\n\t}\n\tif (tag === Tags.Value) {\n\t\tif(tree.value === source.value) {\n\t\t\tif (ref && tree.node) { ref(tree.node); }\n\t\t\treturn createMountedNode({\n\t\t\t\t...tree,\n\t\t\t\t...source,\n\t\t\t\tchildren: [],\n\t\t\t}, tree.id);\n\t\t}\n\t\treturn replace( iRender, createValue(iRender, source), tree);\n\t}\n\tif (tag === Template || tag.substr(0, 5) === 'Neep:') {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: updateAll(\n\t\t\t\tiRender,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t),\n\t\t}, tree.id);\n\t}\n\tconst { node } = tree;\n\tiRender.update(\n\t\tnode as NativeElement,\n\t\tsource.props || {},\n\t);\n\tif (ref) { ref(node!); }\n\tif (!source.children.length && !tree.children.length) {\n\t\treturn createMountedNode(\n\t\t\t{\n\t\t\t\t...tree,\n\t\t\t\t...source,\n\t\t\t\tchildren: [],\n\t\t\t},\n\t\t\ttree.id);\n\t}\n\tif (!source.children.length && tree.children.length) {\n\t\tunmount(iRender, tree.children);\n\t}\n\tif (source.children.length && !tree.children.length) {\n\t\tconst children = createAll(iRender, source.children);\n\t\tfor (const it of getNodes(children)) {\n\t\t\tiRender.insert(node as NativeElement, it);\n\t\t}\n\t\treturn createMountedNode({\n\t\t\t...tree,\n\t\t\t...source,\n\t\t\tchildren,\n\t\t}, tree.id);\n\t}\n\treturn createMountedNode({\n\t\t...tree, ...source,\n\t\tchildren: updateAll(\n\t\t\tiRender,\n\t\t\tsource.children,\n\t\t\ttree.children,\n\t\t),\n\t}, tree.id);\n}\n\nfunction createValue(\n\tiRender: IRender,\n\tsource: TreeNode,\n): MountedNode {\n\tconst { value, ref } = source;\n\tif (iRender.isNode(source.value)) {\n\t\tif (ref) { ref(value); }\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: value,\n\t\t\tchildren: [],\n\t\t\tcomponent: undefined,\n\t\t});\n\t}\n\tconst type = typeof value;\n\tlet node: NativeNode | undefined;\n\tif (\n\t\ttype === 'bigint'\n\t\t|| type === 'boolean'\n\t\t|| type === 'number'\n\t\t|| type === 'string'\n\t\t|| type === 'symbol'\n\t\t|| value instanceof RegExp\n\t) {\n\t\tnode = iRender.text(String(value));\n\t} else if (value instanceof Date) {\n\t\tnode = iRender.text(value.toISOString());\n\t} else if (type === 'object' && value) {\n\t\tnode = iRender.text(String(value));\n\t\t// TODO: 对象处理\n\t}\n\tif (!node) { node = iRender.placeholder(); }\n\tif (ref) { ref(node); }\n\treturn createMountedNode({\n\t\t...source,\n\t\tnode,\n\t\tcomponent: undefined,\n\t\tchildren: [],\n\t});\n}\n\nfunction createAll(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (!source.length) {\n\t\treturn [createMountedNode({\n\t\t\ttag: null,\n\t\t\tnode: iRender.placeholder(),\n\t\t\tcomponent: undefined,\n\t\t\tchildren: [],\n\t\t})];\n\t}\n\n\treturn source.map(item =>\n\t\tArray.isArray(item)\n\t\t\t? createList(iRender, item)\n\t\t\t: createItem(iRender, item)\n\t);\n}\n\nfunction createList(\n\tiRender: IRender,\n\tsource: TreeNode[],\n): MountedNode[] {\n\tif (source.length) {\n\t\treturn source.map(it => createItem(iRender, it));\n\t}\n\treturn [createMountedNode({\n\t\ttag: null,\n\t\tnode: iRender.placeholder(),\n\t\tcomponent: undefined,\n\t\tchildren: [],\n\t})];\n}\n\nfunction createItem(\n\tiRender: IRender,\n\tsource: TreeNode,\n): MountedNode {\n\tconst { tag, ref, component } = source;\n\tif (!tag) {\n\t\tconst node = iRender.placeholder();\n\t\tif (ref) { ref(node); }\n\t\treturn createMountedNode({\n\t\t\ttag: null,\n\t\t\tnode,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: [],\n\t\t});\n\t}\n\tif (typeof tag !== 'string' || tag === Tags.Container) {\n\t\tif (!component) {\n\t\t\t// TODO: ref\n\t\t\treturn createMountedNode({\n\t\t\t\t...source,\n\t\t\t\tnode: undefined,\n\t\t\t\tcomponent: undefined,\n\t\t\t\tchildren: draw(iRender, source.children),\n\t\t\t});\n\t\t}\n\t\tcomponent.mount();\n\t\tif (ref) { ref(component.exposed); }\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent, children: [],\n\t\t});\n\t}\n\tif (tag === Tags.Value) {\n\t\treturn createValue(iRender, source);\n\t}\n\tif (tag === Template || tag.substr(0, 5) === 'Neep:') {\n\t\t// TODO: ref\n\t\treturn createMountedNode({\n\t\t\t...source,\n\t\t\tnode: undefined,\n\t\t\tcomponent: undefined,\n\t\t\tchildren: createAll(iRender, source.children),\n\t\t});\n\t}\n\tconst node = iRender.create(tag, source.props || {});\n\tif (ref) { ref(node); }\n\tlet children: (MountedNode | MountedNode[])[] = [];\n\tif (source.children) {\n\t\tchildren = createAll(iRender, source.children);\n\t\tfor (const it of getNodes(children)) {\n\t\t\tiRender.insert(node, it);\n\t\t}\n\t}\n\treturn createMountedNode({\n\t\t...source,\n\t\tnode,\n\t\tcomponent: undefined,\n\t\tchildren,\n\t});\n}\n\nexport default function draw(\n\tiRender: IRender,\n\tsource: (TreeNode | TreeNode[])[],\n\ttree?: (MountedNode | MountedNode[])[],\n): (MountedNode | MountedNode[])[] {\n\tif (tree) {\n\t\treturn updateAll(iRender, source, tree);\n\t}\n\treturn createAll(iRender, source);\n}\n","import { NeepElement, SlotFn, Slots, IRender } from '../type';\nimport { isElement, SlotRender, ScopeSlot } from '../auxiliary';\nimport { isElementSymbol } from '../symbols';\nimport { isProduction } from '../constant';\n\n\nexport function getSlots(\n\tiRender: IRender,\n\tchildren: any[],\n\tslots: Record<string | symbol, any[]>,\n\tnative = false,\n): any[] {\n\t/** 原始对象 */\n\tconst nativeList: any[] = [];\n\tfor (const it of children) {\n\t\tif (Array.isArray(it)) {\n\t\t\tconst list: Record<string | symbol, any[]>\n\t\t\t\t= Object.create(null);\n\t\t\tnativeList.push(getSlots(iRender, it, list, native));\n\t\t\tfor (const k of Reflect.ownKeys(list) as string[]) {\n\t\t\t\tif (k in slots) {\n\t\t\t\t\tslots[k].push(list[k]);\n\t\t\t\t} else {\n\t\t\t\t\tslots[k] = [list[k]];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (native) {\n\t\t\tif (iRender.isNode(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!isElement(it)) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (it.tag !== SlotRender) {\n\t\t\t\tnativeList.push(it);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tconst slot = isElement(it) && it.slot || 'default';\n\t\tconst el = isElement(it) ? {\n\t\t\t...it, slot: undefined,\n\t\t\tprops: {...it.props, slot: undefined },\n\t\t} : it;\n\t\tif (slot in slots) {\n\t\t\tslots[slot].push(el);\n\t\t} else {\n\t\t\tslots[slot] = [el];\n\t\t}\n\t}\n\treturn nativeList;\n}\nfunction renderSlots(\n\tlist: any[],\n\t...props: any\n): any[] {\n\treturn list.map(it => {\n\t\tif (Array.isArray(it)) {\n\t\t\treturn renderSlots(it, ...props);\n\t\t}\n\t\tif (!isElement(it)) { return it; }\n\t\tif (it.tag !== SlotRender) {\n\t\t\treturn {\n\t\t\t\t...it,\n\t\t\t\tslot: undefined,\n\t\t\t} as NeepElement;\n\t\t}\n\t\tif (typeof it.render === 'function') {\n\t\t\treturn it.render(...props);\n\t\t}\n\t\treturn it.children;\n\t});\n}\nfunction createSlots(\n\tname: string,\n\tlist: any[],\n): SlotFn {\n\tconst slot = (...props: any) => ({\n\t\t[isElementSymbol]: true,\n\t\ttag: ScopeSlot,\n\t\tchildren: renderSlots(list, ...props),\n\t\tinserted: true,\n\t\tlabel: isProduction ? undefined : [`[${name}]`, '#00F'],\n\t} as NeepElement);\n\tslot.children = list;\n\treturn slot;\n}\nexport function setSlots(\n\tchildren: {[key: string]: any[]},\n\tslots: Slots = Object.create(null),\n) {\n\tfor (const k of Reflect.ownKeys(slots)) {\n\t\tif (!(k in children)) {\n\t\t\tdelete slots[k as string];\n\t\t}\n\t}\n\tfor (const k of Reflect.ownKeys(children) as string[]) {\n\t\tslots[k] = createSlots(k, children[k]);\n\t}\n\treturn slots;\n}\n","import { isValue } from '../auxiliary';\n\nexport function updateProps(\n\tobj: any,\n\tprops: any,\n\toldProps: any = {},\n\tdefine = false,\n) {\n\tconst newKeys = new Set(Reflect.ownKeys(props));\n\tfor (const k of Reflect.ownKeys(obj)) {\n\t\tif (!newKeys.has(k)) {\n\t\t\tdelete obj[k];\n\t\t}\n\t}\n\tif (!define) {\n\t\tfor (const k of newKeys) {\n\t\t\tobj[k] = props[k];\n\t\t}\n\t\treturn obj;\n\t}\n\tfor (const k of newKeys) {\n\t\tconst value = props[k];\n\t\tif (k in oldProps && oldProps[k] === value) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (isValue(value)) {\n\t\t\tReflect.defineProperty(obj, k, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget() { return value(); },\n\t\t\t\tset(v) { value(v); }\n\t\t\t});\n\t\t\tcontinue;\n\t\t}\n\t\tReflect.defineProperty(obj, k, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue,\n\t\t});\n\t}\n\treturn obj;\n}","import {\n\tNeepElement, Exposed, Delivered,\n\tRender, NeepNode, Slots, Context, IRender, Component,\n} from '../type';\nimport { typeSymbol } from '../symbols';\nimport { isProduction } from '../constant';\nimport auxiliary, { isElement, Tags } from '../auxiliary';\nimport { renderSymbol, isElementSymbol } from '../symbols';\nimport { getLabel } from '../helper/label';\nimport Container from './Container';\nimport Entity from './Entity';\nimport { getSlots, setSlots } from './slot';\nimport { initContext } from '../helper/context';\nimport { updateProps } from './props';\n\nfunction execSimple(\n\tnObject: Container | Entity,\n\tdelivered: Delivered,\n\tnode: NeepElement,\n\ttag: Component,\n\tchildren: any[],\n) {\n\tconst { iRender } = nObject.container;\n\tconst slotMap = Object.create(null);\n\tgetSlots(iRender, children, slotMap);\n\tconst slots = setSlots(slotMap);\n\tconst context: Context = initContext({\n\t\tslots,\n\t\tcreated: false,\n\t\tparent: nObject.exposed,\n\t\tdelivered,\n\t\tchildren: new Set<Exposed>(),\n\t\tchildNodes: children,\n\t\trefresh(f) { nObject.refresh(f); }\n\t});\n\tif (!isProduction) { getLabel(); }\n\tconst result = tag({...node.props}, context, auxiliary);\n\tlet label: [string, string] | undefined;\n\tif (!isProduction) { label = getLabel(); }\n\tconst nodes = exec(nObject, delivered, renderNode(\n\t\tiRender,\n\t\tresult,\n\t\tcontext,\n\t\ttag[renderSymbol],\n\t), slots);\n\n\treturn {\n\t\t...node,\n\t\tchildren: Array.isArray(nodes) ? nodes : [nodes],\n\t\tlabel,\n\t} as NeepElement;\n}\n\nfunction execSlot(\n\tnode: NeepElement,\n\tslots: Slots,\n\tchildren: any[],\n\targs: any[] = [{}],\n): NeepElement {\n\tconst slotName = node.props?.name || 'default';\n\tconst slot = slots[slotName];\n\tif (typeof slot === 'function') {\n\t\treturn {\n\t\t\t...node,\n\t\t\t...slot(...args),\n\t\t};\n\t}\n\tconst { render } = node;\n\tconst label: [string, string] | undefined = isProduction\n\t\t? undefined\n\t\t: [`[${ slotName }]`, '#00F'];\n\treturn {\n\t\t...node,\n\t\ttag: Tags.ScopeSlot,\n\t\tlabel,\n\t\tchildren:\n\t\t\ttypeof render !== 'function' ? children : render(...args),\n\t};\n}\n\nfunction exec(\n\tnObject: Container | Entity,\n\tdelivered: Delivered,\n\tnode: any,\n\tslots: Slots,\n\tnative = false,\n): any {\n\tif (Array.isArray(node)) {\n\t\treturn node.map(n =>\n\t\t\texec(nObject, delivered, n, slots, native)\n\t\t);\n\t}\n\tif (!isElement(node)) { return node; }\n\tlet { tag, inserted, args = [{}] } = node;\n\tif (tag === Tags.Deliver) {\n\t\tconst props = { ...node.props };\n\t\tdelete props.ref;\n\t\tdelete props.slot;\n\t\tdelete props.key;\n\t\tconst newDelivered = Object.create(delivered);\n\t\tupdateProps(newDelivered, props || {}, {}, true);\n\t\treturn {\n\t\t\t...node,\n\t\t\ttag,\n\t\t\t$__neep__delivered: newDelivered,\n\t\t\tchildren: node.children.map(n => exec(\n\t\t\t\tnObject,\n\t\t\t\tnewDelivered,\n\t\t\t\tn,\n\t\t\t\tslots,\n\t\t\t\tnative,\n\t\t\t)),\n\t\t};\n\t}\n\n\tconst children = node.children\n\t\t.map(n => exec(nObject, delivered, n, slots, native));\n\n\tif (typeof tag === 'function') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn execSimple(nObject, delivered, node, tag, children);\n\t\t}\n\t\treturn { ...node, $__neep__delivered: delivered, children, tag };\n\n\t}\n\tif (tag === Tags.Slot) {\n\t\ttag = native ? 'slot' : Tags.ScopeSlot;\n\t}\n\tif (tag !== Tags.ScopeSlot || inserted) {\n\t\treturn { ...node, children, tag };\n\t}\n\treturn execSlot(node, slots, children, args);\n}\n\n\n\nfunction renderNode<R extends object = object>(\n\tiRender: IRender,\n\tnode: R | NeepNode | NeepNode[] | undefined | null,\n\tcontext: Context,\n\trender?: Render,\n): NeepNode[] {\n\tif (Array.isArray(node)) { return node; }\n\tif (isElement(node)) { return [node]; }\n\tif (node === undefined || node === null) {\n\t\treturn [{ [isElementSymbol]: true, tag: null, children: [] }];\n\t}\n\tif (!iRender.isNode(node) && typeof node === 'object' && render) {\n\t\tnode = render(node, context, auxiliary);\n\t}\n\tif (isElement(node)) { return [node]; }\n\tif (node === undefined || node === null) {\n\t\treturn [{ [isElementSymbol]: true, tag: null, children: [] }];\n\t}\n\treturn [{\n\t\t[isElementSymbol]: true,\n\t\ttag: Tags.Value,\n\t\tvalue: node,\n\t\tchildren: [],\n\t}];\n}\n\n\nexport default function normalize(\n\tnObject: Entity,\n\tresult: any,\n) {\n\treturn exec(\n\t\tnObject,\n\t\tnObject.delivered,\n\t\trenderNode(\n\t\t\tnObject.iRender,\n\t\t\tresult,\n\t\t\tnObject.context,\n\t\t\tnObject.component[renderSymbol],\n\t\t),\n\t\tnObject.context.slots,\n\t\tBoolean(nObject.native),\n\t);\n}\n","import {\n\tExposed, Delivered,\n\tEntity as ComponentEntity,\n\tNativeComponent,\n\tHook, Hooks, NeepNode, IRender,\n} from '../type';\nimport { callHook, setHook } from '../hook';\nimport { MountedNode } from './draw';\nimport Container from './Container';\nimport convert, { TreeNode } from './convert';\n\nfunction createExposed(obj: NeepObject): Exposed {\n\tconst cfg: { [K in Exclude<keyof Exposed, '$label'>]-?:\n\t\t{ configurable: true, value: Exposed[K] }\n\t\t| { configurable: true, get(): Exposed[K] }\n\t} = {\n\t\t$parent: { configurable: true, get: () => obj.parent?.exposed },\n\t\t$component: { configurable: true, value: null },\n\t\t$isContainer: { configurable: true, value: false },\n\t\t$created: { configurable: true, get: () => obj.created },\n\t\t$destroyed: { configurable: true, get: () => obj.destroyed },\n\t\t$mounted: { configurable: true, get: () => obj.mounted },\n\t\t$unmounted: { configurable: true, get: () => obj.unmounted },\n\t};\n\tconst exposed: Exposed = Object.create(null, cfg);\n\treturn exposed;\n}\n\nfunction createEntity(obj: NeepObject): ComponentEntity {\n\tconst cfg: { [K in keyof ComponentEntity]-?:\n\t\t{ configurable: true, value: ComponentEntity[K] }\n\t\t| { configurable: true, get(): ComponentEntity[K] }\n\t} = {\n\t\texposed: { configurable: true, get: () => obj.exposed },\n\t\tdelivered: { configurable: true, get: () => obj.delivered },\n\t\tparent: { configurable: true, get: () => obj.parent?.entity },\n\t\tcomponent: { configurable: true, value: null },\n\t\tisContainer: { configurable: true, value: false },\n\t\tcreated: { configurable: true, get: () => obj.created },\n\t\tdestroyed: { configurable: true, get: () => obj.destroyed },\n\t\tmounted: { configurable: true, get: () => obj.mounted },\n\t\tunmounted: { configurable: true, get: () => obj.unmounted },\n\t\t$_hooks: { configurable: true, value: Object.create(null) },\n\t\tcallHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(h: string) { callHook(h, entity); },\n\t\t},\n\t\tsetHook: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(id: string, hook: Hook) {\n\t\t\t\treturn setHook(id, hook, entity);\n\t\t\t},\n\t\t},\n\t\trefresh: {\n\t\t\tconfigurable: true,\n\t\t\tvalue(f?:() => void) { obj.refresh(f); },\n\t\t},\n\t};\n\tconst entity: ComponentEntity = Object.create(null, cfg);\n\treturn entity;\n}\n\nexport default class NeepObject {\n\treadonly iRender: IRender;\n\t/** TODO: 向后代呈递的值 */\n\treadonly parentDelivered: Delivered;\n\t/** TODO: 向后代呈递的值 */\n\treadonly delivered: Delivered;\n\t/** 组件暴露值 */\n\treadonly exposed: Exposed = createExposed(this);\n\t/** 组件实体 */\n\treadonly entity: ComponentEntity = createEntity(this);\n\t/** 父组件 */\n\tparent?: NeepObject;\n\t/** 原生组件 */\n\tnative: NativeComponent | null = null;\n\t/** 状态 */\n\tcreated: boolean = false;\n\tdestroyed: boolean = false;\n\tmounted: boolean = false;\n\tunmounted: boolean = false;\n\t/**  子组件的暴露值 */\n\treadonly children: Set<Exposed> = new Set();\n\t/** The subtree mounted on the parent node */\n\ttree: (MountedNode | MountedNode[])[] = [];\n\treadonly container: Container;\n\tconstructor(\n\t\tiRender: IRender,\n\t\tparent?: NeepObject,\n\t\tdelivered: Delivered = parent?.delivered || Object.create(null),\n\t\tcontainer?: Container,\n\t) {\n\t\tthis.iRender = iRender;\n\t\tthis.parentDelivered = delivered;\n\t\tthis.delivered = Object.create(delivered);\n\t\tif (parent) {\n\t\t\tthis.parent = parent;\n\t\t}\n\t\tthis.container = container || this as any as Container;\n\t}\n\t/** 结果渲染函数 */\n\tprotected _render: () => NeepNode[] = () => [];\n\n\tget canRefresh(): boolean {\n\t\treturn !this._delayedRefresh;\n\t}\n\tprotected get needRefresh(): boolean {\n\t\tif (this._delayedRefresh) { return false; }\n\t\tconst needRefresh = this._needRefresh;\n\t\tthis._needRefresh = false;\n\t\treturn needRefresh;\n\t}\n\t/** 是否需要继续刷新 */\n\tprotected _needRefresh = false;\n\tprivate _delayedRefresh = 0;\n\t/** 是否为刷新中 */\n\tprivate _refreshing = false;\n\t/** 渲染结果 */\n\tprotected _nodes: (TreeNode | TreeNode[])[] = [];\n\tprotected _refresh() { }\n\trefresh(f?: () => void) {\n\t\tif (typeof f === 'function') {\n\t\t\ttry {\n\t\t\t\tthis._delayedRefresh++;\n\t\t\t\tf();\n\t\t\t} finally {\n\t\t\t\tthis._delayedRefresh--;\n\t\t\t\tif (this._delayedRefresh <= 0) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (this.destroyed) { return; }\n\t\tif (!this.created) { return; }\n\t\tthis._needRefresh = true;\n\n\t\tif (this._refreshing) { return; }\n\t\tthis._refreshing = true;\n\n\t\tlet nodes: NeepNode[] | undefined;\n\t\twhile(this.needRefresh) {\n\t\t\tnodes = this._render();\n\t\t\tif (this.destroyed) { return; }\n\t\t}\n\t\tthis._refreshing = false;\n\t\tif (!this.canRefresh) { return; }\n\t\tif (!nodes) { return; }\n\n\t\tthis._nodes = convert(this, nodes, this._nodes);\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tif (this.unmounted) { return; }\n\t\tthis._refresh();\n\t}\n\tcallHook<H extends Hooks>(id: H): void;\n\tcallHook(id: string): void;\n\tcallHook(id: string): void {\n\t\tcallHook(id, this.entity);\n\t}\n\n\tchildNodes: any[] = [];\n\t/** 更新属性及子代 */\n\tprotected _update(props: object, children: any[]): void {\n\t\tthis.childNodes = children;\n\t}\n\t/** 更新属性及子代 */\n\tupdate(props: object, children: any[]): void {\n\t\tthis._update(props, children);\n\t}\n\n\n\tprivate __executed_destroy = false;\n\tprivate __executed_mount = false;\n\tprivate __executed_mounted = false;\n\tprotected _destroy() { }\n\tdestroy() {\n\t\tif (this.__executed_destroy) { return; }\n\t\tthis.__executed_destroy = true;\n\t\tthis.callHook('beforeDestroy');\n\t\tthis._destroy();\n\t\tthis.callHook('destroyed');\n\t\tthis.destroyed = true;\n\t}\n\tprotected _mount() { }\n\tmount() {\n\t\tif (this.__executed_destroy) { return; }\n\t\tif (this.__executed_mount) { return; }\n\t\tthis.__executed_mount = true;\n\t\tthis.callHook('beforeMount');\n\t\tthis._mount();\n\t\tthis.callHook('mounted');\n\t\tthis.mounted = true;\n\t}\n\tprotected _unmount() { }\n\tunmount() {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.__executed_mounted) { return; }\n\t\tthis.__executed_mounted = true;\n\t\tthis.callHook('beforeUnmount');\n\t\tthis._unmount();\n\t\tthis.callHook('unmounted');\n\t\tthis.unmounted = true;\n\t}\n\t_draw() {}\n\tdraw() {\n\t\tif (this.__executed_destroy) { return; }\n\t\tthis.callHook('beforeUpdate');\n\t\tthis._draw();\n\t\tthis.callHook('updated');\n\t}\n}\n","import { Component, NeepNode, Slots, Context, Delivered } from '../type';\nimport auxiliary from '../auxiliary';\nimport { monitorable } from '../install';\nimport { setCurrent } from '../helper/current';\nimport convert, { destroy, TreeNode } from './convert';\nimport draw, { unmount, MountedNode } from './draw';\nimport normalize from './normalize';\nimport { getSlots, setSlots } from './slot';\nimport NeepObject from './Object';\nimport { initContext } from '../helper/context';\nimport { updateProps } from './props';\n\nfunction update(\n\tnObject: Entity<any, any>,\n\tprops: any,\n\tchildren:any[],\n) {\n\tupdateProps(nObject.props, props);\n\n\tconst slots = Object.create(null);\n\tconst {\n\t\tnative,\n\t\tcontainer: { iRender },\n\t} = nObject;\n\tconst childNodes = getSlots(\n\t\tiRender,\n\t\tchildren,\n\t\tslots,\n\t\tBoolean(native),\n\t);\n\tsetSlots(slots, nObject.slots);\n\tif (!native) { return; }\n\tnObject.nativeNodes\n\t\t= convert(nObject, childNodes, nObject.nativeNodes);\n}\n\nfunction createContext<\n\tP extends object = object,\n\tR extends object = object\n>(nObject: Entity<P, R>): Context {\n\treturn initContext({\n\t\tslots: nObject.slots,\n\t\tget created() { return nObject.created; },\n\t\tget parent() { return nObject.parent.exposed; },\n\t\tget delivered() { return nObject.parentDelivered; },\n\t\tget children() { return nObject.children; },\n\t\tget childNodes() { return nObject.childNodes; },\n\t\trefresh(f) { nObject.refresh(f); }\n\t}, nObject.exposed);\n}\n\n/** 初始化渲染 */\nfunction initRender<R extends object = object>(\n\tnObject: Entity<any, R>\n): { render(): any, nodes: any, stopRender(): void } {\n\tconst {\n\t\tcomponent,\n\t\tprops,\n\t\tcontext,\n\t\tentity,\n\t} = nObject;\n\tconst refresh = (changed: boolean) => changed && nObject.refresh()\n\t// 初始化执行\n\tconst result = monitorable.exec(() => setCurrent(\n\t\t() => component(props, context, auxiliary),\n\t\tentity,\n\t), refresh, true);\n\tif (typeof result === 'function') {\n\t\t// 响应式\n\t\tconst render = monitorable.createExecutable(\n\t\t\t() => normalize(nObject, (result as () => NeepNode)()),\n\t\t\trefresh,\n\t\t);\n\t\treturn {\n\t\t\tnodes: render(),\n\t\t\trender,\n\t\t\tstopRender: () => render.stop(),\n\t\t};\n\t}\n\n\tconst render = monitorable.createExecutable(\n\t\t() => normalize(nObject, setCurrent(\n\t\t\t() => component(props, context, auxiliary),\n\t\t\tentity,\n\t\t)),\n\t\trefresh,\n\t);\n\treturn {\n\t\tnodes: monitorable.exec(\n\t\t\t() => normalize(nObject, result), refresh, true,\n\t\t),\n\t\trender,\n\t\tstopRender: () => render.stop(),\n\t};\n}\n\n\nexport default class Entity<\n\tP extends object = object,\n\tR extends object = object\n> extends NeepObject {\n\t/** 组件函数 */\n\treadonly component: Component<P, R>;\n\t/** 组件属性 */\n\treadonly props: P = monitorable.encase(Object.create(null));\n\t/** 组件槽 */\n\treadonly slots: Slots = monitorable.encase(Object.create(null));\n\t/** 结果渲染函数 */\n\tprivate readonly _stopRender:() => void;\n\t/** 原生子代 */\n\tnativeNodes: (TreeNode | TreeNode[])[] | undefined;\n\tnativeTree: (MountedNode | MountedNode[])[] = [];\n\t/** 组件上下文 */\n\treadonly context: Context;\n\treadonly parent: NeepObject;\n\t/** 结果渲染函数 */\n\tconstructor(\n\t\tcomponent: Component<P, R>,\n\t\tprops: object,\n\t\tchildren: any[],\n\t\tparent: NeepObject,\n\t\tdelivered?: Delivered,\n\t) {\n\t\tsuper(parent.iRender, parent, delivered, parent.container);\n\t\tthis.component = component;\n\t\tReflect.defineProperty(\n\t\t\tthis.exposed,\n\t\t\t'$component',\n\t\t\t{ value: component, enumerable: true, configurable: true },\n\t\t);\n\t\t// // 原生组件\n\t\t// const native = nativeRender.component\n\t\t// \t&& component[typeSymbol] === 'native' && false;\n\t\t// // 原生组件\n\t\t// const nativeComponent = native\n\t\t// \t? nativeRender.component!()\n\t\t// \t: null;\n\t\t// this.native = nativeComponent;\n\t\t// 父子关系\n\t\tthis.parent = parent;\n\t\tparent.children.add(this.exposed);\n\t\t// 上下文属性\n\t\tconst context = createContext(this);\n\t\tthis.context = context;\n\t\t// 初始化钩子\n\t\tthis.callHook('beforeCreate');\n\t\t// 更新属性\n\t\tthis.childNodes = children;\n\t\tupdate(this, props, children);\n\t\t// 获取渲染函数及初始渲染\n\t\tconst { render, nodes, stopRender } = initRender(this);\n\t\tthis._render = render;\n\t\tthis._stopRender = stopRender;\n\t\tthis._nodes = convert(this, nodes);\n\t\t// 初始化钩子\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t\tif (this._needRefresh) { this.refresh(); }\n\t}\n\t/** 更新属性及子代 */\n\t_update(props: object, children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\tupdate(this, props, children);\n\t}\n\t_destroy() {\n\t\tif (this._stopRender) {\n\t\t\tthis._stopRender();\n\t\t}\n\t\tthis.parent.children.delete(this.exposed);\n\t\tdestroy(this._nodes);\n\t}\n\n\t/** 刷新 */\n\t_refresh() {\n\t\tthis.container.markDraw(this);\n\t}\n\t_draw() {\n\t\tthis.tree = draw(\n\t\t\tthis.container.iRender,\n\t\t\tthis._nodes,\n\t\t\tthis.tree,\n\t\t);\n\t\tconst {native} = this;\n\t\tif (native) {\n\t\t\t// const shadow = this.container.iRender.shadow!(native);\n\t\t\t// TODO: 更新 childNodes\n\t\t}\n\t}\n\t_mount() {\n\t\tthis.tree = draw(this.container.iRender, this._nodes);\n\t}\n\t_unmount() {\n\t\tunmount(this.container.iRender, this.tree);\n\t}\n}\n","import { getRender } from '../install';\nimport { NeepNode, NeepElement, Tag } from '../type';\nimport { Tags, isElement, Value, Template } from '../auxiliary';\nimport { isElementSymbol, typeSymbol } from '../symbols';\nimport { recursive2iterable } from './recursive';\nimport Entity from './Entity';\nimport NeepObject from './Object';\nimport Container from './Container';\nimport { updateProps } from './props';\n\nexport interface TreeNode\n\textends Omit<\n\t\tNeepElement,\n\t\t'children' | 'tag' | typeof isElementSymbol\n\t>\n{\n\t/** 标签名 */\n\ttag: Tag;\n\tchildren: (this | this[])[];\n\tmounted?: boolean;\n\tcomponent?: NeepObject;\n}\n/** 强制转换为 NeepElement */\nfunction toElement(t: any): null | NeepElement {\n\tif (t === false || t === null || t === undefined) {\n\t\treturn null;\n\t}\n\tif (isElement(t)) {\n\t\treturn t;\n\t}\n\treturn {\n\t\t[isElementSymbol]: true,\n\t\ttag: Value,\n\t\tkey: t,\n\t\tvalue: t,\n\t\tchildren: [],\n\t};\n}\n\nexport function destroy(\n\ttree: TreeNode | TreeNode[] | (TreeNode | TreeNode[])[]\n) {\n\tif (Array.isArray(tree)) {\n\t\ttree.forEach(t => destroy(t));\n\t\treturn;\n\t}\n\tconst { component } = tree;\n\tif (component) { component.destroy(); }\n}\n\nfunction createItem(\n\tnObject: NeepObject,\n\tsource: NeepNode,\n): TreeNode {\n\tif (!source) { return { tag: null, children: [] }; }\n\tconst { tag } = source;\n\tif (!tag) { return { tag: null, children: [] }; }\n\tif (typeof tag !== 'string') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn {\n\t\t\t\t...source,\n\t\t\t\tchildren: convert(nObject, source.children),\n\t\t\t\tcomponent: undefined,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\t...source, children: [],\n\t\t\tcomponent: new Entity(\n\t\t\t\ttag,\n\t\t\t\tsource.props || {},\n\t\t\t\tsource.children,\n\t\t\t\tnObject,\n\t\t\t\tsource.$__neep__delivered,\n\t\t\t),\n\t\t};\n\t}\n\tif (tag === Tags.Container) {\n\t\tconst type = source?.props?.type;\n\t\tconst iRender = type ? getRender(type) : nObject.iRender;\n\t\treturn {\n\t\t\t...source, children: [],\n\t\t\tcomponent: new Container(\n\t\t\t\tiRender,\n\t\t\t\tsource.props || {},\n\t\t\t\tsource.children,\n\t\t\t\tnObject,\n\t\t\t\tsource.$__neep__delivered,\n\t\t\t),\n\t\t};\n\t}\n\tif (tag === Tags.Value) {\n\t\treturn { ...source, children: [] };\n\t}\n\tif (tag === Template || tag.substr(0, 5) === 'Neep:') {\n\t\treturn {\n\t\t\t...source,\n\t\t\tchildren: convert(nObject, source.children),\n\t\t};\n\t}\n\treturn {...source, children: convert(nObject, source.children) };\n}\n\n/**\n * 更新树节点\n * @param nObject Neep 对象\n * @param source 用于替换的源\n * @param tree 已有树\n */\nfunction updateList(\n\tnObject: NeepObject,\n\tsource: any[],\n\ttree: TreeNode | TreeNode[],\n): TreeNode[] {\n\tif (!Array.isArray(tree)) { tree = [tree]; }\n\tconst newList: TreeNode[] = [];\n\tfor (const src of recursive2iterable(source)) {\n\t\tconst node = toElement(src);\n\t\tif (!node) { continue; }\n\t\tconst index = tree.findIndex(it =>\n\t\t\tit.tag === node.tag && it.key === node.key\n\t\t);\n\t\tif (index >= 0) {\n\t\t\tnewList.push(updateItem(nObject, node, tree[index]));\n\t\t\ttree.splice(index, 1);\n\t\t} else {\n\t\t\tnewList.push(createItem(nObject, node));\n\t\t}\n\t}\n\tdestroy(tree);\n\treturn newList;\n}\n\n/**\n * 更新树节点\n * @param tree 已有树\n * @param source 用于替换的源\n * @param nObject Neep 对象\n */\nfunction updateItem(\n\tnObject: NeepObject,\n\tsource: NeepNode,\n\ttree?: TreeNode | TreeNode[],\n): TreeNode {\n\tif (!tree) {\n\t\treturn createItem(nObject, source);\n\t}\n\tif (!source) {\n\t\tdestroy(tree);\n\t\treturn { tag: null, children: [] };\n\t}\n\tif (Array.isArray(tree)) {\n\t\tif (!tree.length) { return createItem(nObject, source); }\n\t\tconst index = tree.findIndex(it => it.tag === source.tag);\n\t\tif (index < 0) {\n\t\t\tdestroy(tree);\n\t\t\treturn createItem(nObject, source);\n\t\t}\n\t\tconst all = tree;\n\t\t[tree] = tree.splice(index, 1);\n\t\tdestroy(all);\n\t}\n\tconst { tag } = source;\n\tif (tag !== tree.tag) {\n\t\tdestroy(tree);\n\t\treturn createItem(nObject, source);\n\t}\n\tif (!tag) { return { tag: null, children: [] }; }\n\tif (typeof tag !== 'string') {\n\t\tif (tag[typeSymbol] === 'simple') {\n\t\t\treturn {\n\t\t\t\t...source,\n\t\t\t\tchildren: convert(\n\t\t\t\t\tnObject,\n\t\t\t\t\tsource.children,\n\t\t\t\t\ttree.children,\n\t\t\t\t),\n\t\t\t\tcomponent: undefined,\n\t\t\t};\n\t\t}\n\t\tconst { component } = tree;\n\t\tif (!component) { return createItem(nObject, source); }\n\t\tcomponent!.update(source.props || {}, source.children);\n\t\treturn { ...source, children: [], component };\n\t}\n\tif (tag === Tags.Container) {\n\t\tconst { component } = tree;\n\t\tif (!component) { return createItem(nObject, source); }\n\t\tconst type = source?.props?.type;\n\t\tconst iRender = type ? getRender(type) : nObject.iRender;\n\t\tif (iRender !== component.iRender) {\n\t\t\treturn createItem(nObject, source);\n\t\t}\n\t\tcomponent!.update(source.props || {}, source.children);\n\t\treturn { ...source, children: [], component };\n\t}\n\tif (tag === Tags.Value) {\n\t\treturn { ...source, children: [] };\n\t}\n\tif (tag === Template || tag.substr(0, 5) === 'Neep:') {\n\t\tlet delivered: any;\n\t\tif (Tags.Deliver === tag) {\n\t\t\tconst props = { ...source.props };\n\t\t\tdelete props.ref;\n\t\t\tdelete props.slot;\n\t\t\tdelete props.key;\n\t\t\tdelivered = updateProps(\n\t\t\t\ttree.$__neep__delivered,\n\t\t\t\tprops,\n\t\t\t\ttree.props,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\t\treturn {\n\t\t\t...source,\n\t\t\t$__neep__delivered: delivered,\n\t\t\tchildren: convert(\n\t\t\t\tnObject,\n\t\t\t\tsource.children,\n\t\t\t\ttree.children,\n\t\t\t),\n\t\t};\n\t}\n\treturn {\n\t\t...source,\n\t\tchildren: convert(nObject, source.children, tree.children),\n\t};\n}\n\n\nfunction createAll(\n\tnObject: NeepObject,\n\tsource: any[],\n): (TreeNode | TreeNode[])[] {\n\tif (!source.length) { return []; }\n\treturn (source as any[]).map(item => {\n\t\tif (!Array.isArray(item)) {\n\t\t\treturn createItem(nObject, toElement(item));\n\t\t}\n\t\treturn [...recursive2iterable(item)]\n\t\t\t.map(it => createItem(nObject, toElement(it)));\n\t});\n}\nfunction *updateAll(\n\tnObject: NeepObject,\n\tsource: any[],\n\ttree: (TreeNode | TreeNode[])[],\n): Iterable<TreeNode | TreeNode[]> {\n\tlet index = 0;\n\tlet length = Math.min(source.length, source.length);\n\tfor (; index < length; index++) {\n\t\tconst src = source[index];\n\t\tif (Array.isArray(src)) {\n\t\t\tyield updateList(nObject, src, tree[index]);\n\t\t} else {\n\t\t\tyield updateItem(nObject, toElement(src), tree[index]);\n\t\t}\n\t}\n\tlength = Math.max(source.length, source.length);\n\tif (tree.length > length) {\n\t\t\t// 销毁多余项\n\t\t\tfor (; index < length; index++) {\n\t\t\t\tdestroy(tree[index]);\n\t\t\t}\n\t}\n\tif (source.length > length) {\n\t\t// 创建多余项\n\t\tfor (; index < length; index++) {\n\t\t\tconst src = source[index];\n\t\t\tif (Array.isArray(src)) {\n\t\t\t\tyield [...recursive2iterable(src)]\n\t\t\t\t\t.map(it => createItem(nObject, it));\n\t\t\t} else {\n\t\t\t\tyield createItem(nObject, src);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * 更新树\n * @param source 用于替换的源\n * @param nObject Neep 对象\n * @param tree 已有树\n */\nfunction convert(\n\tnObject: NeepObject,\n\tsource: any,\n\ttree?: (TreeNode | TreeNode[])[],\n): (TreeNode | TreeNode[])[] {\n\tif (!Array.isArray(source)) { source = []; }\n\tif (!tree) {\n\t\treturn createAll(nObject, source);\n\t}\n\treturn [...updateAll(nObject, source, tree)];\n}\n\n\nexport default convert;\n","import {\n\tIRender,\n\tMountProps,\n\tNativeNode,\n\tNativeContainer,\n\tDelivered,\n} from '../type';\nimport { Tags } from '../auxiliary';\nimport { createMountedNode } from './id';\nimport convert, { destroy } from './convert';\nimport draw, { unmount, getNodes, MountedNode } from './draw';\nimport NeepObject from './Object';\n\n\nlet awaitDraw = new Set<Container>();\nlet requested = false;\nfunction markDraw(c: Container) {\n\tawaitDraw.add(c);\n\tif (requested) { return; }\n\trequested = true;\n\twindow.requestAnimationFrame(() => {\n\t\trequested = false;\n\t\tconst list = [...awaitDraw];\n\t\tawaitDraw.clear();\n\t\tlist.map(c => c.drawAll());\n\t});\n}\n\nexport default class Container extends NeepObject {\n\tprops: MountProps;\n\t/** 组件树结构 */\n\tcontent: (MountedNode | MountedNode[])[] = [];\n\t_node: NativeNode | null = null;\n\t_container: NativeContainer | null = null;\n\treadonly rootContainer: Container = this;\n\tconstructor(\n\t\tiRender: IRender,\n\t\tprops: MountProps,\n\t\tchildren: any[],\n\t\tparent?: NeepObject,\n\t\tdelivered?: Delivered,\n\t) {\n\t\tsuper(iRender, parent, delivered);\n\t\tthis.props = props;\n\t\tthis.parent = parent;\n\t\tif (parent) {\n\t\t\tthis.rootContainer = parent.container.rootContainer;\n\t\t}\n\t\tthis.callHook('beforeCreate');\n\t\tthis._render = () => children;\n\t\tthis._nodes = convert(this, children);\n\t\tthis.callHook('created');\n\t\tthis.created = true;\n\t}\n\t_drawChildren = false;\n\t_drawContainer = false;\n\tsetChildren(children: any[]): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.childNodes = children;\n\t\tthis._render = () => children;\n\t\tthis._drawChildren = true;\n\t\tthis.refresh();\n\t}\n\tsetProps(props: MountProps): void {\n\t\tif (this.destroyed) { return; }\n\t\tthis.props = props;\n\t\tthis._drawContainer = true;\n\t\tthis.refresh();\n\t}\n\t/** 更新属性及子代 */\n\tupdate(props: MountProps, children: any[]): void {\n\t\tthis.refresh(() => {\n\t\t\tthis.setProps(props);\n\t\t\tthis.setChildren(children);\n\t\t});\n\t}\n\t_refresh() {\n\t\tthis.markDraw(this);\n\t}\n\t_mount() {\n\t\tconst { props, parent, iRender } = this;\n\t\tconst content = draw(this.container.iRender, this._nodes);\n\t\tthis.content = content;\n\t\tconst [container, node]\n\t\t\t= iRender.mount(props, parent?.iRender);\n\t\tfor (const it of getNodes(content)) {\n\t\t\tiRender.insert(container, it);\n\t\t}\n\t\tthis.tree = [createMountedNode({\n\t\t\ttag: Tags.Value,\n\t\t\tcomponent: undefined,\n\t\t\tnode,\n\t\t\tvalue: node,\n\t\t\tchildren: [],\n\t\t})];\n\t\tthis._node = node;\n\t\tthis._container = container;\n\t}\n\t_destroy() {\n\t\tdestroy(this.content);\n\t}\n\t_unmount() {\n\t\tconst { parent, iRender } = this;\n\t\tif (parent) {\n\t\t\tunmount(parent.iRender, this.tree);\n\t\t}\n\t\tiRender.unmount(\n\t\t\tthis._container!,\n\t\t\tthis._node!,\n\t\t\tBoolean(parent),\n\t\t);\n\t\tunmount(this.iRender, this.content);\n\t}\n\t_draw() {\n\t}\n\tdrawSelf() {\n\t\tif (!this.mounted) { return; }\n\t\tif (this.destroyed) { return; }\n\t\tconst {\n\t\t\t_drawChildren: drawChildren,\n\t\t\t_drawContainer: drawContainer,\n\t\t} = this;\n\t\tthis._needDraw = false;\n\t\tthis._drawChildren = false;\n\t\tthis._drawContainer = false;\n\t\tthis.callHook('beforeUpdate');\n\t\tif (drawContainer) {\n\t\t\tthis.iRender.drawContainer(\n\t\t\t\tthis._container!,\n\t\t\t\tthis._node!,\n\t\t\t\tthis.props,\n\t\t\t\tthis.parent?.iRender,\n\t\t\t);\n\t\t}\n\t\tif (drawChildren) {\n\t\t\tthis.content = draw(\n\t\t\t\tthis.iRender,\n\t\t\t\tthis._nodes,\n\t\t\t\tthis.content,\n\t\t\t);\n\t\t}\n\t\tthis.callHook('updated');\n\t}\n\t/** 等待重画的项目 */\n\tprivate _awaitDraw = new Set<NeepObject>();\n\t/** 自身是否需要重绘 */\n\tprivate _needDraw = false;\n\t/** 标记需要绘制的元素 */\n\tmarkDraw(\n\t\tnObject: NeepObject,\n\t\tremove = false,\n\t) {\n\t\tif (nObject === this) {\n\t\t\tthis._needDraw = !remove;\n\t\t} else if (remove) {\n\t\t\tthis._awaitDraw.delete(nObject);\n\t\t} else {\n\t\t\tthis._awaitDraw.add(nObject);\n\t\t}\n\t\tthis.rootContainer.markDrawContainer(\n\t\t\tthis,\n\t\t\t!this._needDraw && !this._awaitDraw.size || this.destroyed,\n\t\t);\n\t}\n\tdrawContainer() {\n\t\tconst {\n\t\t\t_node: node,\n\t\t\t_container: container,\n\t\t\t_awaitDraw: awaitDraw,\n\t\t} = this;\n\t\tif (!node || !container) { return; }\n\t\tthis.callHook('beforeDraw');\n\t\tconst needDraw = this._needDraw;\n\t\tthis._needDraw = false;\n\t\tconst list = [...awaitDraw];\n\t\tawaitDraw.clear();\n\t\tif (needDraw) { this.drawSelf(); }\n\t\tlist.map(c => c.draw());\n\t\tthis.iRender.draw(container, node);\n\t\tthis.callHook('drawn');\n\t}\n\tprivate _containers = new Set<Container>();\n\tmarkDrawContainer(\n\t\tcontainer: Container,\n\t\tremove = false,\n\t) {\n\t\tif (remove) {\n\t\t\tthis._containers.delete(container);\n\t\t} else {\n\t\t\tthis._containers.add(container);\n\t\t}\n\t\tmarkDraw(this);\n\t}\n\tdrawAll() {\n\t\tconst containers = this._containers;\n\t\tif (!containers.size) { return; }\n\t\tthis.callHook('beforeDrawAll');\n\t\tconst list = [...containers];\n\t\tlist.map(c => c.drawContainer());\n\t\tthis.callHook('drawnAll');\n\t}\n}\n","import {\n\tMountProps,\n\tNeepElement,\n\tComponent,\n\tRootExposed,\n} from '../type';\nimport { isElement, createElement } from '../auxiliary';\nimport { isProduction } from '../constant';\nimport { devtools, getRender } from '../install';\nimport Container from './Container';\n\nexport default function render(\n\te?: NeepElement | Component,\n\tp: MountProps = {},\n): RootExposed {\n\tlet params = {...p};\n\tconst container =  new Container(\n\t\tgetRender(p.type),\n\t\tparams,\n\t\te === undefined ? [] : isElement(e) ? [e] : [createElement(e)],\n\t);\n\tif (!isProduction) {\n\t\tdevtools.renderHook(container);\n\t}\n\tconst { exposed } = container;\n\tReflect.defineProperty(exposed, '$update', {\n\t\tvalue(c?: NeepElement | Component) {\n\t\t\tcontainer.setChildren(c === undefined ? []\n\t\t\t\t: isElement(c) ? [c] : [createElement(c)]);\n\t\t\treturn exposed;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tReflect.defineProperty(exposed, '$mount', {\n\t\tvalue(target?: any) {\n\t\t\tif (exposed.$mounted) { return exposed; }\n\t\t\tif (target) {\n\t\t\t\tparams.target = target;\n\t\t\t\tcontainer.setProps(params);\n\t\t\t}\n\t\t\tcontainer.mount();\n\t\t\treturn exposed;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tReflect.defineProperty(exposed, '$unmount', {\n\t\tvalue() {\n\t\t\tif (!exposed.$mounted) { return; }\n\t\t\tif (exposed.$unmounted) { return; }\n\t\t\tif (exposed.$destroyed) { return container.destroy(); }\n\t\t\tcontainer.unmount();\n\t\t\treturn;\n\t\t},\n\t\tconfigurable: true,\n\t});\n\tif (params.target) {\n\t\tcontainer.mount();\n\t}\n\treturn exposed as any as RootExposed;\n}\n","import { Component, Render, Marks } from './type';\nimport { nameSymbol, typeSymbol, renderSymbol } from './symbols';\n\n/** 组件标记函数 */\nexport interface Mark {\n\t<N extends Component<any, any>>(component: N): N;\n}\n\n/**\n * 创建组件标记函数\n */\nfunction Mark<S extends keyof Marks>(\n\tsymbol: S,\n\tvalue: Component[S],\n): Mark {\n\treturn component => {\n\t\tcomponent[symbol] = value as any;\n\t\treturn component;\n\t};\n}\n\n\n/** 标记组件名称 */\nexport function mName(name: string): Mark;\nexport function mName<N extends Component<any, any>>(\n\tname: string,\n\tcomponent: N,\n): N;\nexport function mName<N extends Component<any, any>>(\n\tname: string,\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(nameSymbol, name); }\n\tcomponent[nameSymbol] = name;\n\treturn component;\n}\n\n/** 标记组件类型 */\nexport function mType(type?: 'native' | 'simple' | 'standard'): Mark;\nexport function mType<N extends Component<any, any>>(\n\ttype: 'native' | 'simple' | 'standard',\n\tcomponent: N,\n): N;\nexport function mType<N extends Component<any, any>>(\n\ttype?: 'native' | 'simple' | 'standard',\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, type); }\n\tcomponent[typeSymbol] = type;\n\treturn component;\n}\n/** 标记为简单组件 */\nexport function mSimple(): Mark;\nexport function mSimple<N extends Component<any, any>>(\n\tcomponent: N,\n): N;\nexport function mSimple<N extends Component<any, any>>(\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, 'simple'); }\n\tcomponent[typeSymbol] = 'simple';\n\treturn component;\n}\n/** 标记为原生组件 */\nexport function mNative(): Mark;\nexport function mNative<N extends Component<any, any>>(\n\tcomponent: N,\n): N;\nexport function mNative<N extends Component<any, any>>(\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(typeSymbol, 'native'); }\n\tcomponent[typeSymbol] = 'native';\n\treturn component;\n}\n\n/** 标记独立的渲染函数 */\nexport function mRender(fn?: Marks[typeof renderSymbol]): Mark;\nexport function mRender<N extends Component<any, any>>(\n\tfn: Marks[typeof renderSymbol] | undefined,\n\tcomponent: N,\n): N;\nexport function mRender<N extends Component<any, any>>(\n\tfn?: Marks[typeof renderSymbol] | undefined,\n\tcomponent?: N,\n): Mark | N {\n\tif (!component) { return Mark(renderSymbol, fn); }\n\tcomponent[renderSymbol] = fn;\n\treturn component;\n}\n\nexport function create<P extends object>(\n\tc: Component<P, never>,\n): Component<P, never>;\nexport function create<\n\tP extends object = object,\n\tR extends object = object,\n>(c: Component<P, R>, r: Render<R>): Component<P, R>;\nexport function create<T extends Component<any, any>>(\n\tc: T,\n\tr?: Render,\n): T {\n\tif (typeof r === 'function') {\n\t\tc[renderSymbol] = r;\n\t}\n\treturn c;\n}\n\nexport function mark<N extends Component<any, any>>(\n\tcomponent: N,\n\t...marks: Mark[]\n): N {\n\tfor (const m of marks) { m(component); }\n\treturn component;\n}\n","import {\n\trecursive2iterable, RecursiveItem,\n} from '../core/render/recursive';\n\nfunction getId(v: any): string | undefined {\n\tif (typeof v === 'string') { return v; }\n\tif (typeof v === 'number') { return String(v); }\n\treturn undefined;\n}\nfunction getClass(\n\tlist: RecursiveItem<(string | {[k: string]: any})>\n): Set<string> | undefined {\n\tconst set = new Set<string>();\n\tfor (const v of recursive2iterable(list)) {\n\t\tif (!v) { continue; }\n\t\tif (typeof v === 'string') {\n\t\t\tfor (let k of v.split(' ').filter(Boolean)) {\n\t\t\t\tset.add(k);\n\t\t\t}\n\t\t} else if (typeof v === 'object') {\n\t\t\tfor (const k in v) {\n\t\t\t\tconst add = v[k];\n\t\t\t\tfor (let it of k.split(' ').filter(Boolean)) {\n\t\t\t\t\tset[add ? 'add' : 'delete'](it);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (!set.size) { return undefined; }\n\treturn set;\n}\n\nfunction getStyle(\n\tstyle: any\n): string | Record<string, [string, 'important' | null]> | undefined {\n\tif (typeof style === 'string') { return style; }\n\tif (!style) { return undefined; }\n\tif (typeof style !== 'object') { return undefined; }\n\tconst css: Record<string, [string, 'important' | null]> =\n\t\tObject.create(null);\n\tfor (let k in style) {\n\t\tlet value = style[k];\n\t\tconst key = k.substr(0, 2) === '--' ? k\n\t\t\t: k.replace(/[A-Z]/g, '-$1')\n\t\t\t\t.replace(/-+/g, '-')\n\t\t\t\t.toLowerCase();\n\t\tif (typeof value === 'number') {\n\t\t\tcss[key] = [value === 0 ? '0' : `${value}px`, null];\n\t\t} else if (value && typeof value === 'string') {\n\t\t\tconst v = value.replace(/\\!important\\s*$/, '');\n\t\t\tcss[key] = [v, v === value ? null : 'important'];\n\t\t}\n\t}\n\treturn css;\n}\n\nfunction stringify(data: any, isOn = false): string | null {\n\tif (data === undefined || data === null) { return null; }\n\tif (isOn && typeof data === 'function') { return null; }\n\tif (typeof data === 'boolean') { return data ? '' : null; }\n\tif (typeof data !== 'object') { return String(data); }\n\tif (data instanceof Date) {\n\t\treturn data.toISOString();\n\t}\n\tif (data instanceof RegExp) {\n\t\treturn data.toString();\n\t}\n\treturn JSON.stringify(data);\n}\nfunction getAttrs(props: {[k: string]: any}) {\n\tconst attrs: Record<string, string> = Object.create(null);\n\tfor (const k in props) {\n\t\tconst name = k\n\t\t\t.replace(/([A-Z])/g, '-$1')\n\t\t\t.replace(/(\\-)\\-+/g, '$1')\n\t\t\t.toLowerCase();\n\t\tswitch(name) {\n\t\t\tcase 'is': continue;\n\t\t\tcase 'id': continue;\n\t\t\tcase 'style': continue;\n\t\t\tcase 'class': continue;\n\t\t}\n\t\tconst value = stringify(props[k], name.substr(0, 2) === 'on');\n\t\tif (value !== null) { attrs[name] = value; }\n\t}\n\treturn attrs;\n}\nfunction getEvent(props: {[k: string]: any}) {\n\tconst evt: Record<string, Set<EventListener>> = Object.create(null);\n\tfor (const k in props) {\n\t\tconst f = props[k];\n\t\tif (typeof f !== 'function') { continue; }\n\t\tif (k.substr(0, 2) !== 'on') { continue; }\n\t\tevt[k.substr(2).toLowerCase()] = new Set([f]);\n\t}\n\treturn evt;\n}\ninterface Props {\n\tid?: string;\n\tclasses?: Set<string>;\n\tstyle?: string | Record<string, [string, 'important' | null]>;\n\tattrs: Record<string, string>;\n\tevent: Record<string, Set<EventListener>>;\n}\nfunction getProps({\n\tid,\n\tclass: className,\n\tstyle,\n\t...attrs\n}: {[k: string]: any}): Props {\n\treturn {\n\t\tid: getId(id),\n\t\tclasses: getClass(className),\n\t\tstyle: getStyle(style),\n\t\tattrs: getAttrs(attrs),\n\t\tevent: getEvent(attrs),\n\t};\n}\n\nfunction updateClass(\n\tel: HTMLElement | SVGElement,\n\tclasses?: Set<string>,\n\toClasses?: Set<string>,\n) {\n\tif (classes && oClasses) {\n\t\tconst list = el.getAttribute('class') || '';\n\t\tconst classList = new Set(list.split(' ').filter(Boolean));\n\t\toClasses.forEach(c => classList.delete(c));\n\t\tclasses.forEach(c => classList.add(c));\n\t\tel.setAttribute('class', [...classList].join(' '));\n\t} else if (classes) {\n\t\tel.setAttribute('class', [...classes].join(' '));\n\t} else if (oClasses) {\n\t\tel.removeAttribute('class');\n\t}\n}\nfunction updateStyle(\n\tcss: CSSStyleDeclaration,\n\tstyle?: string | Record<string, [string, 'important' | null]>,\n\toStyle?: string | Record<string, [string, 'important' | null]>,\n) {\n\tif (!style) {\n\t\tif (!oStyle) { return; }\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t\treturn;\n\t\t}\n\t\tfor (const k of Object.keys(oStyle)) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t\treturn;\n\t}\n\n\tif (typeof style === 'string') {\n\t\tif (style !== typeof oStyle) {\n\t\t\tcss.cssText = style;\n\t\t}\n\t\treturn;\n\t}\n\tif (!oStyle || typeof oStyle === 'string') {\n\t\tif (typeof oStyle === 'string') {\n\t\t\tcss.cssText = '';\n\t\t}\n\t\tfor (const k of Object.keys(style)) {\n\t\t\tcss.setProperty(k, ...style[k]);\n\t\t}\n\t\treturn;\n\t}\n\n\tfor (const k of Object.keys(style)) {\n\t\tconst v = style[k];\n\t\tif (\n\t\t\t!oStyle[k]\n\t\t\t|| oStyle[k][0] !== v[0]\n\t\t\t|| oStyle[k][1] !== v[1]\n\t\t) {\n\t\t\tcss.setProperty(k, ...v);\n\t\t}\n\t}\n\tfor (const k of Object.keys(oStyle)) {\n\t\tif (!style[k]) {\n\t\t\tcss.removeProperty(k);\n\t\t}\n\t}\n}\nfunction updateAttrs(\n\tel: HTMLElement | SVGElement,\n\tattrs: Record<string, string>,\n\toAttrs: Record<string, string>,\n) {\n\tfor (const k of Object.keys(attrs)) {\n\t\tconst v = attrs[k];\n\t\tif (!(k in oAttrs) || oAttrs[k] !== v) {\n\t\t\tel.setAttribute(k, v);\n\t\t}\n\t}\n\tfor (const k of Object.keys(oAttrs)) {\n\t\tif (!(k in attrs)) {\n\t\t\tel.removeAttribute(k);\n\t\t}\n\t}\n}\n\nfunction updateEvent(\n\tel: HTMLElement | SVGElement,\n\tevt: Record<string, Set<EventListener>>,\n\toEvt: Record<string, Set<EventListener>>,\n) {\n\n\tfor (const k of Object.keys(evt)) {\n\t\tconst set = evt[k];\n\t\tif (k in oEvt) {\n\t\t\tconst oSet = oEvt[k];\n\t\t\tfor (const f of set) {\n\t\t\t\tif (!oSet.has(f)) { el.addEventListener(k, f); }\n\t\t\t}\n\t\t\tfor (const f of oSet) {\n\t\t\t\tif (!set.has(f)) { el.removeEventListener(k, f); }\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const f of set) {\n\t\t\t\tel.addEventListener(k, f);\n\t\t\t}\n\t\t}\n\t}\n\tfor (const k of Object.keys(oEvt)) {\n\t\tif (k in evt) { continue; }\n\t\tfor (const f of oEvt[k]) {\n\t\t\tel.removeEventListener(k, f);\n\t\t}\n\t}\n}\n\nconst PropsMap = new WeakMap<Element, Props>();\nexport default function update(\n\tel: HTMLElement | SVGElement,\n\tprops: {[k: string]: any},\n) {\n\tconst old = PropsMap.get(el) || { attrs: {}, event: {} };\n\tconst { id,  classes, style, attrs, event } = getProps(props);\n\tPropsMap.set(el, { id, classes, style, attrs, event });\n\tif (id !== old.id) {\n\t\tif (typeof id === 'string') {\n\t\t\tel.id = props.id;\n\t\t} else {\n\t\t\tel.removeAttribute('id');\n\t\t}\n\t}\n\tupdateClass(el, classes, old.classes);\n\tupdateStyle(el.style, style, old.style);\n\tupdateAttrs(el, attrs, old.attrs);\n\tupdateEvent(el, event, old.event);\n\treturn el;\n}\n","\nimport update from './update';\nimport {\n\tIRender,\n\tNativeNode,\n\tNativeText,\n\tNativePlaceholder,\n\tNativeComponent,\n\tNativeShadow,\n\tNativeContainer,\n\tNativeElement,\n} from '@neep/core';\n\nconst render: IRender = {\n\ttype: 'html',\n\tisNode(v): v is NativeNode {\n\t\treturn v instanceof Node;\n\t},\n\tmount({target, class: className, style, tag}, parent) {\n\t\tif (!(\n\t\t\ttypeof tag === 'string' &&\n\t\t\t/^[a-z][a-z0-9]*(?:\\-[a-z0-9]+)?(?:\\:[a-z0-9]+(?:\\-[a-z0-9]+)?)?$/i.test(tag)\n\t\t)) {\n\t\t\ttag = 'div';\n\t\t}\n\t\tconst container = render.create(tag, { class: className, style });\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (target instanceof Element) {\n\t\t\ttarget.appendChild(container as any);\n\t\t\tif (parent) {\n\t\t\t\treturn [container, parent.placeholder] as any;\n\t\t\t}\n\t\t\treturn [container, container];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\tdocument.body.appendChild(container as any);\n\t\t\treturn [container, container] as any;\n\t\t}\n\t\treturn [container, container] as any;\n\t},\n\tunmount(container, node, removed) {\n\t\tif (container === node && removed) { return; }\n\t\t(container as any as Element).remove();\n\t},\n\tdrawContainer(container, node, {target, class: className, style, tag}, parent) {\n\t\trender.update(container as NativeElement, { class: className, style })\n\t\tif (typeof target === 'string') {\n\t\t\ttarget = document.querySelector(target);\n\t\t}\n\t\tif (parent !== render && !(target instanceof Element)) {\n\t\t\ttarget = document.body;\n\t\t}\n\t\tconst oldTarget = parent === render && container === node ? undefined : render.parent(node);\n\t\tif (oldTarget === target) {\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (parent !== render) {\n\t\t\ttarget.appendChild(container);\n\t\t\treturn [container, node];\n\t\t}\n\t\tif (!oldTarget) {\n\t\t\tconst newNode = parent.placeholder();\n\t\t\tconst pNode = parent.parent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insert(pNode, newNode as any, node);\n\t\t\t\trender.remove(node);\n\t\t\t}\n\t\t\treturn [container, newNode];\n\t\t}\n\t\tif (!target) {\n\t\t\tconst pNode = parent.parent(node);\n\t\t\tif (pNode) {\n\t\t\t\trender.insert(pNode, container, node);\n\t\t\t\trender.remove(node);\n\t\t\t}\n\t\t\treturn [container, container];\n\n\t\t}\n\t\ttarget.appendChild(node);\n\t\treturn [container, node];\n\t},\n\tdraw() {},\n\n\tcreate(tag, props) {\n\t\t// TODO: NS\n\t\t// 你好啊\n\t\treturn update(document.createElement(tag), props) as any;\n\t},\n\ttext(text: string): NativeText {\n\t\treturn document.createTextNode(text) as any;\n\t},\n\tplaceholder(): NativePlaceholder {\n\t\treturn document.createComment('') as any;\n\t},\n\tcomponent(): [NativeComponent, NativeShadow] {\n\t\tconst node = document.createElement('neep-component');\n\t\tnode.attachShadow({ mode: 'open' });\n\t\treturn [node, node.attachShadow({ mode: 'open' })] as any;\n\t},\n\n\tparent(node: NativeNode): NativeContainer | null {\n\t\treturn (node as any).parentNode as NativeContainer | null;\n\t},\n\tnext(node: NativeNode): NativeNode | null {\n\t\treturn (node as any).nextSibling as NativeContainer | null;\n\t},\n\tupdate(node, props): void {\n\t\tupdate(node as any, props);\n\t},\n\tinsert(\n\t\tparent: NativeContainer,\n\t\tnode: NativeNode,\n\t\tnext: NativeNode | null = null,\n\t): void {\n\t\t(parent as any).insertBefore(node, next);\n\t},\n\tremove(node: NativeNode): void {\n\t\tconst p = render.parent(node);\n\t\tif (!p) { return; }\n\t\t(p as any).removeChild(node);\n\t},\n};\n\nexport default render;\n","\n/*!\n * monitorable v0.1.0-alpha.3\n * (c) 2020 Fierflame\n * @license MIT\n */\n\nlet printErrorLog;\n/** 设置或移除错误打印函数 */\n\nfunction printError(info, print = false) {\n  if (!print && (typeof info === 'function' || info === undefined)) {\n    printErrorLog = info;\n    return;\n  }\n\n  if (typeof printErrorLog === 'function') {\n    printErrorLog(info);\n    return;\n  }\n\n  console.error(info);\n}\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n/** 回调函数安全化处理 */\n\nfunction safeify(fn) {\n  return (...p) => {\n    try {\n      fn(...p);\n    } catch (e) {\n      printError(e, true);\n    }\n  };\n}\nfunction getMapValue(map, key, def) {\n  if (map.has(key)) {\n    return map.get(key);\n  }\n\n  const value = def();\n  map.set(key, value);\n  return value;\n}\n\n/** 已被读取的 */\nlet read;\n/**\n * 标记已读状态\n * @param obj  要标记的对象\n * @param prop 要标记的属性\n */\n\nfunction markRead(obj, prop) {\n  if (!read) {\n    return;\n  }\n\n  const set = getMapValue(read, obj, () => new Set());\n\n  if (typeof prop === 'number') {\n    prop = String(prop);\n  }\n\n  set.add(prop);\n}\n/**\n * 监听函数的执行，并将执行过程中读取的对象值设置到 map 中\n * @param fn 要执行的含糊\n * @param map 用于存储被读取对象的 map\n * @param clear 是否在发送错误时清空 map\n */\n\nfunction observe(fn, map) {\n  const oldRead = read;\n  read = map;\n\n  try {\n    return fn();\n  } finally {\n    read = oldRead;\n  }\n}\nconst watchList = new WeakMap();\n/**\n * 标记属性的修改，同时触发监听函数\n * @param target 要标记的对象\n * @param prop   要标记的属性 特别的，false 表示原型，true 表示成员\n */\n\nfunction markChange(target, prop) {\n  var _watchList$get, _watchList$get$get;\n\n  if (!target) {\n    return;\n  }\n\n  if (!encashable(target)) {\n    return;\n  }\n\n  if (typeof prop === 'number') {\n    prop = String(prop);\n  } else if (typeof prop !== 'symbol' && typeof prop !== 'string' && typeof prop !== 'boolean') {\n    return;\n  }\n\n  const watch = (_watchList$get = watchList.get(target)) === null || _watchList$get === void 0 ? void 0 : (_watchList$get$get = _watchList$get.get) === null || _watchList$get$get === void 0 ? void 0 : _watchList$get$get.call(_watchList$get, prop);\n\n  if (!watch) {\n    return;\n  }\n\n  for (const w of [...watch]) {\n    w();\n  }\n}\n/**\n * 监听对象属性的变化\n * @param target 要监听的对象\n * @param prop   要监听的属性名 特别的，false 表示原型，true 表示成员\n * @param fn     属性改变后触发的函数\n */\n\nfunction watchProp(target, prop, cb) {\n  if (!target) {\n    return () => {};\n  }\n\n  if (!(typeof target === 'object' || typeof target === 'function')) {\n    return () => {};\n  }\n\n  if (typeof cb !== 'function') {\n    return () => {};\n  }\n\n  if (typeof prop === 'number') {\n    prop = String(prop);\n  }\n\n  if (typeof prop !== 'symbol' && typeof prop !== 'string' && typeof prop !== 'boolean') {\n    return () => {};\n  }\n\n  const key = prop;\n  let map = watchList.get(target);\n\n  if (!map) {\n    map = new Map();\n    watchList.set(target, map);\n  }\n\n  const list = getMapValue(map, key, () => new Set());\n  cb = safeify(cb);\n  list.add(cb);\n  let removed = false;\n  return () => {\n    if (removed) {\n      return;\n    }\n\n    removed = true; // 从当前列表中移除\n\n    list.delete(cb); // 从属性关联中删除\n\n    if (list.size) {\n      return;\n    }\n\n    if (!map) {\n      return;\n    }\n\n    map.delete(key); // 映射列表中删除\n\n    if (map.size) {\n      return;\n    }\n\n    watchList.delete(target);\n  };\n}\n\n/**\n * 判断对象是否可被代理\n */\n\nfunction encashable$1(v) {\n  return Boolean(v && ['object', 'function'].includes(typeof v));\n}\n\nlet getValue;\n/**\n * 获取被代理对象\n * @param obj  要被代理的对象\n * @param nest 递归代理的层数\n */\n\nfunction encase(value, nest = 0) {\n  if (!encashable$1(value)) {\n    return value;\n  }\n\n  const original = recover(value);\n  const nestLayer = nest === true ? Infinity : nest || 0;\n  const proxy = new Proxy(original, {\n    set(target, prop, value, receiver) {\n      if (nest === false) {\n        return Reflect.set(target, prop, value, receiver);\n      }\n\n      const has = Reflect.has(target, prop);\n      const modified = Reflect.set(target, prop, value, encase(receiver));\n\n      if (!modified) {\n        return modified;\n      }\n\n      if (has !== Reflect.has(target, prop)) {\n        markChange(target, true);\n      }\n\n      return modified;\n    },\n\n    get(target, prop, receiver) {\n      if (getValue === proxy) {\n        if (prop === '__monitorable__recover__') {\n          getValue = original;\n          return;\n        }\n      }\n\n      if (nest === false) {\n        return Reflect.get(target, prop, receiver);\n      }\n\n      markRead(target, prop);\n      const value = Reflect.get(target, prop, encase(receiver));\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    setPrototypeOf(target, proto) {\n      if (nest === false) {\n        return Reflect.setPrototypeOf(target, proto);\n      }\n\n      const oldProto = Reflect.getPrototypeOf(target);\n      const modified = Reflect.setPrototypeOf(target, proto);\n\n      if (modified && oldProto !== proto) {\n        markChange(target, false);\n      }\n\n      return modified;\n    },\n\n    getPrototypeOf(target) {\n      if (nest === false) {\n        return Reflect.getPrototypeOf(target);\n      }\n\n      markRead(target, false);\n      const value = Reflect.getPrototypeOf(target);\n\n      if (nestLayer > 0) {\n        return encase(value, nestLayer - 1);\n      }\n\n      return value;\n    },\n\n    defineProperty(target, prop, attr) {\n      if (nest === false) {\n        return Reflect.defineProperty(target, prop, attr);\n      }\n\n      let changed = true;\n\n      if ('value' in attr) {\n        const desc = Reflect.getOwnPropertyDescriptor(target, prop);\n\n        if (desc && 'value' in desc && recover(attr.value) === recover(desc.value)) {\n          changed = false;\n        }\n      }\n\n      const modified = Reflect.defineProperty(target, prop, attr);\n\n      if (changed && modified) {\n        markChange(target, prop);\n      }\n\n      return modified;\n    },\n\n    getOwnPropertyDescriptor(target, prop) {\n      if (nest === false) {\n        return Reflect.getOwnPropertyDescriptor(target, prop);\n      }\n\n      markRead(target, prop);\n      return Reflect.getOwnPropertyDescriptor(target, prop);\n    },\n\n    deleteProperty(target, prop) {\n      if (nest === false) {\n        return Reflect.deleteProperty(target, prop);\n      }\n\n      const has = Reflect.has(target, prop);\n      const deleted = Reflect.deleteProperty(target, prop);\n\n      if (has && !Reflect.has(target, prop)) {\n        markChange(target, prop);\n        markChange(target, true);\n      }\n\n      return deleted;\n    },\n\n    ownKeys(target) {\n      if (nest === false) {\n        return Reflect.ownKeys(target);\n      }\n\n      markRead(target, true);\n      return Reflect.ownKeys(target);\n    },\n\n    has(target, prop) {\n      if (nest === false) {\n        return Reflect.has(target, prop);\n      }\n\n      markRead(target, true);\n      return Reflect.has(target, prop);\n    }\n\n  });\n  return proxy;\n}\n/** 获取被代理的原始值 */\n\nfunction recover(v) {\n  if (!v) {\n    return v;\n  }\n\n  if (!encashable$1(v)) {\n    return v;\n  }\n\n  let value = v;\n\n  try {\n    getValue = v;\n    value = v.__monitorable__recover__;\n  } catch (_unused) {}\n\n  value = getValue;\n  getValue = false;\n\n  if (!value) {\n    return v;\n  }\n\n  if (typeof value === 'object') {\n    return value;\n  }\n\n  if (typeof value === 'function') {\n    return value;\n  }\n\n  return v;\n}\nfunction equal(a, b) {\n  return recover(a) === recover(b);\n}\n\nfunction exec(fn, cb, resultOnly) {\n  cb = safeify(cb);\n  let cancelList;\n  /** 取消监听 */\n\n  function cancel() {\n    if (!cancelList) {\n      return false;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n  const thisRead = new Map();\n  const result = observe(fn, thisRead);\n\n  if (!thisRead.size) {\n    cb(false);\n\n    if (resultOnly) {\n      return result;\n    }\n\n    return {\n      result,\n\n      stop() {}\n\n    };\n  }\n\n  cancelList = [];\n\n  for (let [obj, props] of thisRead) {\n    for (const p of props) {\n      cancelList.push(watchProp(recover(obj), p, trigger));\n    }\n  }\n\n  if (resultOnly) {\n    return result;\n  }\n\n  return {\n    result,\n\n    stop() {\n      if (!cancel()) {\n        return;\n      }\n\n      cb(false);\n    }\n\n  };\n}\n\n/**\n * 创建可监听执行函数\n * @param fn 要监听执行的函数\n * @param cb 当监听的值发生可能改变时触发的回调函数，单如果没有被执行的函数或抛出错误，将会在每次 fn 被执行后直接执行\n */\nfunction createExecutable(fn, cb) {\n  cb = safeify(cb);\n  let cancelList;\n  /** 取消监听 */\n\n  function cancel() {\n    if (!cancelList) {\n      return false;\n    }\n\n    const list = cancelList;\n    cancelList = undefined;\n    list.forEach(f => f());\n    return true;\n  }\n\n  function trigger() {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(true);\n  }\n\n  function exec() {\n    cancel();\n    const thisRead = new Map();\n\n    try {\n      return observe(fn, thisRead);\n    } catch (e) {\n      thisRead.clear();\n      throw e;\n    } finally {\n      if (thisRead.size) {\n        cancelList = [];\n\n        for (let [obj, props] of thisRead) {\n          for (const p of props) {\n            cancelList.push(watchProp(recover(obj), p, trigger));\n          }\n        }\n      } else {\n        cb(false);\n      }\n    }\n  }\n\n  exec.stop = () => {\n    if (!cancel()) {\n      return;\n    }\n\n    cb(false);\n  };\n\n  return exec;\n}\n\n/** 取消监听的方法 */\n\nconst values = new WeakSet();\nfunction isValue(x) {\n  return values.has(x);\n}\n/** 触发监听 */\n\nfunction createValue(recover, setValue, stop = () => {}, change = () => {}) {\n  function set(v, marked = false) {\n    if (!setValue) {\n      return;\n    }\n\n    try {\n      setValue(v, () => {\n        marked = true;\n      });\n    } finally {\n      if (marked) {\n        trigger();\n      }\n    }\n  }\n\n  function get() {\n    markRead(value, 'value');\n    return recover();\n  }\n\n  const value = (...v) => {\n    if (v.length) {\n      set(v[0], v[1]);\n      return v[0];\n    }\n\n    return get();\n  };\n\n  Reflect.defineProperty(value, 'value', {\n    get,\n    set,\n    enumerable: true,\n    configurable: true\n  });\n\n  function watch(cb) {\n    if (!callbacks) {\n      return () => {};\n    }\n\n    cb = safeify(cb);\n    callbacks.push(cb);\n    change();\n    let cancelled = false;\n    return () => {\n      if (cancelled) {\n        return;\n      }\n\n      cancelled = true;\n\n      if (!callbacks) {\n        return;\n      }\n\n      const index = callbacks.findIndex(a => a === cb);\n\n      if (index < 0) {\n        return;\n      }\n\n      callbacks.splice(index, 1);\n      change();\n    };\n  }\n\n  let callbacks = [];\n  Reflect.defineProperty(value, 'watch', {\n    get() {\n      return watch;\n    },\n\n    set() {},\n\n    configurable: true\n  });\n\n  const trigger = () => {\n    if (!callbacks) {\n      return;\n    }\n\n    markChange(value, 'value');\n\n    for (const cb of [...callbacks]) {\n      cb(value, false);\n    }\n  };\n\n  trigger.has = () => {\n    var _callbacks;\n\n    return Boolean((_callbacks = callbacks) === null || _callbacks === void 0 ? void 0 : _callbacks.length);\n  };\n\n  trigger.stop = () => {\n    if (!callbacks) {\n      return;\n    }\n\n    const list = callbacks;\n    callbacks = undefined;\n\n    for (const cb of [...list]) {\n      cb(value, true);\n    }\n  };\n\n  values.add(value);\n  let stoped = false;\n\n  value.stop = () => {\n    if (stoped) {\n      return;\n    }\n\n    stoped = true;\n    stop();\n    trigger.stop();\n  };\n\n  return {\n    value,\n    trigger\n  };\n}\n/**\n * 创建引用值\n * @param value 初始值\n * @param options 选项\n */\n\n\nfunction value(def, options) {\n  const proxy = options === true || options && options.proxy;\n  let source;\n  let proxyed;\n  const {\n    value\n  } = createValue(() => proxyed, (v, mark) => {\n    if (proxy) {\n      v = recover(v);\n    }\n\n    if (v === source) {\n      return;\n    }\n\n    source = v;\n    proxyed = proxy ? encase(source) : source;\n    mark();\n  });\n  value(def);\n  return value;\n}\n/**\n * 创建计算值\n * @param getter 取值方法\n * @param options 选项\n */\n\nfunction computed(getter, setter, options) {\n  if (typeof setter !== 'function') {\n    options = setter;\n    setter = undefined;\n  }\n\n  const setValue = setter;\n  const proxy = options === true || options && options.proxy;\n  let source;\n  let proxyed;\n  let stoped = false;\n  let computed = false;\n  let trigger;\n  const executable = createExecutable(getter, changed => {\n    computed = !changed;\n\n    if (changed && trigger) {\n      trigger();\n    }\n  });\n\n  function run() {\n    computed = true;\n\n    try {\n      source = executable();\n\n      if (proxy) {\n        source = recover(source);\n      }\n\n      proxyed = proxy ? encase(source) : source;\n      return proxyed;\n    } catch (e) {\n      if (!stoped) {\n        computed = false;\n      }\n\n      throw e;\n    }\n  }\n\n  let value;\n  ({\n    value,\n    trigger\n  } = createValue(() => computed || stoped ? proxyed : run(), setValue && (v => setValue(proxy ? recover(v) : v)), () => {\n    if (stoped) {\n      return;\n    }\n\n    stoped = true;\n\n    if (computed) {\n      return;\n    }\n\n    run();\n  }));\n  return value;\n}\nfunction merge(cb) {\n  let oldValue;\n  let runed = false;\n  return (v, stoped) => {\n    if (stoped) {\n      return cb(v, stoped);\n    }\n\n    const newValue = recover(v());\n\n    if (newValue === oldValue && runed) {\n      return;\n    }\n\n    runed = true;\n    oldValue = newValue;\n    cb(v, stoped);\n  };\n}\nfunction mix(source) {\n  for (const k of Reflect.ownKeys(source)) {\n    const descriptor = Reflect.getOwnPropertyDescriptor(source, k);\n\n    if (!descriptor) {\n      continue;\n    }\n\n    if (!('value' in descriptor) || 'get' in descriptor || 'set' in descriptor) {\n      continue;\n    }\n\n    const value = descriptor.value;\n\n    if (!isValue(value)) {\n      continue;\n    }\n\n    descriptor.get = () => value.value;\n\n    if (descriptor.writable) {\n      descriptor.set = v => value.value = v;\n    }\n\n    delete descriptor.value;\n    delete descriptor.writable;\n    Reflect.defineProperty(source, k, descriptor);\n  }\n\n  return source;\n}\n\nexport { computed, createExecutable, encase, encashable, equal, exec, getMapValue, isValue, markChange, markRead, merge, mix, observe, printError, recover, safeify, value, watchProp };\n//# sourceMappingURL=monitorable.esm.js.map\n","import { install } from '@neep/core';\nimport render from '.';\nimport * as monitorable from 'monitorable';\n\ninstall({ render, monitorable });\n\nexport * from '@neep/core';\n"],"names":["version","mode","isProduction","monitorable","renders","Object","create","getRender","type","default","installRender","render","list","Array","isArray","devtools","renderHook","installDevtools","tools","install","apis","NeepError","Error","constructor","message","tag","ScopeSlot","SlotRender","Slot","Value","Container","Deliver","Template","Fragment","value","v","computed","isValue","encase","recover","setCurrent","fn","entity","oldEntity","current","checkCurrent","name","initOnly","created","constructors","initContext","context","exposed","addContextConstructor","push","safeify","hooks","setHook","id","hook","$_hooks","set","Set","add","delete","callHook","watch","cb","stop","s","undefined","setValue","obj","opt","includes","Reflect","defineProperty","get","configurable","enumerable","expose","deliver","delivered","isElementSymbol","Symbol","for","typeSymbol","nameSymbol","renderSymbol","isElement","createElement","attrs","children","node","key","slot","ref","Tags","argv","args","length","props","on","k","onInfo","exec","nCmd","elements","n","concat","simple","label","setLabel","l","getLabel","text","color","auxiliary","State","Life","Element","Dev","Constant","setAuxiliary","defineAuxiliary","ids","Nodes","IdMap","Map","createMountedNode","recoveryMountedNode","recursive2iterable","it","getLastNode","tree","component","getFirstNode","getNodes","unmount","iRender","forEach","e","remove","replace","newTree","oldTree","next","parent","insert","updateList","source","createItem","newList","mountedMap","src","index","findIndex","old","item","updateItem","splice","size","filter","t","has","last","i","o","updateAll","Math","min","max","createList","all","draw","createValue","substr","update","createAll","isNode","RegExp","String","Date","toISOString","placeholder","map","mount","getSlots","slots","native","nativeList","ownKeys","el","renderSlots","createSlots","inserted","setSlots","updateProps","oldProps","define","newKeys","execSimple","nObject","container","slotMap","childNodes","refresh","f","result","nodes","renderNode","execSlot","slotName","newDelivered","$__neep__delivered","normalize","Boolean","createExposed","cfg","$parent","$component","$isContainer","$created","$destroyed","destroyed","$mounted","mounted","$unmounted","unmounted","createEntity","isContainer","h","NeepObject","parentDelivered","canRefresh","_delayedRefresh","needRefresh","_needRefresh","_refresh","_refreshing","_render","_nodes","convert","_update","_destroy","destroy","__executed_destroy","_mount","__executed_mount","_unmount","__executed_mounted","_draw","nativeNodes","createContext","initRender","changed","createExecutable","stopRender","Entity","_stopRender","markDraw","toElement","awaitDraw","requested","c","window","requestAnimationFrame","clear","drawAll","rootContainer","setChildren","_drawChildren","setProps","_drawContainer","content","_node","_container","drawSelf","drawChildren","drawContainer","_needDraw","_awaitDraw","markDrawContainer","needDraw","_containers","containers","p","params","target","Mark","symbol","mName","mType","mSimple","mNative","mRender","r","mark","marks","m","getId","getClass","split","getStyle","style","css","toLowerCase","stringify","data","isOn","toString","JSON","getAttrs","getEvent","evt","getProps","class","className","classes","event","updateClass","oClasses","getAttribute","classList","setAttribute","join","removeAttribute","updateStyle","oStyle","cssText","keys","removeProperty","setProperty","updateAttrs","oAttrs","updateEvent","oEvt","oSet","addEventListener","removeEventListener","PropsMap","WeakMap","Node","test","document","querySelector","appendChild","body","removed","oldTarget","newNode","pNode","createTextNode","createComment","attachShadow","parentNode","nextSibling","insertBefore","removeChild","print","info","printErrorLog","console","printError","def"],"mappings":"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"}